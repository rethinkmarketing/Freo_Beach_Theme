((m,f)=>{"use strict";let r;const u=new Map,a=m.isTouch?"click":"mouseover",o=async function(a){if(!(m.w<r||a.target.closest(".mega-menu-posts"))){let s="mouseenter"===a.type||"focus"===a.type?this.tfClass("mega-link")[0]:a.target;if(s=(s=s.classList.contains("child-arrow")?s.closest(".has-mega-sub-menu").tfClass("mega-link")[0]:s).classList.contains("mega-link")?s:s.closest(".tf_mega_taxes .mega-link")){"click"===a.type&&a.preventDefault();const o=s.dataset.termid,n=s.dataset.tax,c=s.tfTag("a")[0].classList,i=s.closest(".mega-sub-menu"),l=i.tfClass("tf_mega_selected")[0];let e=s.tfClass("mega-menu-posts")[0],t=u.get(o);if(e||((e=f.createElement("div")).className="mega-menu-posts tf_left tf_box",s.appendChild(e)),l&&l.classList.remove("tf_mega_selected"),s.classList.add("tf_mega_selected"),void 0===t){if(c.contains("tf_loader"))return;c.add("tf_loader");try{t=await m.fetch({action:"themify_theme_mega_posts",termid:o,tax:n},"text"),u.set(o,t)}catch(a){}c.remove("tf_loader")}void 0!==t&&(e.innerHTML=t)}}};m.on("tf_mega_menu",(e,t)=>{const s=e.tfClass("tf_mega_taxes");r=t;for(let t=s.length-1;-1<t;--t){s[t].tfOn(a,o),"mouseover"==a&&s[t].tfOn("focusin",o,{passive:!0});let e=s[t].closest(".has-mega-sub-menu");e&&("mouseover"==a?(e.tfOn("mouseenter",o,{passive:!0}),e.querySelector("a").tfOn("focus",o.bind(e),{passive:!0})):e.tfClass("child-arrow")[0].tfOn("click",o))}},!0),m.isTouch||setTimeout(()=>{m.edgeMenu()},1500)})(Themify,document);