((r,g,h)=>{"use strict";let m;const l=new Map,i={credentials:"omit",method:"GET",mode:"cors"},o="https://themify.org/public-api/predesigned-rows/",c=e=>{const t=e.parentNode;let a=t.dataset.gap;if(a)a=parseInt(a);else{const s=getComputedStyle(t);a=s.getPropertyValue("grid-template-columns").trim().includes(" ")?parseInt(s.getPropertyValue("grid-row-gap")):-1,t.dataset.gap=a}if(0<a){const n=e.tfClass("predesigned_image")[0].getBoundingClientRect().height+e.tfClass("predesigned_title")[0].getBoundingClientRect().height;e.style.gridRowEnd="span "+Math.ceil((n+a)/a)}},u=new IntersectionObserver((i,o)=>{for(let l=i.length-1;-1<l;--l)if(!0===i[l].isIntersecting){o.unobserve(i[l].target);let e=i[l].target,t=e.parentNode,a=new Image(500,300),s=h.createElement("div"),n=e.tfTag("img")[0],r=n.dataset.src;s.className="tf_loader tf_abs_c",a.decoding="async",a.src=r,a.title=a.alt=n.alt,e.appendChild(s),c(t),a.decode().catch(()=>{}).finally(()=>{n.replaceWith(a),s.remove(),requestAnimationFrame(()=>{c(t)})})}},{rootMargin:"0px 0px 160px 0px"});r.preDesignedRows=class{constructor(e){e.removeAttribute("data-gap"),this.el=e,m?this.init():g.fetch("",null,i,o+"index.json").then(e=>{m=e,this.init()},e=>{r.Spinner.showLoader("error"),this.el.innerHTML='<h3 class="tf_textc">'+ThemifyConstructor.label.rows_fetch_error+"</h3>"})}init(){const o=h.createElement("canvas").toDataURL("image/webp").includes("data:image/webp"),e=o?"webp":"png",c="//via.placeholder.com/500x300."+e+"?text=",d=h.createDocumentFragment(),a=h.createDocumentFragment(),s=this.el.closest(".panel_tab").querySelector(".dropdown_wrap ul"),p=[];for(let i=0,e=m.length;i<e;++i){let e=m[i],s=[];if(e.category){let a=e.category.split(",");for(let e=0,t=a.length;e<t;++e)""!==a[e]&&(p.includes(a[e])||p.push(a[e]),s.push("tb"+g.hash(a[e])))}let t=h.createElement("div"),a=h.createElement("figure"),n=h.createElement("div"),r=new Image(500,300),l=h.createElement("button");t.className="predesigned_row tf_w",0<s.length&&(t.className+=" "+s.join(" ")),t.draggable=!0,t.dataset.slug=e.slug,a.className="predesigned_image tf_rel",n.className="predesigned_title",n.textContent=r.alt=r.title=e.title,r.loading="lazy",r.decoding="async",r.src=c+encodeURI(e.title),e.thumbnail&&(r.dataset.src=o?e.thumbnail.replace(".jpg",".webp").replace(".png",".webp"):e.thumbnail,u.observe(a)),l.type="button",l.className="tf_plus_icon add_module_btn tb_disable_sorting tf_rel",l.dataset.type="predesigned",a.append(r,l),t.append(a,n),d.appendChild(t)}p.sort();for(let t=0,e=p.length;t<e;++t){let e=h.createElement("li");e.textContent=p[t],e.dataset.slug="tb"+g.hash(p[t]),a.appendChild(e)}this.el.appendChild(d),s.appendChild(a),g.imagesLoad(this.el).then(e=>{s.tfOn(g.click,e=>{this.filter(e)}).parentNode.classList.remove("tf_hidden");const t=this.el.tfClass("tf_loader")[0];t&&t.remove()})}filter(e){e.preventDefault(),e.stopPropagation();const a=e.target;if(!a.classList.contains("current")){const t=a.dataset.slug,s=a.closest(".panel_tab"),n=s.tfClass("dropdown_label")[0],r=t||0;n.innerText=a.textContent,n.dataset.active=r,e.isTrusted&&(s.closest(".panel_container").tfClass("panel_search")[0].value="");for(let e=a.parentNode.children,t=e.length-1;-1<t;--t)e[t].classList.toggle("current",e[t]===a);for(let e=s.tfClass("predesigned_row"),t=e.length-1;-1<t;--t)e[t].style.display=!r||e[t].classList.contains(r)?"":"none"}}},r.preDesignedRows.get=async e=>{if(r.Spinner.showLoader(),l.has(e))return l.get(e);try{const t=o+e,a=await g.fetch("",null,i,t+".json");if(r.Helper.clearElementId(a),l.set(e,a),!JSON.stringify(a).includes(r.GS.key))return a;try{const s=await g.fetch("",null,i,t+"-gs.json"),n={};for(let e in s)void 0!==s[e].class?n[s[e].class]=s[e]:n[e]=s[e];return r.GS.setImport(n,a)}catch(e){return a}}catch(e){r.Spinner.showLoader("error"),r.LiteLightBox.alert(ThemifyConstructor.label.row_fetch_error)}}})(tb_app,Themify,document);