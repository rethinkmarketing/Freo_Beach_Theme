var ThemifyConstructor;(($,O,L,_,T,I)=>{"use strict";ThemifyConstructor={data:null,styles:{},settings:{},editors:null,afterRun:[],radioChange:[],bindings:[],stylesData:null,values:{},clicked:null,type:null,static:null,label:null,is_repeat:null,is_sort:null,is_new:null,is_ajax:null,breakpointsReverse:null,init(){this.breakpointsReverse=Object.keys(themifyBuilder.breakpoints).reverse(),this.breakpointsReverse.push("desktop"),this.static=themifyBuilder.i18n.options,this.label=themifyBuilder.i18n.label;let a=themifyBuilder.safe;for(let e=0,t=a.length;e<t;++e)""!==a[e].value&&"default"!==a[e].value&&(this.font_select.safe[a[e].value]=a[e].name);if(a=themifyBuilder.google,Array.isArray(a)){for(let e=0,t=a.length;e<t;++e)if(""!==a[e].value&&"default"!==a[e].value){let t=[...a[e].variant];for(let e=t.length-1;-1<e;--e)t[e]="string"==typeof t[e]?t[e].replace("i","italic").replace("r","regular"):t[e].toString();this.font_select.google[a[e].value]={n:a[e].name,v:t}}}else for(let l in a){this.font_select.google[l]={n:a[l].n,v:[...a[l].v]};for(let e=this.font_select.google[l].v,t=e.length-1;-1<t;--t)e[t]="string"==typeof e[t]?e[t].replace("i","italic").replace("r","regular"):e[t].toString()}if(a=themifyBuilder.cf,Array.isArray(a)){for(let e=0,t=a.length;e<t;++e)if(""!==a[e].value&&"default"!==a[e].value){let t=[...a[e].variant];for(let e=t.length-1;-1<e;--e)t[e]="string"==typeof t[e]?t[e].replace("i","italic").replace("r","regular"):t[e].toString();this.font_select.cf[a[e].value]={n:a[e].name,v:t}}}else for(let l in a){this.font_select.cf[l]={n:a[l].n,v:[...a[l].v]};for(let e=this.font_select.cf[l].v,t=e.length-1;-1<t;--t)e[t]="string"==typeof e[t]?e[t].replace("i","italic").replace("r","regular"):e[t].toString()}a=themifyBuilder.i18n.options=null},getEl(e){return O.LightBox.el.querySelector("#"+e)},getOptions(t){const e="string"!=typeof t;if(e&&t.options!==I)return t.options;const l=this.label,a={appearance:[{name:"rounded",value:l.rounded},{name:"gradient",value:l.gradient},{name:"glossy",value:l.glossy},{name:"embossed",value:l.embos},{name:"shadow",value:l.sh}],blend:{normal:l.n,multiply:l.multi,screen:l.screen,overlay:l.overlay,darken:l.darken,lighten:l.light,"color-dodge":l.colord,"color-burn":l.colorb,difference:l.diff,exclusion:l.excl,hue:l.hue,saturation:l.sat,color:l.c,luminosity:l.lum},text_decoration:[{value:"underline",name:l.undl,label_class:"tb_text_underline",icon:"U"},{value:"overline",name:l.ovl,label_class:"tb_text_overline",icon:"O"},{value:"line-through",name:l.thl,label_class:"tb_text_through",icon:"S"},{value:"none",name:l.none,label_class:"tb_text_none",icon:"-"}],text_transform:[{value:"uppercase",name:l.ucase,icon:"AB"},{value:"lowercase",name:l.lcase,icon:"ab"},{value:"capitalize",name:l.cpt,icon:"Ab"},{value:"none",name:l.none,icon:"â€“"}],font_style:[{value:"italic",name:l.it,icon:'<span class="tb_font_italic">I</span>'},{value:"normal",name:l.n,icon:"N"}],font_weight:[{value:"bold",name:l.bold,icon:'<span class="tb_font_bold">B</span>'}],repeat:{repeat:l.r_all,"repeat-x":l.r_h,"repeat-y":l.r_v,"no-repeat":l.r_no,fullcover:l.fcover},border:{solid:l.solid,dashed:l.dashed,dotted:l.dotted,double:l.double,none:l.none},border_radius:[{id:"top",label:l.top+" "+l.left},{id:"right",label:l.top+" "+l.right},{id:"left",label:l.bottom+" "+l.left},{id:"bottom",label:l.bottom+" "+l.right}],choose:{yes:l.y,no:l.no},rchoose:{no:l.no,yes:l.y},echoose:{"":"",yes:l.y,no:l.no},link_type:[{value:"regular",name:l.swin},{value:"lightbox",name:l.lg},{value:"newtab",name:l.ntab}],link_to:[{value:"permalink",name:l.perml},{value:"media",name:l.medf},{value:"custom",name:l.cus},{value:"none",name:l.none}],display:{"":"",block:l.block,"inline-block":l.inbl,none:l.none},va_display:{"":"",top:l.top,middle:l.mid,bottom:l.bottom},img_appearance:[{name:"rounded",value:l.rounded},{name:"drop-shadow",value:l.dshadow},{name:"bordered",value:l.bordered},{name:"circle",value:l.circle,help:l.cimg_app}]};if(!this.static.aligment2){this.static.aligment=[{value:"left",name:l.top,icon:O.Helper.getIcon("ti-align-left").outerHTML},{value:"center",name:l.center,icon:O.Helper.getIcon("ti-align-center").outerHTML},{value:"right",name:l.right,icon:O.Helper.getIcon("ti-align-right").outerHTML},{value:"justify",name:l.just,icon:O.Helper.getIcon("ti-align-justify").outerHTML}],this.static.aligment2=this.static.aligment.slice(0,3),this.static.h_tags={};for(let e=6;0<e;--e)this.static.h_tags["h"+e]="H"+e}if(e){for(let e in a)if(!0===t[e])return a[e];for(let e in this.static)if(!0===t[e])return this.static[e]}else{if(a[t]!==I)return a[t];if(this.static[t]!==I)return this.static[t]}return!1},getTitle(e){return"custom_css"===e.type?this.label.custom_css:"title"===e.type?this.label.m_t:e.label!==I&&(this.label[e.label]!==I?this.label[e.label]:e.label)},getSwitcher(){const a=T.createElement("div"),i=this.breakpointsReverse,l=this;a.className="tb_lightbox_switcher tf_clearfix";for(let l=i.length-1;-1<l;--l){let e=i[l],t=T.createElement("button");t.dataset.href="#"+e,t.className="tab_"+e,t.title="tablet_landscape"===e?this.label.table_landscape:e.charAt(0).toUpperCase()+e.substr(1),t.appendChild(O.Helper.getIcon("ti-"+("tablet_landscape"===e?"tablet":e))),a.appendChild(t)}return a.tfOn(L.click,function(e){if(e.preventDefault(),e.stopImmediatePropagation(),e.target!==this){const t=e.target.closest("button");null!==t&&l.lightboxSwitch(t.dataset.href)}})},lightboxSwitch(e){const t=e.replace("#","");t!==O.activeBreakPoint&&O.ToolBar.breakpointSwitcher(t)},binding(e,i,l,s){let n=!1;const a=i.binding,t=i.type;if("select"===t&&0==l&&(l=""),"video"===t)if(""==l)n=a.empty;else{const o=L.parseVideo(l);if("youtube"===o.type||"vimeo"===o.type)n=a.external;else{let t;try{t=new URL(l)}catch(e){t=!1}n=!1!==t&&window.top.location.hostname===t.hostname?a.local:a.empty}}else l||a.empty===I?a[l]===I||!l&&"select"!==t?l&&a.not_empty!==I?n=a.not_empty:a.select!==I&&l!==a.select.value?n=a.select:a.checked!==I&&!0===e.checked?n=a.checked:a.not_checked!==I&&!1===e.checked&&(n=a.not_checked):n=("radio"!==t&&"icon_radio"!==t||!0===e.checked)&&a[l]:n=a.empty;if(n){s!==I&&null!==s&&0!==s.length||(s=e.closest(".tb_tab,.tb_expanded_opttions")||self.getEl("tb_lightbox_container"));const r=n.hide!==I,c=n.show!==I,d=[],p=this.data[this.clicked].options,_=(t,l)=>{let a;if(I!==l&&t!==I)for(let e=t.length-1;-1<e;--e){if(t[e].id===l){a=t[e];break}if(t[e].options!==I&&Array.isArray(t[e].options)&&(a=_(t[e].options,l))!==I)break}return a},m=(e,t,l)=>{const a=e.dataset.type;let i;"radio"===a?i=e.querySelector("input:checked")||e.tfTag("input")[0]:"checkbox"===a||"toggle_switch"===a?i=e.tfTag("input")[0]:"select"===a&&(i=e.tfTag("select")[0]),i&&this.binding(i,t,i.value,l)};!0!=c||Array.isArray(n.show)||(n.show=[n.show]),!0!=r||Array.isArray(n.hide)||(n.hide=[n.hide]);let t=!0==c?n.show:[];for(let a=0,e=(t=!0==r?t.concat(n.hide):t).length;a<e;++a){if(!0==r&&n.hide[a]!==I){let e=0===n.hide[a].indexOf("#")?n.hide[a]:"."+n.hide[a],l=s.querySelectorAll(e);for(let t=l.length-1;-1<t;--t)if(l[t].classList.add("_tb_hide_binding"),null!==this.component){let e=_(p,n.hide[a]);"object"==typeof e&&"object"==typeof e.binding&&d.push({el:l[t],data:e})}}if(!0==c&&n.show[a]!==I){let e=0===n.show[a].indexOf("#")?n.show[a]:"."+n.show[a],l=s.querySelectorAll(e);for(let t=l.length-1;-1<t;--t)if(("post_filter"!==i.id||"ajax_filter"!==n.show[a]||null===s.querySelector("#auto_tiles.selected"))&&(l[t].classList.remove("_tb_hide_binding"),null!==this.component)){let e=_(p,n.show[a]);"object"==typeof e&&"object"==typeof e.binding&&d.push({el:l[t],data:e})}}}for(let e=d.length-1;-1<e;--e)m(d[e].el,d[e].data,s);if(n.responsive!==I&&n.responsive.disabled!==I){Array.isArray(n.responsive.disabled)||(n.responsive.disabled=[n.responsive.disabled]);const u=n.responsive.disabled,h="desktop"!==O.activeBreakPoint;for(let l=u.length-1;-1<l;--l)if(n.responsive.disabled[l]!==I){let e=0===n.responsive.disabled[l].indexOf("#")?n.responsive.disabled[l]:"."+n.responsive.disabled[l],t=s.querySelectorAll(e);for(let e=t.length-1;-1<e;--e)t[l].classList.toggle("tb_responsive_disable",h)}}}},control:{init(e,t,l){this[l.name=t].call(this,e,l)},preview(e,t,o){const l=ThemifyConstructor;if(e&&e.isConnected){const a=!0===o.repeat?e.closest(".tb_toggleable_fields,.tb_sort_fields_parent,.tb_row_js_wrapper"):null;if(null!==a?l.settings[a.id]=O.Helper.clear(O.Forms.parseSettings(a).v):l.settings[o.id]=t,"visual"===O.mode){let n=null;if(o.selector!==I&&t)if(0===(n=O.activeModel.el.querySelectorAll(o.selector)).length)n=null;else if(null!==a){const r=e.closest(".tb_repeatable_field");let i=a.children,s=null;for(let e=0,t=i.length-1;e<t;++e)if(i[e]===r){s=e;break}if(o.rep!==I?(n=O.activeModel.el.querySelectorAll(o.rep))[s]!==I&&0===(i=n[s].querySelectorAll(o.selector)).length&&(i=null):i=null!==s&&n[s]!==I?[n[s]]:null,null!==i&&i!==I){n=[];for(let l=i.length-1;-1<l;--l){let e=i[l].closest(".tf_swiper-slide");if(null!==e){let t=e.closest(".tf_swiper-wrapper");if(null!==t){let a=t.querySelectorAll('.tf_swiper-slide[data-swiper-slide-index="'+s+'"]'),e=a.length;if(0!==e)for(let l=e-1;-1<l;--l)for(let e=a[l].querySelectorAll(o.selector),t=e.length-1;-1<t;--t)n.push(e[t]);else n.push(i[l])}}else n.push(i[l])}}else n=null}"refresh"===o.type||!0===l.is_ajax?O.activeModel.trigger("ajax",l.settings,n,t):O.activeModel.trigger("live",l.settings,"wp_editor"===o.name||"TEXTAREA"===e.tagName,null,n,t)}else"setting"===l.clicked&&O.activeModel.backendLivePreview(l.settings)}},change(e,l){const t=l.event||"change";let s;e.tfOn(t,e=>{let t=50;"change"===e.type?t=1:"refresh"===l.type&&l.selector===I&&(t=1e3),s&&clearTimeout(s),s=setTimeout(()=>{const a=e.target;let i=a.value;if("keyup"===e.type){if(i===a.dataset.oldValue)return;a.dataset.oldValue=i}if("SELECT"===a.nodeName&&a.multiple){i=[];for(let e=a.selectedOptions,t=0,l=e.length;t<l;++t)i.push(a.selectedOptions[t].value)}this.preview(a,i,l),s=null},t)},{passive:!0})},wp_editor(e,s){let n=this,t=e.id,o=!1,r,c=!1,l=function(){const e="function"==typeof this.getContent?this.getContent():this.value;if(r&&clearTimeout(r),null!==O.activeModel&&o!==e){if(o=e,!1!==c){if(!s.id){const t=this.id.split("_");if(t[1]){const l=O.LightBox.el.querySelector('textarea.sync-input[name="'+t[1]+'"]');l&&(s.id=t[1])}}if(s.id){const a=O.LightBox.el.querySelector('textarea.sync-input[name="'+s.id+'"]');if(a&&a!==this)return a.value=e,void L.triggerEvent(a,"change")}}if(this.targetElm)n.preview(this.targetElm,e,s);else{if("undefined"!=typeof tinyMCE){const i=tinymce.get(this.id);i&&i.setContent(e)}n.preview(this,e,s)}r=null}},a=O.LightBox.el.querySelectorAll(".wrap > #message");for(let e=a.length-1;-1<e;--e)a[e].id="wp-message";if("function"==typeof _.QTags&&(_.quicktags({id:t}),_.QTags._buttonsInit()),"undefined"!=typeof tinyMCE){tinymce.editors[t]!==I&&tinyMCE.execCommand("mceRemoveEditor",!0,t);const i=tinyMCEPreInit.mceInit.tb_lb_hidden_editor,d=(i.target=ThemifyConstructor.getEl(t.replace("#","")),new tinyMCE.Editor(t,i,tinyMCE.EditorManager));c=!!e.classList.contains("wp-editor-area")&&null!==e.closest("#instance_widget"),d.render(),d.on("change",l),c||d.on("keyup",l)}e.tfOn("change keyup",l,{passive:!0})},layout(e,i){if("visual"===O.mode){const s=this;e.tfOn("change",function(e){let a=e.detail.val.toString();if(0===a.indexOf("grid-")?a=a.replace("grid-","grid"):isNaN(a)||(a="grid"+a),i.classSelector!==I&&"auto_tiles"!==a){let e=i.id,t=""!==i.classSelector?O.liveStylingInstance.el.querySelector(i.classSelector):O.liveStylingInstance.el.tfClass("module")[0],l=ThemifyConstructor.settings[e];l&&(0===(l=l.toString()).indexOf("grid-")?l=l.replace("grid-","grid"):isNaN(l)||(l="grid"+l)),ThemifyConstructor.settings[e]=a,t?(t=t.classList,l&&("grid1"===l&&(l="list-post"),t.remove(l)),a&&("grid1"===a&&(a="list-post"),t.add(a)),O.Utils.runJs(O.liveStylingInstance.el,"module")):s.preview(this,a,i)}else s.preview(this,a,i)},{passive:!0})}},icon(e,a){const i=this;e.tfOn("change",function(e){const t=e.target.value,l=this.closest(".tb_field").tfClass("themify_fa_toggle")[0];l!==I&&(l.firstChild&&l.firstChild.remove(),t)&&l.appendChild(O.Helper.getIcon(t)),i.preview(e.target,t,a)},{passive:!0})},checkbox(e,t){if("visual"===O.mode){const i=this;e.tfOn("change",function(){const l=[],a=this.closest(".tb_checkbox_wrap").tfClass("tb_checkbox");for(let e=0,t=a.length;e<t;++e)a[e].checked&&l.push(a[e].value);i.preview(this,l.join("|"),t)},{passive:!0})}},color(e,t){if("visual"===O.mode){const l=this;e.tfOn("themify_builder_color_picker_change",function(e){l.preview(this,e.detail.val,t)},{passive:!0})}},widget_select(e,t){this.preview(e,O.Forms.themifySerializeObject(e),t)},queryPosts(e,t){if("visual"===O.mode){const l=this;e.tfOn("queryPosts",function(){t.id=this.id,ThemifyConstructor.settings=O.Helper.clear(O.Forms.serialize("tb_options_setting")),l.preview(this,ThemifyConstructor.settings[t.id],t)},{passive:!0})}}},initControl(a,i){if(null!==O.activeModel){if("setting"===this.clicked&&"custom_css"!==i.type){if(!1!==i.control&&"module"===this.component){const t=i.control||{};let e=i.type;!0===t.repeat?t.id=a.dataset.inputId:!0===this.is_repeat?(t.repeat=!0,t.id=a.dataset.inputId):t.id=i.id,t.control_type===I?e!==I&&"text"!==e&&"number"!==e&&"taxonomy"!==e&&"url"!==e&&"autocomplete"!==e&&"range"!==e&&"radio"!==e&&"icon_radio"!==e&&"select"!==e&&"gallery"!==e&&"textarea"!==e&&"address"!==e&&"image"!==e&&"file"!==e&&"lottie"!==e&&"date"!==e&&"audio"!==e&&"video"!==e&&"widgetized_select"!==e&&"layoutPart"!==e&&"selectSearch"!==e&&"hidden"!==e&&"toggle_switch"!==e&&"slider_range"!==e||(t.event!==I||"text"!==e&&"textarea"!==e||(t.event="keyup"),e="change"):e=t.control_type,this.control.init(a,e,t)}}else"visual"===O.mode&&"styling"===this.clicked&&O.liveStylingInstance.bindEvents(a,i);if(i.binding!==I){const s=!0===this.is_repeat,l=(e,t)=>{const l=s?a.closest(".tb_sort_field_dropdown,.tb_toggleable_fields_options,.tb_repeatable_field_content"):I;this.binding(e,i,t,l)};"layout"===i.type||"frame"===i.type?a.tfOn(L.click,function(e){const t=e.target.closest(".tfl-icon");null!==t&&l(this,t.id)},{passive:!0}):a.tfOn("change",function(){l(this,this.value)},{passive:!0}),this.bindings.push({el:a,data:i,repeat:s})}}return a},callbacks(){let e;if(null!==this.afterRun&&0<(e=this.afterRun.length)){for(let e=0;e<this.afterRun.length;++e)this.afterRun[e].call();this.afterRun=[]}if(null!==this.radioChange&&0<(e=this.radioChange.length)){for(let e=0;e<this.radioChange.length;++e)this.radioChange[e].call();this.radioChange=[]}if(null!==this.bindings&&0<(e=this.bindings.length)){for(let a=e-1;-1<a;--a)if(this.bindings[a].data!==I){let e=this.bindings[a].el,t=!0===this.bindings[a].repeat?e.closest(".tb_sort_field_dropdown,.tb_toggleable_fields_options,.tb_repeatable_field_content"):I,l="layout"===this.bindings[a].data.type||"frame"===this.bindings[a].data.type?e.tfClass("selected")[0].id:e.value;this.binding(e,this.bindings[a].data,l,t)}this.bindings=[]}},setUpEditors(){for(let e=this.editors.length-1;-1<e;--e)this.initControl(this.editors[e].el,this.editors[e].data);this.editors=[]},switchTabs(){const e="#"+this.dataset.id,t=this.parentNode,l=t.parentNode,a=l.parentNode;let i=a.querySelector(e);if((i=i&&i.parentNode===a?i:this.getRootNode().querySelector(e))&&!t.classList.contains("current")){const s=l.children,n=i.parentNode.children;for(let e=s.length-1;-1<e;--e)s[e].classList.remove("current");t.classList.add("current");for(let e=n.length-1;-1<e;--e)n[e].classList.contains("tb_tab")&&(n[e].style.display="none");i.style.display="block";const o=e.replace("#tb_options_","");L.trigger("tb_builder_tabsactive",[o,i]),L.triggerEvent(i,"tb_builder_tabsactive",{id:o})}},run(e){this.styles={},this.settings={},this.editors=[],this.afterRun=[],this.radioChange=[],this.bindings=[],this.stylesData={},this.is_repeat=null,this.is_sort=null,this.component=null,this.is_new=null,this.is_ajax=null,this.type=null,this.data=e;let o,r=O.activeModel;null!==r?(this.type=r.get("mod_name"),this.component=r.type,"module"===this.component&&(this.is_ajax="ajax"===r.getPreviewType(),this.is_new=!!r.is_new),this.values=O.Helper.cloneObject(r.get("mod_settings")),o=r.tab||"setting",delete r.tab,this.data.visibility===I&&(this.data.visibility=!0),this.data.animation===I&&(this.data.animation=!0)):(this.values={},this.component=null);const c=T.createDocumentFragment(),d=T.createDocumentFragment(),l=this,p={styling:"ti-brush",animation:"ti-layers-alt",visibility:"ti-eye"},_=(e,t)=>{const l=T.createDocumentFragment();if("visibility"===e||"animation"===e)t=this.getOptions(e);else if("styling"===e&&O.LightBox.el.tfClass("tb_styling_tab_header")[0]===I){const a=T.createElement("div"),i=O.GS.globalStylesHTML();a.className="tb_styling_tab_header",a.appendChild(this.getSwitcher()),i&&a.appendChild(i),l.appendChild(a)}if(l.appendChild(this.create(t)),"styling"===e){const s=T.createElement("a"),n=T.createElement("i");s.href="#",s.className="reset-styling",n.className="tf_close",s.append(n,T.createTextNode(this.label.reset_style)),s.tfOn(L.click,e=>{e.stopPropagation(),e.preventDefault(),this.resetStyling(O.activeModel)}),l.appendChild(s),"visual"===O.mode&&r&&setTimeout(()=>{O.liveStylingInstance.module_rules=this.styles},600)}return t=null,l},m=function(e){const t=e.detail.id.replace("#tb_options_","");l.clicked=t,this.dataset.done===I&&(this.dataset.done=!0,this.appendChild(_(t,l.data[t].options)),l.callbacks(),"setting"===t&&l.setUpEditors(),L.trigger("tb_editing_"+l.type+"_"+t,O.LightBox.el))};this.clicked=null;for(let n in this.data)if(!1!==this.data[n]){let e=T.createElement("li"),t=T.createElement("a"),l=T.createElement("span"),a=T.createElement("div"),i=this.data[n].name!==I?this.data[n].name:this.label[n],s="tb_options_"+n;t.href="javascript:;",t.dataset.id=s,t.textContent=i,"setting"!==n&&(t.className="tb_tooltip",l.textContent=i,p[n]&&t.appendChild(O.Helper.getIcon(p[n])),t.appendChild(l)),a.id=s,a.className="tb_tab tb_options_tab_wrapper tf_rel tf_box tf_w tf_hide",o!==n&&o!==I||(e.className="current",this.clicked=n,this.data[n].html!==I?a.innerHTML=this.data[n].html:a.appendChild(_(n,this.data[n].options)),a.style.display="block",a.dataset.done=!0),a.tfOn("tb_builder_tabsactive",m,{passive:!0}),t.tfOn(L.click,this.switchTabs,{passive:!0}),d.appendChild(a),e.appendChild(t),c.appendChild(e)}const t=O.LightBox.el.tfClass("tb_options_tab")[0],a=(e,t)=>{this.updateStyles(e,t)};if(t){while(null!==t.firstChild)t.lastChild.remove();t.appendChild(c)}return L.on("themify_builder_lightbox_close",()=>{if(this.radioChange=this.afterRun=this.bindings=this.editors=[],this.stylesData=this.settings=this.styles={},this.is_ajax=this.is_repeat=this.is_sort=this.clicked=null,"undefined"!=typeof tinyMCE)for(let e=tinymce.editors.length-1;-1<e;--e)"content"!==tinymce.editors[e].id&&tinyMCE.execCommand("mceRemoveEditor",!0,tinymce.editors[e].id);L.off("themify_builder_change_mode",a),r=this.type=this.component=this.is_new=this.data=null,this.values={},this.tabs.click=0,this.tabs.styleClicked=!1},!0).on("themify_builder_change_mode",a),setTimeout(()=>{"setting"===this.clicked&&this.setUpEditors(),this.callbacks(),L.trigger("tb_editing_"+this.type+"_"+this.clicked,O.LightBox.el),L.trigger("tb_editing_"+this.component,O.LightBox.el)},5),d},getStyleVal(l,a,i){let s=I;if(l!==I&&""!==l&&null!==O.activeModel){if(i===I&&(i=this.values),"desktop"===(a=a===I?O.activeBreakPoint:a)||"styling"!==this.clicked)null!==i&&""!==i[l]&&(s=i[l]);else if(i["breakpoint_"+a]!==I&&i["breakpoint_"+a][l]!==I&&""!==i["breakpoint_"+a][l])s=i["breakpoint_"+a][l];else{const n=this.breakpointsReverse;for(let e=n.indexOf(a)+1,t=n.length;e<t;++e)if("desktop"!==n[e]){if(i["breakpoint_"+n[e]]!==I&&i["breakpoint_"+n[e]][l]!==I&&""!==i["breakpoint_"+n[e]][l]){s=i["breakpoint_"+n[e]][l];break}}else if(i[l]!==I&&""!==i[l]){const o=this.stylesData&&I!==this.stylesData[l]?this.stylesData[l].binding:I;s=I!==o&&I!==o[i[l]]&&I!==o[i[l]].responsive&&I!==o[i[l]].responsive.disabled&&o[i[l]].responsive.disabled.includes(l)?I:i[l];break}}s!==I&&""!==s||!l.endsWith("_unit")||l.includes("frame_")?s!==I&&""!==s&&"column"===O.activeModel.type&&s.toString().includes(",")&&(0===l.indexOf("padding")||l.includes("margin"))&&(s=(s=(s=s.trim().split(","))[1]!==I&&""!==s[1]?s[1]:s[0]).trim()):s="px"}return s},updateStyles(e,t){this.setStylingValues(e);const l=this.clicked;this.clicked="styling";for(let e in this.stylesData){let s=this.stylesData[e],n=s.type;if(n&&"video"!==n&&"gallery"!==n&&"autocomplete"!==n&&"custom_css"!==n&&"builder"!==n&&!1!==s.is_responsive){"icon_radio"===n?n="radio":"icon_checkbox"===n?n="checkbox":"textarea"===n||"icon"===n||"hidden"===n||"number"===n?n="text":"image"===n?n="mediaFile":"padding"===n||"border_radius"===n?n="margin":"frame"===n&&(n="layout");let i=this.getStyleVal(e);if(this[n].update(e,i,this),s.binding!==I){let l=this.getEl(e),a=[];for(let e=0,t=(a="layout"===n?l.tfClass("tfl-icon"):"radio"===n||"checkbox"===n?l.tfTag("input"):[l]).length;e<t;++e)this.binding(a[e],s,i)}}}const a=_.document.querySelectorAll("#tb_options_styling option.tb_responsive_disable");for(let e=a.length-1;0<=e;e--)a[e].disabled="desktop"!==t;this.clicked=l},setStylingValues(t){const l=O.Forms.serialize("tb_options_styling",!0),a="desktop"===t;!1==a&&this.values["breakpoint_"+t]===I&&(this.values["breakpoint_"+t]={});for(let e in l)!0==a?this.values[e]=l[e]:this.values["breakpoint_"+t][e]=l[e]},resetStyling(t){const l=t.get("mod_name");if(!1===O.isGSPage&&null===O.GS.activeGS)if(t===O.activeModel){const e=this.getEl(O.GS.key);if(e&&e.value){const s=e.value.split(" "),n=e.parentNode.querySelector("tb-gs");for(let e=s.length-1;-1<e;--e)n.delete(s[e])}}else O.GS.setGsStyle([],!0,t);if("visual"===O.mode){let e=O.liveStylingInstance;e&&e.el===t.el||(e=O.createStyleInstance()).init(!0,!1,t);const o=e.prefix,r=this.breakpointsReverse;for(let t=r.length-1;-1<t;--t){let e=ThemifyStyles.getSheet(r[t],null!==O.GS.activeGS),i=e.cssRules||e.rules;if(0<i.length)for(let a=i.length-1;-1<a;--a)if(i[a].selectorText.includes(o)){let l=i[a].cssText.split("{")[1].split(";");for(let t=l.length-2;-1<t;--t){let e=l[t].trim().split(": ")[0].trim();i[a].style[e]!==I&&(i[a].style[e]="")}}}if("module"!==t.type){e.removeBgSlider(),e.removeBgVideo(),e.removeFrames(),e.bindBackgroundMode("repeat","background_repeat"),e.bindBackgroundMode("repeat","b_r_h"),e.el.removeAttribute("data-tb_slider_videos");const c=e.el.querySelector(":scope>.tb_slider_videos"),d=e.getComponentBgOverlay(l);c&&c.remove(),d&&d.remove()}e=null}const a=ThemifyStyles.getStyleOptions(l),i=t===O.activeModel?this.values:t.get("styling");for(let l in i){let e=l.includes("_color")?"color":!!l.includes("_style")&&"style",t=null;0===l.indexOf("breakpoint_")||l===O.GS.key||a[l]!==I||l.includes("_apply_all")?t=!0:l.includes("_unit")?a[e=l.replace(/_unit$/gi,"","")]!==I&&(t=!0):l.includes("_w")?a[e=l.replace(/_w$/gi,"","")]!==I&&"font_select"===a[e].type&&(t=!0):!1!==e&&a[e=l.replace("_"+e,"_width")]!==I&&"border"===a[e].type&&(t=!0),!0===t&&delete i[l]}if(t===O.activeModel){const p="styling",_=this.getEl("tb_options_"+p);if(_){for(let e=_.children,t=e.length-1;-1<t;--t)e[t].classList.contains("tb_styling_tab_header")||e[t].remove();_.removeAttribute("data-done"),L.triggerEvent(_,"tb_builder_tabsactive",{id:p})}}},create(n){const o=T.createDocumentFragment();if(n===I||0===n.length){const e=T.createElement("div"),t=T.createElement("p");t.textContent=themifyBuilder.i18n.no_op_module,e.appendChild(t),o.appendChild(e)}else{if("tabs"===n.type)o.appendChild(this.tabs.render(n,this));else for(let s in n)if(!0!==n[s].hide&&n[s].type!==I&&("visibility"!==this.clicked||"row"!==this.component||"sticky_visibility"!==n[s].id)){let a=n[s].type,i=this[a].render(n[s],this);if("separator"!==a&&"expand"!==a&&"group"!==a){let e=n[s].id||n[s].topId;if("tabs"!==a&&"multi"!==a&&"margin_opposity"!==a&&e&&("styling"===this.clicked?("visual"===O.mode&&n[s].prop!==I&&(this.styles[e]=O.Helper.cloneObject(n[s])),this.stylesData[e]=O.Helper.cloneObject(n[s])):"setting"===this.clicked&&null!==this.values&&this.values[e]!==I&&!0!==this.is_repeat&&(this.settings[e]=this.values[n[s].id],n[s].units!==I)&&this.values[e+"_unit"]!==I&&(this.settings[e+"_unit"]=this.values[e+"_unit"])),"hook_content"!==a&&"slider"!==a&&"builder"!==a&&"tooltip"!==a&&"custom_css_id"!==a){let t=T.createElement("div"),l=(t.className="tb_field",n[s].dc===I||n[s].dc||(t.className+=" tb_disable_dc"),t.dataset.type=a,e!==I&&(t.className+=" "+e),n[s].wrap_class!==I&&(t.className+=" "+n[s].wrap_class),"toggle_switch"===a?t.className+=" switch-wrapper":"slider"===a?t.className+=" tb_slider_options":"message"===a&&n[s].hideIf!==I&&new Function("return "+n[s].hideIf)?t.className+=" tb_hide_option":n[s].required!==I&&"setting"===this.clicked&&(t.dataset.validation=n[s].required.rule||"not_empty",t.dataset.errorMsg=n[s].required.message!==I?n[s].required.message:themifyBuilder.i18n.not_empty,t.className+=" tb_must_validate"),"styling"===this.clicked&&!1===n[s].is_responsive&&(t.className+=" tb_responsive_disable"),this.getTitle(n[s]));if(!1!==l){l=l.trim();let e=T.createElement("div");if(e.className="tb_label",""===l?e.className+=" tb_empty_label":e.textContent=l,n[s].help!==I&&""!==n[s].label&&(e.classList.add("contains-help"),e.appendChild(this.help(n[s].help))),t.appendChild(e),"multi"!==a){let e=T.createElement("div");e.className="tb_input",e.appendChild(i),t.appendChild(e)}else t.appendChild(i)}else t.appendChild(i);o.appendChild(t)}else o.appendChild(i)}else o.appendChild(i)}n=null}return o},tabs:{click:0,styleClicked:!1,render(n,o){const r=n.options,c=T.createDocumentFragment(),d=T.createElement("ul"),e="styling"===o.clicked&&!1===this.styleClicked&&"module"===o.component?T.createElement("div"):null,t=T.createElement("div"),p=n.isRadio!==I;let _=null,m=null;t.className="tb_tabs tf_rel tf_w",d.className="tb_tab_nav tf_scrollbar",n.class&&(t.className+=" "+n.class),"styling"===o.clicked&&(this.styleClicked=!0),++this.click,!0==p&&(o.values[n.id]!==I&&""!==o.values[n.id]&&(m=!0,_=o.values[n.id]),d.className+=" tb_radio_wrap",!0===o.is_repeat?(d.className+=!0===o.is_sort?" tb_lb_sort_child":" tb_lb_option_child",d.dataset.inputId=n.id):(d.className+=" tb_lb_option",d.id=n.id));for(let s in r){let e=T.createElement("li"),t=!0==p?T.createElement("label"):T.createElement("a"),l=T.createElement("div"),a=r[s].href!==I?r[s].href:"tb_"+this.click+"_"+s,i=r[s].options;if(l.id=a,l.className="tb_tab tf_hide",""!==r[s].label&&(t.textContent=r[s].label!==I?r[s].label:o.label[s]),r[s].icon!==I&&t.appendChild(O.Helper.getIcon(r[s].icon)),r[s].title!==I&&(t.title=r[s].title),r[s].class!==I&&""!==r[s].class&&(t.className=r[s].class),t.dataset.id=a,!0==p){let e=T.createElement("input");e.type="radio",e.className="tb_radio_tab_input",e.name=n.id,_!==s&&_!=="tb_"+s||(e.checked=!0),e.value=s,t.className="tb_radio_tab_label",t.appendChild(e),t.tfOn("change",o.switchTabs,{passive:!0})}else t.href="javascript:;",t.tfOn(L.click,o.switchTabs,{passive:!0});null===m||_===s||_==="tb_"+s?(m=!0,e.className="current",l.appendChild(o.create(i)),i=null,l.style.display="block"):l.tfOn("tb_builder_tabsactive",function(){this.appendChild(o.create(i)),"setting"===o.clicked&&o.setUpEditors(),o.callbacks(),i=null},{once:!0,passive:!0}),e.appendChild(t),d.appendChild(e),c.appendChild(l)}return null!==e?(e.className="tb_styling_tab_nav",e.appendChild(d),t.appendChild(e)):t.appendChild(d),t.appendChild(c),setTimeout(o.callbacks.bind(o),5),t}},group:{render(e,t){const l=T.createElement("div"),a=T.createElement("div"),i=T.createDocumentFragment(),s=t.create(e.options);if(e.label!==I&&(a.textContent=e.label),e.wrap_class!==I&&(l.className=e.wrap_class),l.classList.add("tb_field_group"),e.id&&l.classList.add(e.id),"accordion"===e.display){l.classList.add("tb_field_group_acc");const n=T.createElement("div"),o=O.Helper.getIcon("ti-angle-up");a.className="tb_style_toggle tb_closed",a.appendChild(o),n.className="tf_hide tb_field_group_content",n.appendChild(s),a.tfOn(L.click,()=>{$(n).slideToggle(),a.classList.toggle("tb_closed")}),l.append(a,n)}else e.label!==I&&(a.className="tb_label",e.help!==I&&""!==e.label&&(a.className+=NaN,a.appendChild(this.help(e.help))),i.appendChild(a)),l.appendChild(s);return i.appendChild(l),i}},builder:{render(a,i){i.is_repeat=!0;const e=T.createDocumentFragment(),l=T.createElement("div"),s=T.createElement("a"),n=this;if(l.className="tb_row_js_wrapper tf_rel tb_lb_option",a.wrap_class!==I&&(l.className+=" "+a.wrap_class),l.id=a.id,s.className="add_new tf_plus_icon tf_icon_btn tf_rel",s.href="#",s.textContent=a.new_row||i.label.new_row,i.values[a.id]!==I){const o=i.values[a.id].slice(),t=O.Helper.cloneObject(i.values);for(let e=0,t=o.length;e<t;++e)i.values=o[e]||{},l.appendChild(this.builderFields(a,i));i.values=t}else l.appendChild(this.builderFields(a,i));return l.appendChild(s),e.appendChild(l),setTimeout(()=>{n.sortable(l,i),s.tfOn(L.click,function(e){e.preventDefault(),e.stopPropagation(),i.is_repeat=!0;const t=n.builderFields(a,i),l=this.previousElementSibling.parentNode;l.insertBefore(t,s),setTimeout(()=>{"setting"===i.clicked&&i.setUpEditors(),i.callbacks(),L.trigger("tb_repeatable_add_new",t)},5),i.control.preview(l,null,{repeat:!0}),i.is_repeat=null})},2e3),i.is_repeat=null,e},builderFields(s,n){const e=T.createElement("div"),t=T.createElement("div"),l=T.createElement("div"),a=T.createElement("div"),i=T.createElement("ul"),o=T.createElement("li"),r=T.createElement("li"),c=T.createElement("div"),d=T.createElement("div"),p=T.createElement("div"),_=T.createElement("div"),m=this;return e.className="tb_repeatable_field tf_clearfix",t.className="tb_repeatable_field_top tf_rel tf_box tf_textl",l.className="row_menu",a.tabIndex="-1",a.className="menu_icon",i.className="tb_down",o.className="tb_duplicate_row",r.className="tb_delete_row tf_close",o.textContent=n.label.duplicate,r.textContent=n.label.delete,c.className="tb_arrow tb_toggle_row",d.className="tb_repeatable_field_content",p.className="tb_arrow tb_up_row",_.className="tb_arrow tb_down_row",p.title=n.label.up,_.title=n.label.down,d.appendChild(n.create(s.options)),i.append(o,r),l.append(a,i),t.append(l,p,_,c),e.append(t,d),t.tfOn(L.click,function(l){const e=l.target.classList,t=this.parentNode;if(e.contains("tb_delete_row"))O.LiteLightBox.confirm({msg:themifyBuilder.i18n.repeatRowDeleteConfirm}).then(e=>{if("yes"===e){const t=l.target.closest(".tb_row_js_wrapper");m.delete(l.target),n.control.preview(t,null,{repeat:!0}),L.triggerEvent(t,"delete")}});else if(e.contains("tb_duplicate_row")){n.is_repeat=!0;const a=O.Helper.cloneObject(n.values),i=(n.values=O.Forms.serialize(t,!0,!0),m.builderFields(s,n));t.parentNode.insertBefore(i,t.nextElementSibling),n.values=a,setTimeout(()=>{"setting"===n.clicked&&n.setUpEditors(),n.callbacks(),L.triggerEvent(t.parentNode,"duplicate"),L.trigger("tb_repeatable_duplicate",i)},5),n.control.preview(t,null,{repeat:!0}),n.is_repeat=null}else e.contains("tb_toggle_row")?m.toggle(l.target):e.contains("tb_arrow")&&m.move(l.target,n)},{passive:!0}),e},sortable(e,C){e.tfOn("pointerdown",function(e){if(1===e.which&&e.target.classList.contains("tb_repeatable_field_top")){e.stopImmediatePropagation();let t,l,n,o,a,r=0,c,d,i,s={},p=this.ownerDocument,_=e.target.closest(".tb_repeatable_field"),m,u,h,b=!1,g;const f=e=>{if(i)if(e>=u||e<=m){if(!1===b){b=!0;const t=parseInt(u/10);i.scrollTop+=e<=m?-1*t:t,l&&clearTimeout(l),l=setTimeout(()=>{requestAnimationFrame(()=>{b&&(b=!1,f(e))})},2*t)}}else l&&clearTimeout(l),b=!1},y=s=>{s.stopImmediatePropagation(),t=requestAnimationFrame(()=>{if(p){const e=s.clientX,t=s.clientY,l="mousemove"===s.type?s.target:p.elementFromPoint(e,t),a=t-d-g.getBoundingClientRect().top;if(0<a&&a<h){if(c.style.transform="translateY("+a+"px)",f(t),!(t>=u||t<=m)){if(l&&l!==_&&l.classList.contains("tb_repeatable_field")){const i=t>r?"bottom":"top";o===i&&n===l||("bottom"==i?l.after(_):l.before(_)),n=l,o=i}r=t}}else f(t)}})},v=()=>{if(p.body.classList.add("tb_start_animate","tb_move_drag"),(g=_.parentNode).classList.add("tb_sort_start"),"undefined"!=typeof tinyMCE){const l=g.tfClass("tb_lb_wp_editor");for(let t=l.length-1;-1<t;--t){let e=l[t].id;s[e]=tinymce.get(e).getContent(),tinyMCE.execCommand("mceRemoveEditor",!1,e)}}_.classList.contains("collapsed")||(_.tfClass("tb_repeatable_field_content")[0].style.display="none",_.classList.add("collapsed"),a=!0),(c=_.cloneNode(!0)).tfClass("tb_repeatable_field_content")[0].remove(),i=_.closest(".tf_scrollbar"),c.className+=" tb_sort_handler",_.classList.add("tb_current_sort"),_.after(c),d=c.getBoundingClientRect().height/2,h=g.offsetHeight;const e=i.getBoundingClientRect();m=e.top,u=e.bottom-40},w=function(e){if(this.tfOff("pointermove",v,{passive:!0,once:!0}).tfOff("pointermove",y,{passive:!0}).tfOff("lostpointercapture pointerup",w,{passive:!0,once:!0}),g){if(e.stopImmediatePropagation(),t&&cancelAnimationFrame(t),l&&clearTimeout(l),c&&c.remove(),"undefined"!=typeof tinyMCE)for(let e in s)tinyMCE.execCommand("mceAddEditor",!1,e),tinymce.get(e).setContent(s[e]);_.classList.remove("tb_current_sort"),a&&(_.classList.remove("collapsed"),_.tfClass("tb_repeatable_field_content")[0].style.display=""),requestAnimationFrame(()=>{C.control.preview(g,null,{repeat:!0}),L.triggerEvent(g,"sortable"),g.classList.remove("tb_sort_start"),g=null})}p.body.classList.remove("tb_start_animate","tb_move_drag"),n=c=a=o=r=s=i=p=h=d=b=m=u=_=t=l=null};this.tfOn("lostpointercapture pointerup",w,{passive:!0,once:!0}).tfOn("pointermove",v,{passive:!0,once:!0}).tfOn("pointermove",y,{passive:!0}).setPointerCapture(e.pointerId)}},{passive:!0})},move(e,t){const l=e.closest(".tb_repeatable_field"),a=e.classList.contains("tb_up_row")?"up":"down",i="down"==a?l.nextElementSibling:l.previousElementSibling,s=l.parentNode;"down"==a?i.after(l):i.before(l),requestAnimationFrame(()=>{s.closest(".tf_scrollbar").scroll({top:l.offsetTop+s.offsetTop+10}),t.control.preview(s,null,{repeat:!0}),L.triggerEvent(s,"sortable")})},toggle(e){$(e).closest(".tb_repeatable_field").toggleClass("collapsed").find(".tb_repeatable_field_content").slideToggle()},delete(e){const t=e.closest(".tb_repeatable_field");L.trigger("tb_repeatable_delete",t),t.remove()}},accordion:{expand(e,i,s){e.tfOn(L.click,function(e){let t=this.tfClass("tb_accordion_fields_options")[0];if(t===I){(t=T.createElement("div")).style.display="none",t.className="tb_toggleable_fields_options tb_accordion_fields_options tf_w",s.is_repeat=!0;let e=null;const l=this.parentNode.closest(".tb_accordion_fields").id,a=this.dataset.id;s.values[l]!==I&&s.values[l][a]!==I&&s.values[l][a].val!==I&&(e=O.Helper.cloneObject(s.values),s.values=s.values[l][a].val),t.appendChild(s.create(i.options)),this.appendChild(t),"setting"===s.clicked&&s.setUpEditors(),s.callbacks(),null!==e&&(s.values=e),s.is_repeat=e=null}else if(t.contains(e.target))return;e.stopPropagation(),e.preventDefault(),this.classList.contains("tb_closed")?$(t).slideDown(function(){this.parentNode.classList.remove("tb_closed")}):$(t).slideUp(function(){this.parentNode.classList.add("tb_closed")})})},resetMotion(e,t){if(t.values.motion_effects!==I)for(let e in t.values.motion_effects)t.values.motion_effects[e].val={[e+"_dir"]:""};const l=e.parentNode.querySelector("#motion_effects"),a=l.tfTag("select"),i=l.tfClass("tb_position_box_wrapper"),s=l.tfClass("tb_slider_wrapper"),n=l.tfClass("tb_range");for(let e=a.length-1;-1<e;--e)a[e].selectedIndex=0,L.triggerEvent(a[e],"change");for(let e=n.length-1;-1<e;--e)n[e].value=n[e].min!==I?n[e].min:"";for(let e=i.length-1;-1<e;--e)i[e].tfTag("input")[0].value="50,50",i[e].tfClass("tb_position_box_handle")[0].removeAttribute("style");for(let l=s.length-1;-1<l;--l){let e=s[l].querySelector('input[type="hidden"]'),t=s[l].querySelectorAll('input[type="range"]');t[1]?(t[0].value=t[0].max,t[1].value=t[0].min,L.triggerEvent(t[1],"input")):t[0].value=t[0].min,L.triggerEvent(t[0],"input"),requestAnimationFrame(()=>{e.value=""})}},render(s,n){const o=T.createElement("ul"),e=T.createDocumentFragment(),t=T.createElement("a"),l=(o.id=s.id,o.className="tb_toggleable_fields tb_accordion_fields tb_lb_option","motion_effects"===s.id&&n.values&&n.values.hasOwnProperty("custom_parallax_scroll_speed")&&(n.values.hasOwnProperty("motion_effects")||(n.values.motion_effects={v:{val:{v_speed:n.values.custom_parallax_scroll_speed,v_dir:""}},h:{val:{}},t:{val:{t_speed:""}},r:{val:{}},s:{val:{}}},delete n.values.custom_parallax_scroll_speed),n.values.hasOwnProperty("custom_parallax_scroll_reverse")?(n.values.motion_effects.v.val.v_dir="down",delete n.values.custom_parallax_scroll_reverse):n.values.motion_effects.v.val.v_dir="up",n.values.hasOwnProperty("custom_parallax_scroll_fade"))&&(n.values.motion_effects.t.val.t_speed=n.values.custom_parallax_scroll_speed,delete n.values.custom_parallax_scroll_fade),n.values[s.id]),a=(e,t)=>{const l=T.createElement("li"),a=T.createElement("input"),i=T.createElement("div");i.textContent=s.options[e].label,i.className="tb_toggleable_fields_title tb_accordion_fields_title tf_plus_icon tf_rel",a.type="hidden",a.value="",l.className="tb_closed",l.dataset.id=e,t.val!==I&&(a.value=JSON.stringify(t.val)),l.append(a,i),this.expand(l,s.options[e],n),o.appendChild(l)};if(l!==I)for(let e in l)s.options[e]!==I&&a(e,l[e]);for(let e in s.options)l!==I&&l[e]!==I||a(e,s.options[e]);return e.appendChild(o),"motion_effects"===s.id&&(t.href="#",t.className="tb_motion_reset_link",t.textContent=n.label.reset_effect,t.tfOn(L.click,e=>{e.preventDefault(),e.stopPropagation(),this.resetMotion(e.currentTarget,n)}),e.appendChild(t)),e}},toggleable_fields:{sort(e,x){e.childElementCount<2||e.tfOn("pointerdown",function(e){if(1===e.which&&(e.target.parentNode===this||e.target.parentNode.parentNode===this)){e.stopImmediatePropagation();let l,n,o,a,r=0,c,d,i,s={},p=this.ownerDocument,_=e.target.closest(".tb_toggleable_item"),m,u,h,b=!1,g,f=_.parentNode;const y=e=>{if(i)if(e>=u||e<=m){if(!1===b){b=!0;const t=parseInt(u/10);i.scrollTop+=e<=m?-1*t:t,l&&clearTimeout(l),l=setTimeout(()=>{requestAnimationFrame(()=>{b&&(b=!1,y(e))})},2*t)}}else l&&clearTimeout(l),b=!1},v=e=>{if(e.stopImmediatePropagation(),p){const t=e.clientX,l=e.clientY,a=p.elementFromPoint(t,l),i=l-d-f.getBoundingClientRect().top;if(0<i&&i<h){if(c.style.transform="translateY("+i+"px)",y(l),!(l>=u||l<=m)){if(a&&a!==_&&a.classList.contains("tb_toggleable_item")){const s=l>r?"bottom":"top";o===s&&n===a||("bottom"==s?a.after(g):a.before(g)),n=a,o=s}r=l}}else y(l)}},w=function(){if(p.body.classList.add("tb_start_animate","tb_move_drag"),f.classList.add("tb_sort_start"),"undefined"!=typeof tinyMCE){const l=f.tfClass("tb_lb_wp_editor");for(let t=l.length-1;-1<t;--t){let e=l[t].id;s[e]=tinymce.get(e).getContent(),tinyMCE.execCommand("mceRemoveEditor",!1,e)}}if(!this.classList.contains("tb_closed")){const e=this.tfClass("tb_toggleable_fields_options")[0];e&&(e.style.display="none"),this.classList.add("tb_closed"),a=!0}const e=(c=this.cloneNode(!0)).tfClass("tb_toggleable_fields_options")[0],t=(e&&e.remove(),g=c.cloneNode(!0),i=this.closest(".tf_scrollbar"),c.className+=" tb_sort_handler",g.classList.add("tb_current_sort"),this.style.display="none",this.after(g,c),d=c.getBoundingClientRect().height/2,h=f.offsetHeight,i.getBoundingClientRect());m=t.top,u=t.bottom-40},C=function(e){if(this.tfOff("pointermove",w,{passive:!0,once:!0}).tfOff("pointermove",v,{passive:!0}).tfOff("lostpointercapture pointerup",C,{passive:!0,once:!0}),g){if(e.stopImmediatePropagation(),l&&clearTimeout(l),c&&c.remove(),g.replaceWith(this),this.style.display="","undefined"!=typeof tinyMCE)for(let e in s)tinyMCE.execCommand("mceAddEditor",!1,e),tinymce.get(e).setContent(s[e]);if(this.classList.remove("tb_current_sort"),a){const t=this.tfClass("tb_toggleable_fields_options")[0];t&&(t.style.display=""),this.classList.remove("tb_closed")}x.control.preview(f,null,{repeat:!0}),L.triggerEvent(f,"sortable"),f.classList.remove("tb_sort_start"),f=null}p.body.classList.remove("tb_start_animate","tb_move_drag"),n=c=a=o=r=s=i=p=h=g=b=d=m=u=_=l=null};_.tfOn("lostpointercapture pointerup",C,{passive:!0,once:!0}).tfOn("pointermove",w,{passive:!0,once:!0}).tfOn("pointermove",v,{passive:!0}).setPointerCapture(e.pointerId)}},{passive:!0})},expand(e,i,s){e.tfOn(L.click,function(e){if(this.classList.contains("tb_toggleable_field_disabled")||e.target.closest(".switch-wrapper")){if(!e.target.closest(".tb_toggleable_fields_options")){const t=this.tfClass("tb_toggleable_fields_options")[0];$(t).slideUp(function(){this.parentNode.classList.add("tb_closed")})}}else{let a=this.tfClass("tb_toggleable_fields_options")[0];if(a){if(a.contains(e.target))return}else{(a=T.createElement("div")).style.display="none",a.className="tb_toggleable_fields_options tf_box tf_w",this.appendChild(a),s.is_repeat=!0;let e=this.closest(".tb_toggleable_fields").id,t=null,l=this.dataset.id;s.values[e]!==I&&s.values[e][l]!==I&&s.values[e][l].val!==I&&(t=O.Helper.cloneObject(s.values),s.values=s.values[e][l].val),a.appendChild(s.create(i.options)),"setting"===s.clicked&&s.setUpEditors(),s.callbacks(),null!==t&&(s.values=t),s.is_repeat=null}e.stopPropagation(),e.preventDefault(),this.classList.contains("tb_closed")?$(a).slideDown(function(){this.parentNode.classList.remove("tb_closed")}):$(a).slideUp(function(){this.parentNode.classList.add("tb_closed")})}})},disable(e,t){const l=e.closest("li"),a=l.classList;e.checked?a.remove("tb_toggleable_field_disabled"):a.add("tb_toggleable_field_disabled","tb_closed"),t.control.preview(l.parentNode,null,{repeat:!0})},render(r,c){const d=this,p=T.createElement("ul"),e=(p.className="tb_toggleable_fields tf_w tf_rel",!0===c.is_repeat?(p.dataset.inputId=r.id,p.className+=" tb_lb_option_child"):(p.id=r.id,p.className+=" tb_lb_option"),c.is_repeat),t=c.values[r.id],l=(e,t)=>{const l=r.options[e],a={type:"toggle_switch",id:"",options:{on:{name:"1",value:l.toggle&&l.toggle.on?l.toggle.on:c.label.s},off:{name:"0",value:l.toggle&&l.toggle.off?l.toggle.off:c.label.hi}},default:"1"===t.on?"on":"off",control:!1},i=T.createElement("li"),s=T.createElement("input"),n=T.createElement("div"),o=c.create([a]);n.innerHTML+=l.label,n.className="tb_toggleable_fields_title tf_plus_icon tf_rel",s.type="hidden",s.value="",i.className="tb_toggleable_item tb_closed","off"===a.default&&(i.className+=" tb_toggleable_field_disabled"),l.class&&(i.className+=" "+l.class),i.dataset.id=e,t.val!==I&&(s.value=JSON.stringify(t.val)),o.querySelector(".toggle_switch").tfOn("change",function(e){e.stopPropagation(),d.disable(this,c)},{passive:!0}),i.append(s,n,o),d.expand(i,l,c),p.appendChild(i)};if(c.is_repeat=!0,t!==I)for(let e in t)r.options[e]!==I&&l(e,t[e]);for(let e in r.options)t!==I&&t[e]!==I||l(e,r.options[e]);return!1!==r.sort&&d.sort(p,c),c.is_repeat=e,p}},sortable_fields:{getGlobalOptions(e){return[{id:"icon",type:"icon",label:e.label.icon},{id:"before",type:"text",label:e.label.b_t},{id:"after",type:"text",label:e.label.a_t}]},getDefaults(e,t){const l={date:[{id:"display",type:"select",label:t.label.disp,options:{"":t.label.pd,m:t.label.md}},{id:"format",type:"select",label:t.label.d_f,default:"def",options:{"F j, Y":t.label.F_j_Y,"Y-m-d":t.label.Y_m_d,"m/d/Y":t.label.m_d_Y,"d/m/Y":t.label.d_m_Y,def:t.label.def,custom:t.label.cus},binding:{not_empty:{hide:"custom"},custom:{show:"custom"}}},{id:"custom",type:"text",control:{event:"change"},label:t.label.cus_f,help:t.label.cus_fd_h}],time:[{id:"format",type:"select",label:t.label.t_f,default:"def",options:{"g:i a":t.label.g_i_a,"g:i A":t.label.g_i_A,"H:i":t.label.H_i,def:t.label.def,custom:t.label.cus},binding:{not_empty:{hide:"custom"},custom:{show:"custom"}}},{id:"custom",type:"text",control:{event:"change"},label:t.label.cus_f,help:t.label.cus_ft_h}],author:[{id:"l",type:"toggle_switch",label:t.label.l,options:"simple"},{id:"a_p",type:"toggle_switch",label:t.label.a_p,binding:{checked:{show:"p_s"},not_checked:{hide:"p_s"}},options:"simple"},{id:"p_s",type:"range",label:t.label.p_s,class:"xsmall",units:{px:{max:96}},control:{event:"change"}}],comments:[{id:"l",type:"toggle_switch",label:t.label.l,options:"simple"},{id:"no",type:"text",control:{event:"change"},label:t.label.no_c},{id:"one",type:"text",control:{event:"change"},label:t.label.one_c},{id:"comments",type:"text",control:{event:"change"},label:t.label.comments}],terms:[{id:"post_type",type:"query_posts",tax_id:"taxonomy"},{id:"l",type:"toggle_switch",label:t.label.l,options:"simple"},{id:"sep",type:"text",control:{event:"change"},label:t.label.sep}],text:[{id:"t",type:"textarea",class:"fullwidth"}]};return l[e]},create(e,l,a,i,s,t){const n=T.createElement("li"),o=T.createElement("span"),r=l.options[a];if(n.textContent=r.label,n.dataset.type=a,n.className="tb_sort_fields_item",o.className="tb_sort_field_dropdown_pointer",!0===t){let t=!1;if(i)s!==I&&(t=this.find(s,i));else{s!==I&&(t=this.find(s,a,!0)),n.dataset.new=!0;const p=O.LightBox.el.tfClass(l.id)[0];let e=1;if(i=a+"_"+e,p!==I)while(1){if(null===p.querySelector('[data-id="'+i+'"]'))break;i=a+"_"+ ++e}}n.dataset.id=i;const c=T.createElement("span"),d=T.createElement("input");!1!==t&&s[t].val!==I&&(d.value=JSON.stringify(s[t].val)),d.type="hidden",c.className="tb_sort_fields_remove tf_close",c.title=e.label.delete,n.append(O.Helper.getIcon("ti-pencil"),o,d,c)}return n},sort(e,a){e.tfOn("pointerdown",function(e){if(1===e.which&&e.target.parentNode===this){let o,r,c=0,d=0,p,_,m,i={},u=this.ownerDocument,h=e.target,b,g,s=h.parentNode;const n=l=>{if(l.stopImmediatePropagation(),u){let e=l.clientX,t=l.clientY;e<g.left?e=g.left:e>g.right&&(e=g.right),t<g.top?t=g.top:t>g.bottom&&(t=g.bottom);const a=u.elementFromPoint(e,t),i=e-_-g.left,s=t-m-g.top;if(p.style.transform="translate("+i+"px,"+s+"px)",a&&a!==h&&a.classList.contains("tb_sort_fields_item")){const n=t>c||e>d?"bottom":"top";r===n&&o===a||("bottom"==n?a.after(b):a.before(b)),o=a,r=n}c=t,d=e}},t=function(e){if(e.stopImmediatePropagation(),u.body.classList.add("tb_start_animate","tb_move_drag"),s.classList.add("tb_sort_start"),"undefined"!=typeof tinyMCE){const a=s.tfClass("tb_lb_wp_editor");for(let t=a.length-1;-1<t;--t){let e=a[t].id;i[e]=tinymce.get(e).getContent(),tinyMCE.execCommand("mceRemoveEditor",!1,e)}}p=this.cloneNode(!0);const t=(p=this.cloneNode(!0)).tfClass("tb_sort_field_dropdown")[0],l=(t&&t.remove(),b=p.cloneNode(!0),p.className+=" tb_sort_handler",b.classList.add("tb_current_sort"),this.style.display="none",this.after(b,p),p.getBoundingClientRect());g=s.getBoundingClientRect(),m=l.height/2-s.offsetTop,_=l.width/2-s.offsetLeft,n(e)},l=function(){if(this.tfOff("pointermove",t,{passive:!0,once:!0}).tfOff("pointermove",n,{passive:!0}).tfOff("lostpointercapture pointerup",l,{passive:!0,once:!0}),b){if(p&&p.remove(),b.replaceWith(this),this.style.display="","undefined"!=typeof tinyMCE)for(let e in i)tinyMCE.execCommand("mceAddEditor",!1,e),tinymce.get(e).setContent(i[e]);a.control.preview(s,null,{repeat:!0}),L.triggerEvent(s,"sortable"),s.classList.remove("tb_sort_start"),s=null}u.body.classList.remove("tb_start_animate","tb_move_drag"),o=p=r=c=d=i=u=m=_=g=h=b=null};h.tfOn("lostpointercapture pointerup",l,{passive:!0,once:!0}).tfOn("pointermove",t,{passive:!0,once:!0}).tfOn("pointermove",n,{passive:!0}).setPointerCapture(e.pointerId)}},{passive:!0})},find(t,l,a){for(let e=t.length-1;-1<e;--e)if(t[e].id===l||!0===a&&l===t[e].type)return e;return!1},edit(a,i,s,n){const o=n.dataset.type;let r=n.tfClass("tb_sort_field_dropdown")[0];if(!r){(r=T.createElement("div")).className="tb_sort_field_dropdown tb_sort_field_dropdown_"+o;let e=n.dataset.id,t=null,l=i.options[o].options;if(l===I&&(l=this.getDefaults(o,a),"text"!==o)&&(l=l.concat(this.getGlobalOptions(a))),i.options[o].has_global_options&&(l=l.concat(this.getGlobalOptions(a))),a.is_repeat=a.is_sort=!0,s!==I){const c=!!n.dataset.new,d=!0==c?o:e,p=this.find(s,d,c);!1!==p&&s[p].val!==I&&(t=O.Helper.cloneObject(a.values),a.values=s[p].val)}r.appendChild(a.create(l)),n.appendChild(r),a.callbacks(),null!==t&&(a.values=t),a.is_sort=a.is_repeat=t=null}if(!n.classList.contains("current")){n.classList.add("current");const t=function(e){1===e.which&&(n.contains(e.target)||Themify_Icons.target&&n.contains(Themify_Icons.target[0])&&"block"===this.tfId("themify_lightbox_fa").style.display?n.classList.add("current"):(n.classList.remove("current"),this.tfOff(e.type,t,{passive:!0})))};_.document.tfOn("pointerdown",t,{passive:!0})}},remove(e,t){const l=(t=t.closest("li")).parentNode;t.parentNode.removeChild(t),e.control.preview(l,null,{repeat:!0}),L.triggerEvent(l,"delete")},render(l,a){const e=T.createElement("div"),t=T.createElement("div"),i=T.createElement("div"),s=T.createElement("ul"),n=T.createElement("ul"),o=a.values[l.id]?a.values[l.id].slice(0):[];e.className="tb_sort_fields_wrap tf_box tf_rel tf_w",n.className="tb_sort_fields_parent",!0===a.is_repeat?(n.dataset.inputId=l.id,n.className+=!0===a.is_sort?" tb_lb_sort_child":" tb_lb_option_child"):(n.id=l.id,n.className+=" tb_lb_option"),s.className="tb_ui_dropdown_items tf_scrollbar",t.className="tb_ui_dropdown_label tb_sort_fields_plus tf_plus_icon",t.tabIndex="-1",i.className="tb_sort_fields_plus_wrap";for(let e in l.options)s.appendChild(this.create(a,l,e));for(let e=0,t=o.length;e<t;++e)!0===a.is_new&&!0!==o[e].show||n.appendChild(this.create(a,l,o[e].type,o[e].id,o,!0));return e.tfOn(L.click,e=>{const t="LI"===e.target.tagName?e.target:e.target.parentNode;"LI"===t.tagName&&(e.stopPropagation(),e.target.classList.contains("tb_sort_fields_remove")?this.remove(a,e.target):t.closest(".tb_sort_fields_plus_wrap")?(n.appendChild(this.create(a,l,e.target.dataset.type,null,o,!0)),a.control.preview(n,null,{repeat:!0})):this.edit(a,l,o,t))},{passive:!0}),i.append(t,s),e.append(n,i),setTimeout(()=>{this.sort(n,a)},800),!0===a.is_new&&a.afterRun.push(()=>{a.control.preview(n,null,{repeat:!0})}),e}},multi:{render(e,t){const l=T.createElement("div");return l.className="tb_multi_fields tb_fields_count_"+e.options.length,l.appendChild(t.create(e.options)),l}},color:{is_typing:null,controlChange(l,a,e){const i=this,s=$(l),n=e.id;s.tfminicolors({opacity:e.opacity===I||Boolean(e.opacity),swatches:themifyColorManager.toColorsArray(),changeDelay:10,beforeShow(){const e=O.LightBox.el.getBoundingClientRect(),t=s.closest(".tfminicolors"),l=t.find(".tfminicolors-panel");l.css("visibility","hidden").show(),t[0].classList.toggle("tfminicolors_right",e.left+e.width<=l.offset().left+l.width()),l.css("visibility","").hide()},show(){themifyColorManager.initColorPicker(this),"visual"===O.mode&&L.triggerEvent(this,"themify_builder_color_picker_show",{id:n})},hide(){"visual"===O.mode&&L.triggerEvent(this,"themify_builder_color_picker_hide",{id:n})},change(e,t){e?t&&("0.99"==t?t=1:parseFloat(t)<=0&&(t=0)):t=e="",i.is_typing||t===T.activeElement||(a.value=t),e&&parseFloat($(this).tfminicolors("opacity"))<=0&&$(this).tfminicolors("opacity",0),"visual"===O.mode&&(e=e&&(0===e.indexOf("--")?"var("+e+")":$(this).tfminicolors("rgbaString")),L.triggerEvent(this,"themify_builder_color_picker_change",{id:n,val:e}))}}).tfminicolors("show");a.tfOn("blur keyup",function(e){let t=parseFloat(this.value.trim().replace(",","."));(1<t||isNaN(t)||t<0)&&(t=l.value?1:""),"blur"===e.type&&(this.value=t),i.is_typing="keyup"===e.type,s.tfminicolors("opacity",t)},{passive:!0}),l.setAttribute("data-tfminicolors-initialized",!0)},setColor(e,t,l,a){let i=a,s="",n=!1;"transparent"===a?(i=a="#000",s=0):""!==a&&!1===(n=0===a.indexOf("--"))&&(a.includes("_")?(i=ThemifyStyles.toRGBA(a),a=a.split("_"),(s=a[1])?parseFloat(s)<=0&&(s=0):s=1,i=a[0]):(i=a,s=1),i.includes("#")||(i="#"+i)),e.parentNode.classList.toggle("tfminicolors-var-input",n),e.value=i,!0===n&&(i=s=""),t.style.background=i,e.dataset.opacity=t.style.opacity=l.value=s},update(e,t,l){const a=l.getEl(e);if(null!==a){const i=a.parentNode;t===I&&(t=""),this.setColor(a,i.tfClass("tfminicolors-swatch-color")[0],i.nextElementSibling,t)}},render(e,t){const l=T.createDocumentFragment(),a=T.createElement("div"),i=T.createElement("div"),s=T.createElement("input"),n=T.createElement("input"),o=T.createElement("span"),r=T.createElement("span"),c=this;let d=t.getStyleVal(e.id);return a.className="tfminicolors_wrapper",i.className="tfminicolors tfminicolors-theme-default",s.type="text",s.className="tfminicolors-input",s.autocomplete="off",e.class!==I&&(s.className+=" "+e.class),!0===t.is_repeat?(s.className+=!0===t.is_sort?" tb_lb_sort_child":" tb_lb_option_child",s.dataset.inputId=e.id):(s.id=e.id,s.className+=" tb_lb_option"),o.className="tfminicolors-swatch tfminicolors-sprite tfminicolors-input-swatch",r.className="tfminicolors-swatch-color tf_abs",n.type="number",n.step=.1,n.min=0,n.max=1,n.className="color_opacity",o.appendChild(r),i.append(s,o),a.append(i,n),t.initControl(s,e),o.tfOn(L.click,()=>{a.insertAdjacentElement("afterbegin",s),i.parentNode.removeChild(i),c.controlChange(s,n,e)},{once:!0,passive:!0}),s.tfOn("focusin",()=>{o.click()},{once:!0,passive:!0}),n.tfOn("focusin",function(){s.dataset.tfminicolorsInitialized?$(s).tfminicolors("show"):(s.dataset.opacity=this.value,o.click())},{passive:!0}),(d=!d&&e.default?e.default:d)!==I&&this.setColor(s,r,n,d),l.appendChild(a),e.after!==I&&l.appendChild(t.after(e)),e.description!==I&&l.appendChild(t.description(e.description)),e.tooltip!==I&&l.appendChild(t.hint(e.tooltip)),e.label===I&&(e.label="c"),l}},tooltip:{render(e,t){const l=[{type:"textarea",label:t.label.tt,id:"_tooltip",class:"fullwidth",control:!1},{type:"color",label:t.label.bg_c,id:"_tooltip_bg",control:!1},{type:"color",label:t.label.f_c,id:"_tooltip_c",control:!1},{type:"range",label:t.label.ma_wd,id:"_tooltip_w",control:!1,units:{px:{min:-2e3,max:2e3},em:{min:-20,max:20}}}];let a=t.create([{type:"group",label:t.label.t,display:"accordion",options:l}]);return a="visual"===O.mode?this.bindEvents(a):a},bindEvents(e){const t=this,l=e.querySelector("#_tooltip"),a=[e.querySelector("#_tooltip_bg"),e.querySelector("#_tooltip_c")],i=["focus","keyup","blur","change"],s=e.querySelector("#_tooltip_w");for(let e=i.length-1;-1<e;--e)"change"!==i[e]&&l.tfOn(i[e],e=>{t.addOrRemoveTooltip("blur"!==e.type)},{passive:!0});s.tfOn(i,e=>{t.addOrRemoveTooltip("blur"!==e.type)},{passive:!0});for(let e=a.length-1;-1<e;--e)a[e].tfOn("themify_builder_color_picker_show",function(){t.addOrRemoveTooltip(!0),this.tfOn("themify_builder_color_picker_hide",()=>{t.addOrRemoveTooltip(!1)},{once:!0,passive:!0})},{passive:!0}),a[e].tfOn("themify_builder_color_picker_change",()=>{t.addOrRemoveTooltip(!0)},{passive:!0});return e},addOrRemoveTooltip(e){let t=O.liveStylingInstance.el,l=t.querySelector(":scope > .tb_tooltip");if(!e&&l)l.remove();else{L.loadCss("tooltip");const a=self.getEl("_tooltip").value;if(""!==a){l||((l=T.createElement("div")).className="tb_tooltip",t.appendChild(l));let e=self.getEl("_tooltip_w").value;l.classList.add("tooltip_preview"),l.innerHTML=a,l.style.background=O.Helper.getColor(self.getEl("_tooltip_bg")),l.style.color=O.Helper.getColor(self.getEl("_tooltip_c")),""!==e&&(e+=self.getEl("_tooltip_w_unit").value),l.style.width=e,l.classList.remove("tf_hide")}else l&&l.remove()}}},text:{update(e,t,l){const a=l.getEl(e);null!==a&&(a.value=t!==I?t:"")},render(t,e){const l=T.createDocumentFragment(),a=T.createElement("input"),i=e.getStyleVal(t.id);if(a.type=t.input_type||"text",!0===e.is_repeat?(a.className=!0===e.is_sort?"tb_lb_sort_child":"tb_lb_option_child",a.dataset.inputId=t.id):(a.className="tb_lb_option",a.id=t.id),t.placeholder!==I&&(a.placeholder=t.placeholder),t.custom_args!==I)for(let e in t.custom_args)a.setAttribute(e,t.custom_args[e]);return i!==I&&(a.value=i),t.class!==I&&(a.className+=" "+t.class),l.appendChild(e.initControl(a,t)),t.unit!==I&&l.appendChild(e.select.render(t.unit,e)),t.after!==I&&l.appendChild(e.after(t)),t.description!==I&&l.appendChild(e.description(t.description)),t.tooltip!==I&&l.appendChild(e.hint(t.tooltip)),l}},number:{render(e,t){return e.input_type="number",e.custom_args===I&&(e.custom_args={min:e.min||0},e.max!==I&&(e.custom_args.max=e.max),e.step!==I)&&(e.custom_args.step=e.step),t.text.render(e,t)}},angle:{update(e,t,l){l.range.update(e,t,l)},render(e,t){e.input_type="number",e.custom_args={min:0,max:360};const l=T.createElement("div"),a="tb_lb_option tb_angle_input",p=(e.class=e.class!==I?e.class+" "+a:a,l.tabIndex=-1,l.className="tb_angle_container tf_rel",l.appendChild(t.range.render(e,t)),l.querySelector("#"+e.id)),_=e.event!==I?e.event:"styling"===t.clicked?"keyup":"change";return p.tfOn("pointerdown",function(e){e.stopImmediatePropagation();let t=this.parentNode.tfClass("tb_angle_circle")[0];if(!t){let e=this.value;const l=T.createElement("div"),a=T.createElement("div");t=T.createElement("div"),""!==e&&(l.style.transform="rotate("+e+"deg)"),l.className="tb_angle_dot",t.className="tb_angle_circle",a.className="tb_angle_circle_wrapper",t.appendChild(l),a.appendChild(t),this.parentNode.appendChild(a)}t.tfOn(e.type,function(l){if(1===l.which){let e=this.getBoundingClientRect(),i=this.offsetWidth/2+e.left,s=this.offsetHeight/2+e.top,t,n=this.parentNode.tfClass("tb_angle_dot")[0];const o=180/Math.PI,a=this.ownerDocument,r=e=>{e.stopImmediatePropagation(),a.body.classList.add("tb_start_animate")},c=a=>{a.stopImmediatePropagation(),t=requestAnimationFrame(()=>{let e=s-a.clientY,t=i-a.clientX,l=Math.atan2(e,t)*o;(l-=90)<0&&(l+=360),l=Math.round(l),n.style.transform="rotate("+l+"deg)",p.value=l,L.triggerEvent(p,_)})},d=function(){t&&cancelAnimationFrame(t),this.tfOff("pointermove",r,{passive:!0,once:!0}).tfOff("pointermove",c,{passive:!0}).tfOff("lostpointercapture pointerup",d,{passive:!0,once:!0}),a.body.classList.remove("tb_start_animate"),requestAnimationFrame(()=>{n=i=t=s=null})};this.tfOn("lostpointercapture pointerup",d,{passive:!0,once:!0}).tfOn("pointermove",r,{passive:!0,once:!0}).tfOn("pointermove",c,{passive:!0}).setPointerCapture(l.pointerId),c(l)}},{passive:!0})},{passive:!0,once:!0}),l}},autocomplete:{cache:new Map,render(l,e){const t=e.text.render(l,e);if(l.dataset!==I){const a=t.querySelector("input"),r=this,i=T.createElement("div");a.autocomplete="off",i.className="tb_autocomplete_container",t.appendChild(i);let o=null;a.tfOn("input",async function(){const e=this.nextElementSibling;e.style.display="none";while(null!==e.firstChild)e.lastChild.remove();e.style.display="";const t=this.value,a=l.dataset,i=a+t;if(""!==t){null!==o&&o.abort();let l=r.cache.get(i);if(!l){const s=this.parentNode;try{o=new AbortController,s.classList.add("tb_autocomplete_loading","tf_loader"),l=(l=await O.LocalFetch({action:"tb_get_ajax_data",mode:"autocomplete",dataset:a,value:t},!1,{signal:o.signal})).success?l.data:"",r.cache.set(i,l)}catch(e){}s.classList.remove("tb_autocomplete_loading","tf_loader")}if(l){const n=T.createDocumentFragment();for(let t in l){let e=T.createElement("div");e.className="tb_autocomplete_item",e.dataset.value=t,e.innerText=l[t],n.appendChild(e)}e.classList.add("tf_scrollbar"),e.appendChild(n)}o=null}},{passive:!0}),i.tfOn("pointerdown",function(e){if(1===e.which&&e.target.classList.contains("tb_autocomplete_item")){e.preventDefault(),e.stopPropagation();const t=this.previousElementSibling;t.value=e.target.dataset.value,t.blur(),L.triggerEvent(t,"change")}})}return t}},mediaFile:{_frames:{},clicked:null,browse(t,a,i,s){t.tfOn(L.click,e=>{e.preventDefault(),e.stopPropagation();let l;this._frames[s]!==I?l=this._frames[s]:(l=wp.media.frames.file_frame=wp.media({title:a.dataset.title||i.label["upload_"+s]||i.label.upload_image,library:{type:"json"===s?"text/plain,application/json":s},button:{text:i.label.insert_image},multiple:!1}),this._frames[s]=l),l.off("select").on("select",()=>{O.ActionBar.disable=!0;const e=l.state().get("selection").first().toJSON(),t=(a.value=e.url,L.triggerEvent(a,"change"),$(a).trigger("change"),a.getRootNode().querySelector("#"+a.id+"_id"));t&&(t.value=e.id)}),l.on("close",()=>{O.ActionBar.disable=!0,setTimeout(()=>{O.ActionBar.disable=null},5)}),l.open(),l.content.mode("browse")}),"image"===s&&a.tfOn("change",e=>{this.setImage(t,e.currentTarget.value.trim())},{passive:!0})},setImage(e,t){while(e.firstChild)e.lastChild.remove();if(t){const l=new Image(40,40),a=new Image(40,40);a.decoding="async",a.src="//via.placeholder.com/40x40.png",l.src=t,l.decoding="async",l.decode().catch(()=>{}).finally(()=>{a.replaceWith(l)}),e.appendChild(a)}},update(e,t,l){const a=l.getEl(e);null!==a&&(t===I&&(t=""),a.value=t,this.setImage(a.parentNode.tfClass("thumb_preview")[0],t))},render(e,t,l){const a=T.createElement("div"),i=T.createElement("input"),s=T.createElement("a"),n=T.createElement("span"),o=l.getStyleVal(t.id);let r;if(i.type="text",i.className="tb_uploader_input",i.required=!0,i.setAttribute("pattern",/.*\S.*/.source),i.setAttribute("autocomplete","off"),t.title&&(i.dataset.title=t.title),!0===l.is_repeat?(i.className+=!0===l.is_sort?" tb_lb_sort_child":" tb_lb_option_child",r="tb_"+Math.random().toString(36).substr(2,7),i.dataset.inputId=t.id):(i.className+=" tb_lb_option",r=t.id),i.id=r,o!==I&&(i.value=o),n.className="tb_clear_input tf_close",s.className="tb_media_uploader tb_upload_btn thumb_preview tf_plus_icon tf_rel",s.href="#",s.dataset.libraryType="json"===e?"text/plain,application/json":e,s.title=l.label.browse_image,a.className="tb_uploader_wrapper tf_rel",n.tfOn(L.click,e=>{e.stopPropagation(),i.value="",L.triggerEvent(i,"change")},{passive:!0}),a.append(l.initControl(i,t),n,s),"image"===e&&this.setImage(s,o),this.browse(s,i,l,e),t.after!==I&&a.appendChild(l.after(t)),t.description!==I&&a.appendChild(l.description(t.description)),t.tooltip!==I&&a.appendChild(l.hint(t.tooltip)),null===this.clicked&&!0===l.is_new&&"setting"===l.clicked&&("image"===l.type||"pro-image"===l.type)){this.clicked=!0;const c=this;l.afterRun.push(()=>{L.triggerEvent(s,L.click),c.clicked=null})}return a}},file:{render(e,t){return t.mediaFile.render(e.ext,e,t)}},image:{render(e,t){return t.mediaFile.render("image",e,t)}},video:{render(e,t){return t.mediaFile.render("video",e,t)}},audio:{render(e,t){return t.mediaFile.render("audio",e,t)}},lottie:{getOptions(t,e,l,a){const i=a.label,s=i.lottie,n={"":i.none};for(let e of t.keys())n[e]=e;return{type:"group",wrap_class:"tb_lottie_act_w",options:[{id:"st",type:"select",label:s.pl,options:{"":i.onload,click:i.click,hover:i.h,hold:i.hold,pausehold:i.phold,seek:i.seek,scroll:i.scroll,basket:s.basket,none:s.n},binding:{"":{show:["tb_loop_msg","tb_next_wr","count"],hide:["tb_click_msg","tb_hover_msg","tb_click_hover_input","tb_hold_msg","tb_scroll_wr","tb_pausehold_msg"]},click:{show:["tb_click_msg","tb_click_hover_input","tb_next_wr","count"],hide:["tb_loop_msg","tb_hover_msg","tb_hold_msg","tb_scroll_wr","tb_pausehold_msg"]},hover:{show:["tb_hover_msg","tb_click_hover_input","tb_next_wr","count"],hide:["tb_loop_msg","tb_click_msg","tb_hold_msg","tb_scroll_wr","tb_pausehold_msg"]},seek:{show:["tb_next_wr"],hide:["tb_click_msg","tb_hover_msg","tb_click_hover_input","tb_hold_msg","tb_loop_msg","tb_scroll_wr","tb_pausehold_msg","count"]},pausehold:{show:["tb_pausehold_msg","tb_next_wr"],hide:["tb_click_msg","tb_hover_msg","tb_click_hover_input","tb_hold_msg","tb_loop_msg","tb_scroll_wr","count"]},hold:{show:["tb_hold_msg","tb_next_wr"],hide:["tb_click_msg","tb_hover_msg","tb_click_hover_input","tb_pausehold_msg","tb_loop_msg","tb_scroll_wr","count"]},scroll:{show:["tb_scroll_wr"],hide:["tb_click_msg","tb_hover_msg","tb_click_hover_input","tb_pausehold_msg","tb_next_wr","tb_loop_msg","tb_hold_msg","count"]},none:{hide:["tb_click_msg","tb_hover_msg","tb_click_hover_input","tb_hold_msg","count","tb_pausehold_msg","tb_scroll_wr","tb_next_msg","speed","delay","dir"]},basket:{hide:["tb_click_msg","tb_hover_msg","tb_click_hover_input","tb_hold_msg","tb_pausehold_msg","tb_scroll_wr","tb_next_msg"]}}},{id:"count",label:i.count,type:"range",min:1,placeholder:1},{type:"message",label:"",wrap_class:"tb_click_msg",comment:s.clm},{type:"message",label:"",wrap_class:"tb_hover_msg",comment:s.hm},{type:"message",label:"",wrap_class:"tb_loop_msg",comment:i.r},{type:"message",label:"",wrap_class:"tb_hold_msg",comment:s.hlm},{type:"message",label:"",wrap_class:"tb_pausehold_msg",comment:s.phm},{type:"group",wrap_class:"tb_scroll_wr",options:[{id:"vis",type:"slider_range",label:i.visibility,help:s.in_r,options:{unit:"%"}},{id:"s_ev",type:"select",label:i.e,options:{"":i.play,stop:i.stop,loop:i.loop,seek:i.seek}}]},{type:"group",wrap_class:"tb_next_wr",options:[{id:"tr",type:"select",label:s.plr,options:{"":s.end,click:i.click,hover:i.h,seek:i.seek},binding:{"":{hide:["tb_nloop_msg","tb_nhover_msg","tb_nclick_msg","tr_count"]},click:{show:["tb_nclick_msg","tr_count"],hide:["tb_nloop_msg","tb_nhover_msg"]},hover:{show:["tb_nhover_msg","tr_count"],hide:["tb_nloop_msg","tb_nclick_msg"]},seek:{hide:["tb_nclick_msg","tb_nhover_msg","tb_nclick_msg","tr_count"]}}},{id:"tr_count",label:i.count,type:"range",min:1,placeholder:1},{type:"message",label:"",wrap_class:"tb_nclick_msg",comment:s.clr},{type:"message",label:"",wrap_class:"tb_nhover_msg",comment:s.hr}]},{id:"sp",type:"range",label:i.speed,increment:.1,min:.1,placeholder:1},{id:"del",type:"range",label:i.delay,after:i.sec,help:s.delm,increment:.1,min:0,placeholder:0},{id:"dir",label:i.rev,type:"toggle_switch",options:{on:{name:"-1",value:i.y},off:{value:i.no}}},{id:"fid",type:"select",label:s.fid,wrap_class:"tb_lottie_frame_id",help:s.fidm,options:n,control:!1},{id:"seg",type:"slider_range",wrap_class:"tb_lottie_range_id",label:s.seg,help:s.segm,options:{min:e,max:l,unit:""}},{id:"r",label:i.ren,type:"select",help:s.renm,options:{"":"Svg",c:"Canvas",h:"Html"}},{label:i.csssel,id:"sel",wrap_class:"tb_click_hover_input",type:"text",control:{event:"change"}},{label:"",type:"message",wrap_class:"tb_click_msg",comment:s.clsel},{type:"message",wrap_class:"tb_hover_msg",label:"",comment:s.clhov}]}},render(e,g){let f=g.values;e.ext="json",e.binding={empty:{hide:"tb_lottie_act_w"},not_empty:{show:"tb_lottie_act_w"}};const t=T.createDocumentFragment(),l=T.createElement("button"),a=g.file.render(e,g),i=a.querySelector("input"),y=!!g.is_repeat,v=async(t,e,l)=>{let a={};t.value&&(await L.loadJs("lottie",!!window.TF_Lottie),a=await TF_Lottie.getJson(t.value));const i=a.markers||[],s=new Map,n=t.closest(".tb_repeatable_field");if(1<i.length)for(let l=0;l<i.length;++l){let e=i[l],t=e.cm;if(t){try{let e=JSON.parse(t);t=e.name}catch(e){}s.set(t,{min:e.tm,max:e.tm+e.dr})}}let o=l&&s.has(l)?s.get(l):{},r=o.min||0,c=o.max||(a.op?Math.floor(a.op-a.ip):"");if(c=parseInt(c)||"",!n.tfClass("tb_lottie_act_w")[0]){const m=g.values,u=!!g.is_repeat;g.is_repeat=y,g.values=f,t.closest(".tb_field").after(g.create([this.getOptions(s,r,c,g)])),g.is_repeat=u,g.values=m}const d=n.tfClass("tb_lottie_frame_id")[0],p=d.tfTag("select")[0],_=n.tfClass("tb_lottie_range_id")[0].tfClass("tb_slider_wrapper")[0];if(0===s.size&&(d.style.display="none"),e){const h=_.tfClass("tb_lb_option_child")[0],b=T.createDocumentFragment();if(!l)for(let e=p.children,t=e.length-1;0<t;--t)e[t].remove();if(0<s.size){if(!l)for(let t of s.keys()){let e=T.createElement("option");e.textContent=e.value=t,b.appendChild(e)}d.style.display="",p.appendChild(b)}_.tfClass("tb_slider_output_low")[0].dataset.slider_after=r,_.tfClass("tb_slider_output_high")[0].dataset.slider_before=c,_.style.setProperty("--tb_slider_after",r),_.style.setProperty("--tb_slider_min",r),_.style.setProperty("--tb_slider_before",c),_.style.setProperty("--tb_slider_max",c);for(let e=_.querySelectorAll('[type="range"]'),t=e.length-1;-1<t;--t)e[t].max=c,e[t].min=r,e[t].value=0===t?r:c;h.value="",L.triggerEvent(_,"input")}else p.tfOn("change",e=>{e.stopPropagation(),v(t,!0,e.currentTarget.value)},{passive:!0}),setTimeout(()=>{g.callbacks()},10)},s=()=>{let e=g.mediaFile._frames.json;e!==I&&((e=e.content.get()).collection.props.set({ignore:+new Date}),e.options.selection.reset())},n=async()=>{O.Spinner.showLoader();try{const e=themifyBuilder.i18n.lottie_lib;e.all=g.label.all,await L.loadJs(L.url+"js/admin/modules/lottie-browse",!!window.TF_LottieBrowse),await TF_LottieBrowse.run(i,e,themifyBuilder.nonce),i.tfOff("change",s,{passive:!0,once:!0}).tfOn("change",s,{passive:!0,once:!0}),O.Spinner.showLoader("done")}catch(e){O.Spinner.showLoader("error")}};return l.type="button",l.tfOn(L.click,async e=>{e.stopPropagation(),n()},{passive:!0}).textContent=themifyBuilder.i18n.lottie_lib.browse,i.tfOn("change",e=>{e.stopPropagation(),v(e.currentTarget,!0)},{passive:!0}),g.afterRun.push(()=>{v(i,!1,f.fid),g.is_new&&n()}),t.append(a,l),t}},export_lottie:{render(e,n){const t=T.createElement("button");return t.type="button",t.tfOn(L.click,e=>{e.stopPropagation();const t=O.Forms.serialize("tb_options_setting",!1);for(let e in t)"actions"!==e&&"loop"!==e&&delete t[e];const l='<tf-lottie data-lazy="1" class="tf_w tf_lazy"><template>'+JSON.stringify(O.Helper.clear(t))+"</template></tf-lottie>",a=n.label.lottie.copy.replaceAll("%html%",'<textarea style="border:0;outline:0;resize:none;display:inline-table;font-weight:bold;margin-top:20px" readonly class="tf_w">'+l+"</textarea>"),i=(O.LiteLightBox.alert(a),O.LiteLightBox.el.querySelector("textarea")),s=()=>{i.focus(),i.select()};i.tfOn(e.type,s,{passive:!0}),s()},{passive:!0}).textContent=n.label.lottie.exp,t}},icon_radio:{controlChange(l){l.tfOn(L.click,function(e){if(e.preventDefault(),e.stopImmediatePropagation(),e.target!==l){const t=e.target.closest("label").tfTag("input")[0];!0===t.checked?(t.checked=!1,t.value=I):(t.checked=!0,t.value=t.dataset.value),L.triggerEvent(t,"change")}})},render(e,t){return t.radioGenerate("icon_radio",e)}},radio:{controlChange(e){const l=e.classList.contains("tb_radio_dnd")?e.closest(".tb_repeatable_field_content"):e.closest(".tb_tab,.tb_expanded_opttions")||O.LightBox.el,a=e.parentNode.parentNode.tfTag("input"),i=e.value,t=l.tfClass("tb_group_element_"+i);for(let t=a.length-1;-1<t;--t){let e=a[t].value;if(i!==e){let t=l.tfClass("tb_group_element_"+e);for(let e=t.length-1;-1<e;--e)t[e].style.display="none"}}for(let e=t.length-1;-1<e;--e)t[e].style.display=""},update(e,l,t){const a=t.getEl(e);if(null!==a){const i=a.tfTag("input"),s=a.classList.contains("tb_icon_radio");let t=null;for(let e=i.length-1;-1<e;--e)if(i[e].value===l){t=i[e];break}if(null===t){const n=a.dataset.default;n!==I&&(t=a.querySelector('[value="'+n+'"]')),!1===s&&null===t&&(t=i[0])}if(null!==t)!(t.checked=!0)===s&&a.classList.contains("tb_option_radio_enable")&&this.controlChange(t);else if(!0===s)for(let e=i.length-1;-1<e;--e)i[e].checked=!1}},render(e,t){return t.radioGenerate("radio",e)}},icon_checkbox:{render(e,t){return t.checkboxGenerate("icon_checkbox",e)}},checkbox:{update(e,t,l){const a=l.getEl(e);if(null!==a){const i=a.tfTag("input"),s=a.classList.contains("tb_option_checkbox_enable");t=t?t.split("|"):[];for(let e=i.length-1;-1<e;--e)i[e].checked=t.includes(i[e].value),!0===s&&this.controlChange(i[e])}},controlChange(e){const a=e.classList.contains("tb_radio_dnd")?e.closest(".tb_repeatable_field_content"):O.LightBox.el,t=e.parentNode.parentNode,i=t.tfTag("input"),s=t.classList.contains("tb_option_checkbox_revert");for(let e=i.length-1;-1<e;--e){let t=a.tfClass("tb_checkbox_element_"+i[e].value),l=i[e].checked;for(let e=t.length-1;-1<e;--e)t[e].classList.toggle("_tb_hide_binding",!(!0===s&&!1===l||!1===s&&!0===l))}},render(e,t){return t.checkboxGenerate("checkbox",e)}},radioGenerate(e,i){const t=T.createDocumentFragment(),s=T.createElement("div"),n="icon_radio"===e,o=this.getOptions(i),r=this.getStyleVal(i.id),c=!0===i.option_js,d=[],p=this,l=o.length;let a=null,_=i.default!==I&&i.default,m;s.className="tb_radio_wrap",s.tabIndex="-1",1<l&&(i.new_line!==I&&(s.className+=" tb_new_line"),s.className+=" tb_count_"+l),!0==c&&(s.className+=" tb_option_radio_enable"),!0==n&&(s.className+=" tb_icon_radio",a=i.no_toggle===I),!0===this.is_repeat?(s.className+=!0===this.is_sort?" tb_lb_sort_child":" tb_lb_option_child",m="tb_"+Math.random().toString(36).substr(2,7),s.dataset.inputId=i.id):(s.className+=" tb_lb_option",s.id=m=i.id),!1!==_?s.dataset.default=_:!1==n&&r===I&&(_=o[0].value),i.before!==I&&t.appendChild(T.createTextNode(i.before));for(let a=0;a<l;++a){let t=T.createElement("label"),e=T.createElement("input"),l=[];if(e.type="radio",e.name=m,e.value=o[a].value,!0==n&&(e.dataset.value=o[a].value),!0===this.is_repeat&&l.push("tb_radio_dnd"),i.class!==I&&l.push(i.class),o[a].class!==I&&(t.className=o[a].class),0<l.length&&(e.className=l.join(" ")),!0===o[a].disable&&(e.disabled=!0),(r===o[a].value||r===I&&_===o[a].value)&&(e.checked=!0)==c&&d.push(e),t.appendChild(e),!0==c&&e.tfOn("change",function(){this.parentNode.parentNode.blur(),p.radio.controlChange(this)},{passive:!0}),!0==n){if(o[a].icon!==I){let e=T.createElement("span");e.className="tb_icon_wrapper",e.innerHTML=o[a].icon,t.insertAdjacentElement("beforeend",e)}if(o[a].label_class!==I&&(t.className+=o[a].label_class),o[a].name!==I){let e=T.createElement("span");e.className="themify_tooltip",e.textContent=o[a].name,t.appendChild(e)}}else if(o[a].name!==I){let e=T.createElement("span");e.textContent=o[a].name,t.appendChild(e)}s.appendChild(t),this.initControl(e,i)}return s.tfOn(L.click,function(e){"LABEL"===e.target.parentNode.tagName&&this.blur()},{passive:!0}),t.appendChild(s),i.after!==I&&t.appendChild(p.after(i)),i.description!==I&&t.appendChild(p.description(i.description)),!0==n&&!0===a&&p.icon_radio.controlChange(s),!0==c&&this.radioChange.push(()=>{for(let e=0,t=d.length;e<t;++e)p.radio.controlChange(d[e])}),t},checkboxGenerate(e,a){const t=T.createDocumentFragment(),i=T.createElement("div"),s=this.getOptions(a),n="icon_checkbox"===e,o=!0===a.option_js,r=this,c=[],d=s.length;let p=this.getStyleVal(a.id),_=null,m=null;i.className="tb_checkbox_wrap",1<d&&(!1===a.new_line&&(i.className+=" tb_one_row"),i.className+=" tb_count_"+d),!0==o&&(i.className+=" tb_option_checkbox_enable",a.reverse!==I)&&(i.className+=" tb_option_checkbox_revert"),!0===this.is_repeat?(i.className+=!0===this.is_sort?" tb_lb_sort_child":" tb_lb_option_child",i.dataset.inputId=a.id):(i.className+=" tb_lb_option",i.id=a.id),a.wrap_checkbox!==I&&(i.className+=" "+a.wrap_checkbox),p===I?a.default!==I&&(_=a.default,m=Array.isArray(_)):!1!==p&&(p=p.split("|")),!0==n&&(i.className+=" tb_icon_checkbox"),a.before!==I&&t.appendChild(T.createTextNode(a.before));for(let l=0;l<d;++l){let t=T.createElement("label"),e=T.createElement("input");if(e.type="checkbox",e.className="tb_checkbox",e.value=s[l].name,e.checked=p!==I&&!1!==p&&p.includes(s[l].name)||_===s[l].name||!0===m&&_.includes(s[l].name),a.class!==I&&(e.className+=" "+a.class),!0==o&&(e.tfOn("change",function(){r.checkbox.controlChange(this)},{passive:!0}),c.push(e)),"hide_anchor"===a.id&&O.activeModel.options(e,"hide_anchor"),t.appendChild(e),!0==n){if(t.insertAdjacentHTML("beforeend",s[l].icon),s[l].value!==I){let e=T.createElement("span");e.className="themify_tooltip",e.textContent=s[l].value,t.appendChild(e)}}else s[l].value!==I&&t.appendChild(T.createTextNode(s[l].value));if(s[l].help!==I){let e=T.createElement("div");e.className="tb_checkbox_help",e.append(t,this.help(s[l].help)),t=e}i.appendChild(t),this.initControl(e,a)}return"hide_anchor"===a.id&&i.tfOn(L.click,e=>{e.stopPropagation()}),t.appendChild(i),a.after!==I&&(a.label!==I&&""!==a.label||a.help===I||""===a.help?t:(i.className+=" contains-help",i)).appendChild(this.after(a)),a.description!==I&&t.appendChild(this.description(a.description)),!0==o&&this.afterRun.push(()=>{for(let e=0,t=c.length;e<t;++e)r.checkbox.controlChange(c[e])}),t},date:{loaded:null,render(l,e){const t=T.createDocumentFragment(),a=T.createElement("input"),i=T.createElement("button"),s=()=>_.jQuery.fn.themifyDatetimepicker||_.jQuery.fn.datetimepicker,n=()=>{s().call($(a),"hide")},o=()=>{const e=s();if(e){const t=l.picker!==I?l.picker:{};i.tfOn(L.click,function(e){e.preventDefault(),e.stopPropagation(),a.value="",a.dispatchEvent(new Event("change")),this.style.display="none"}),e.call($(a),{showTimepicker:!(l.timepicker!==I&&!l.timepicker),showButtonPanel:!0,changeYear:!0,dateFormat:t.dateformat||"yy-mm-dd",timeFormat:t.timeformat||"HH:mm:ss",stepMinute:t.stepMinute||5,stepSecond:t.stepSecond||5,controlType:t.timecontrol||"select",oneLine:!0,separator:t.timeseparator||" ",onSelect(e){i.style.display=""===e?"none":"block",a.dispatchEvent(new Event("change"))},beforeShow(e,t){t.dpDiv.addClass("themify-datepicket-panel");const l=e.getBoundingClientRect();setTimeout(()=>{t.dpDiv.css({top:l.top+e.offsetHeight,left:l.left})},10),"visual"===O.mode&&T.body.tfOn(L.click,n,{once:!0})},onClose(){"visual"===O.mode&&T.body.tfOff(L.click,n,{once:!0})}})}};if(a.type="text",a.autocomplete="off",a.className="themify-datepicker fullwidth",!0===e.is_repeat?(a.className+=!0===e.is_sort?" tb_lb_sort_child":" tb_lb_option_child",a.dataset.inputId=l.id):(a.className+=" tb_lb_option",a.id=l.id),a.readonly=!0,i.className="themify-datepicker-clear tf_close",e.values[l.id]!==I&&(a.value=e.values[l.id]),l.class!==I&&(a.className+=" "+l.class),a.value||(i.style.display="none"),t.append(e.initControl(a,l),i),l.after!==I&&t.appendChild(e.after(l)),l.description!==I&&t.appendChild(e.description(l.description)),null===this.loaded){const r=()=>{_.Themify.loadCss(L.url+"themify-metabox/css/jquery-ui-timepicker.min"),_.Themify.loadJs(themifyBuilder.includes_url+"js/jquery/ui/datepicker.min",_.jQuery.fn.datepicker!==I,themify_vars.wp).then(()=>{_.Themify.loadJs(L.url+"themify-metabox/js/jquery-ui-timepicker.min",_.jQuery.fn.themifyDatetimepicker!==I||_.jQuery.fn.datetimepicker!==I,"1.6.3").then(()=>{this.loaded=!0,setTimeout(o,10)})})};e.afterRun.push(r)}else e.afterRun.push(o);return t}},gradient:{controlChange(e,t,l,a,i,s,n,o,r){let c=e.getStyleVal(s.id),d=(c!==I&&""!==c||(c=180),!1),p=$(t),_=l.id,m=e.getStyleVal(_),u={angle:c,onChange(e,t){d&&(e=t=""),l.value=e,"visual"===O.mode&&L.triggerEvent(l,"themify_builder_gradient_change",{val:t})}},h=(m&&(l.value=u.gradient=m),s.value=c,e.getStyleVal(i.id));h!==I&&""!==h||(h="linear"),i.value=h,u.type=h,n.checked&&(u.circle=!0),r||p.ThemifyGradient(u);const b=p.data("themifyGradient"),g=e=>{let t=s.parentNode;t.classList.contains("tb_angle_container")||(t=s),o.style.display=t.style.display="radial"===e?"none":"",n.parentNode.style.display="radial"===e?"":"none"};r?(b.settings=Object.assign({},b.settings,u),b.settings.type=h,b.settings.circle=n.checked,b.isInit=!1,b.update(),b.isInit=!0):(a.tfOn(L.click,e=>{e.preventDefault(),e.stopImmediatePropagation(),d=!0,b.settings.gradient=$.ThemifyGradient.default,b.update(),d=!1}),i.tfOn("change",function(){const e=this.value;b.setType(e),g(e)},{passive:!0}),n.tfOn("change",function(){b.setRadialCircle(this.checked)},{passive:!0}),s.tfOn("keyup",function(){let e=parseInt(this.value);e=e||0,b.setAngle(e)},{passive:!0}),t.appendChild(a)),g(e.getStyleVal(i.id))},update(e,t,l){const a=e+"-gradient",i=l.getEl(a);if(null!==i){const s=l.getEl(a+"-angle"),n=l.getEl(a+"-type"),o=l.getEl(e+"-circle-radial"),r=i.previousElementSibling,c=o.previousElementSibling;this.controlChange(l,r,i,null,n,s,o.tfClass("tb_checkbox")[0],c,!0)}},render(e,t){const l=T.createElement("div"),a=T.createElement("span"),i=T.createElement("div"),s=T.createElement("input"),n=T.createElement("button"),o=t.select.render({options:{linear:t.label.linear,radial:t.label.radial},class:"themify-gradient-type",id:e.id+"-gradient-type",control:!1},t);l.className="themify-gradient-field tf_w tf_rel",e.option_js!==I&&(l.className+=" tb_group_element_gradient"),a.textContent=t.label.rotation,i.className="tb_gradient_container tf_w",s.type="hidden",s.className="themify-gradient tb_lb_option",s.dataset.id=e.id,s.id=e.id+"-gradient",n.className="tb_clear_gradient tf_close",n.type="button";let r=T.createElement("span");r.className="themify_tooltip",r.innerText=t.label.clear_gradient,n.appendChild(r);const c=O.Helper.cloneObject(e),d=(c.id=e.id+"-gradient-angle",t.angle.render(c,t));return l.append(o,d,a,t.checkboxGenerate("checkbox",{id:e.id+"-circle-radial",options:[{name:"1",value:t.label.circle_radial}]}),i,s),t.initControl(s,e),t.afterRun.push(()=>{this.controlChange(t,i,s,n,l.querySelector(".themify-gradient-type"),d.tfClass("tb_angle_input")[0],l.tfClass("tb_checkbox")[0],a)}),l}},fontColor:{update(e,t,l){l.radio.update(e,l.getStyleVal(e),l)},render(e,t){e.isFontColor=!0;const l={id:e.id,type:"radio",option_js:!0,isFontColor:!0,options:[{value:e.s+"_solid",name:t.label.solid},{value:e.g+"_gradient",name:t.label.gradient}]},a=t.radioGenerate("radio",l),i=a.querySelector(".tb_lb_option"),s=O.Helper.cloneObject(e),n=(s.label="",s.type="color",s.id=e.s,s.prop="color",s.wrap_class="tb_group_element_"+e.s+"_solid",t.create([s])),o=(s.id=e.g,s.wrap_class="tb_group_element_"+e.g+"_gradient",s.type="gradient",s.prop="background-image",t.create([s]));return t.afterRun.push(()=>{const e=i.parentNode.closest(".tb_field");e.parentNode.insertBefore(n,e.nextElementSibling),e.parentNode.insertBefore(o,e.nextElementSibling)}),e.label||(e.label="f_c"),a}},imageGradient:{update(e,t,a){a.radio.update(e+"-type",a.getStyleVal(e+"-type"),a),a.mediaFile.update(e,t,a),a.gradient.update(e,t,a);const i=a.getEl(e);if(null!==i){let e=i.closest(".tb_tab"),t=e.tfClass("tb_image_options"),l=e.tfClass("tb_gradient_image_color")[0].tfClass("tfminicolors-input")[0].id;a.color.update(l,a.getStyleVal(l),a);for(let e=0;e<t.length;++e)l=t[e].tfClass("tb_lb_option")[0].id,a.select.update(l,a.getStyleVal(l),a)}},render(e,l){const t=T.createElement("div"),a=T.createElement("div"),i=(t.className="tb_image_gradient_field",a.className="tb_group_element_image tf_w tf_rel",t.appendChild(l.radioGenerate("radio",{type:e.type,id:e.id+"-type",options:[{name:l.label.image,value:"image"},{name:l.label.gradient,value:"gradient"}],option_js:!0})),e.option_js===I&&(e.option_js=!0),e.binding===I&&(e.binding={empty:{hide:"tb_image_options"},not_empty:{show:"tb_image_options"}}),O.Helper.cloneObject(e));return i.type="image",a.appendChild(l.mediaFile.render("image",O.Helper.cloneObject(i),l)),t.appendChild(a),i.type="gradient",delete i.class,delete i.binding,t.appendChild(l.gradient.render(i,l)),l.afterRun.push(()=>{const e={wrap_class:"tb_group_element_image tf_w tf_rel",type:"group",options:[]},t=(i.prop="background-color",i.wrap_class="tb_gradient_image_color",i.label=l.label.bg_c,i.type="color",i.id=i.colorId,e.options.push(O.Helper.cloneObject(i)),i.prop="background-mode",i.wrap_class="tb_image_options",i.label=l.label.b_r,i.repeat=!0,i.type="select",i.id=i.repeatId,e.options.push(O.Helper.cloneObject(i)),i.prop="background-position",i.wrap_class="tb_image_options",i.label=l.label.b_p,i.position=!0,i.type="position_box",i.id=i.posId,delete i.repeat,e.options.push(O.Helper.cloneObject(i)),a.parentNode.closest(".tb_field"));t.parentNode.insertBefore(l.create([e]),t.nextElementSibling)}),e.label||(e.label="bg"),t}},layout:{controlChange(a){a.tfOn(L.click,function(e){if(e.preventDefault(),e.stopPropagation(),e.target!==a){const t=e.target.closest("a");if(null!==t){const l=this.tfClass("tfl-icon");for(let e=l.length-1;-1<e;--e)l[e].classList.remove("selected");t.classList.add("selected"),L.triggerEvent(this,"change",{val:t.id})}}})},update(e,t,l){const a=l.getEl(e);if(null!==a){const i=a.tfClass("tfl-icon");for(let e=i.length-1;-1<e;--e)i[e].classList.toggle("selected",t===i[e].id);if(t===I){let e=a.dataset.default;(e=e===I?i[0]:e.querySelector("#"+e)).classList.add("selected")}}},render(i,e){const s=T.createElement("div");let n=e.getOptions(i),o=e.getStyleVal(i.id);if(!0===i.color&&!0===i.transparent&&(n=n.slice()).push({img:"transparent",value:"transparent",label:e.label.transparent}),s.className="themify-layout-icon",!0===e.is_repeat?(s.className+=!0===e.is_sort?" tb_lb_sort_child":" tb_lb_option_child",s.dataset.inputId=i.id):(s.className+=" tb_lb_option",s.id=i.id),i.class!==I&&(s.className+=" "+i.class),o===I){const t="module"===O.activeModel.type?O.activeModel.getPreviewSettings():null;o=t&&t[i.id]!==I?t[i.id]:n[0].value}o=o.toString();for(let a=0,e=n.length;a<e;++a){let e=T.createElement("a"),t=T.createElement("span"),l;e.href="#",e.className="tfl-icon",e.id=n[a].value,o===n[a].value.toString()&&(e.className+=" selected"),t.className="themify_tooltip",t.textContent=n[a].label,"sprite"!==i.mode||n[a].img.includes(".png")?((l=T.createElement("img")).alt=n[a].label,l.src=n[a].img.includes("http")?n[a].img:L.builder_url+"editor/img/"+n[a].img):((l=T.createElement("span")).className="tb_sprite",n[a].img.includes("http")?l.style.backgroundImage="url("+n[a].img+")":l.className+=" tb_"+n[a].img),e.append(l,t),s.appendChild(e)}return this.controlChange(s),"row"!==e.component||"row_width"!==i.id&&"row_height"!==i.id?e.initControl(s,i):O.activeModel.options(s,i.type),s}},layoutPart:{data:[],async get(){if(0===this.data.length)try{O.Spinner.showLoader(),this.data=await O.LocalFetch({action:"tb_get_library_items"}),O.Spinner.showLoader("done")}catch(e){throw O.Spinner.showLoader("error"),e}},render(e,t){e.setOptions=!1;const a=t.values[e.id],l=T.createDocumentFragment(),i=t.select.render(e,t),s=T.createElement("a"),n=T.createElement("a"),o=i.querySelector("select");return this.get().then(()=>{const l=O.LayoutPart&&O.LayoutPart.id?O.LayoutPart.id.toString():null;o.appendChild(T.createElement("option"));for(let t=0,e=this.data.length;t<e;++t)if(l!==this.data[t].id.toString()){let e=T.createElement("option");e.value=this.data[t].post_name,e.textContent=this.data[t].post_title,a===this.data[t].post_name&&(e.selected=!0),o.appendChild(e)}}),l.append(i,T.createElement("br")),e.add_url&&(n.href=e.add_url,n.className="add_new tf_plus_icon tb_icon_btn tf_rel",n.appendChild(T.createTextNode(t.label.nlayout)),l.append(n)),e.edit_url&&(s.target=n.target="_blank",s.className="tb_icon_btn",s.href=e.edit_url,s.append(O.Helper.getIcon("ti-folder"),T.createTextNode(t.label.mlayout)),l.append(s)),l}},separator:{render(e,t){let l;const a=t.label[e.label]!==I?t.label[e.label]:e.label;if(a!==I){l=e.wrap_class!==I?T.createElement("div"):T.createDocumentFragment();const i=T.createElement("h4");i.textContent=a,l.append(T.createElement("hr"),i)}else if(e.html!==I){const s=T.createElement("div");s.innerHTML=e.html,l=s.firstChild}else l=T.createElement("hr");return e.wrap_class!==I&&(l.className=e.wrap_class),l}},multiColumns:{update(e,t,l){const a=l.getEl(e);null!==a&&(t!==I?a.value=t:a[0]!==I&&(a[0].selected=!0))},render(e,t){const l=[],a=e.id,i=e.selector,s=t.label,n=[{id:a+"_gap",label:s.c_g,type:"range",prop:"column-gap",selector:i,wrap_class:"tb_multi_columns_wrap",units:{px:{max:500}}},{type:"multi",wrap_class:"tb_multi_columns_wrap",label:s.c_d,options:[{type:"color",id:a+"_divider_color",prop:"column-rule-color",selector:i},{type:"range",id:a+"_divider_width",class:"tb_multi_columns_width",prop:"column-rule-width",selector:i,units:{px:{max:500}}},{type:"select",id:a+"_divider_style",options:t.getOptions("border"),prop:"column-rule-style",selector:i}]}];for(let e=0;e<7;++e)l[e]=0===e?"":e;e.options=l,e.binding={empty:{hide:"tb_multi_columns_wrap"},not_empty:{show:"tb_multi_columns_wrap"}};const o=O.Helper.cloneObject(e),r=(o.type="select",t.select.render(o,t)),c=r.querySelector("select");return t.afterRun.push(()=>{const e=c.closest(".tb_field");e.parentNode.insertBefore(t.create(n),e.nextElementSibling)}),e.label||(e.label="c_c"),r}},expand:{render(t,l){const e=T.createElement("fieldset"),a=T.createElement("div"),i=T.createElement("div"),s=l.label[t.label]!==I?l.label[t.label]:t.label;return e.className="tb_expand_wrap",i.className="tb_style_toggle tb_closed",a.className="tb_expanded_opttions",i.append(T.createTextNode(s),O.Helper.getIcon("ti-angle-up")),e.append(i,a),i.tfOn(L.click,function(e){e.preventDefault(),e.stopImmediatePropagation(),this.dataset.done===I&&(this.dataset.done=!0,a.appendChild(l.create(t.options)),"setting"===l.clicked&&l.setUpEditors(),l.callbacks(),L.trigger("tb_options_expand",a)),this.classList.toggle("tb_closed")}),l.afterRun.push(()=>{L.trigger("tb_options_expand",a)}),e}},gallery:{file_frame:null,cache:new Map,async init(e,a){let n;const i=wp.media.gallery.shortcode,t=a.value.trim(),o=e=>{const t=e.replace(/  +/g," ").match(/ids.*?=.(.+?)["']/gi);return t&&t[0]?t[0].replace("ids","").replace("=","").replaceAll(" ","").replace(/["']/g,"").trim().split(","):null},f=(e,t)=>e.replace(/  +/g," ").replace(/ids.*?=.(.+?)["']/gi,'ids="'+t+'"'),l=e=>{const t=e.target?e.target.closest(".tf_close[data-id]"):null;if(t){e.stopPropagation();const l=e.currentTarget.parentNode.tfTag("textarea")[0],a=l.value,i=o(a),s=i.indexOf(t.dataset.id);-1!==s&&(i.splice(s,1),t.parentNode.remove(),l.value=0<i.length?f(a,i.join(",")):"",n&&clearTimeout(n),n=setTimeout(()=>{L.triggerEvent(l,"change"),n=null},400))}},r=e=>{if(1===e.which){const i=e.target&&!e.target.classList.contains("tf_close")?e.target.closest(".tb_gal_item"):null;if(i){e.stopImmediatePropagation();let s,o,r,c,d,p,_,m,u;const h=i.ownerDocument,n=e=>{e.stopImmediatePropagation(),h.body.classList.add("tb_start_animate","tb_sort_start");const t=e.currentTarget,l=t.getBoundingClientRect(),a=t.parentNode;(o=i.cloneNode(!0)).classList.add("tb_gal_clone"),t.after(o),t.classList.add("tb_sort_handler"),r=a.getBoundingClientRect(),c=l.height/2-a.offsetTop,d=l.width/2-a.offsetLeft,b(e)},b=e=>{e.stopImmediatePropagation();let t=e.clientX,l=e.clientY;t<r.left?t=r.left:t>r.right&&(t=r.right),l<r.top?l=r.top:l>r.bottom&&(l=r.bottom);const a=h.elementFromPoint(t,l),i=t-d-r.left,s=l-c-r.top;if(e.currentTarget.style.transform="translate("+i+"px,"+s+"px)",a&&a!==e.currentTarget&&a.classList.contains("tb_gal_item")){const n=l>_||t>m?"bottom":"top";p===n&&u===a||("bottom"==n?a.after(o):a.before(o)),u=a,p=n}_=l,m=t},g=function(e){if(e.stopImmediatePropagation(),s&&cancelAnimationFrame(s),this.tfOff("pointermove",n,{passive:!0,once:!0}).tfOff("pointermove",b,{passive:!0}).tfOff("lostpointercapture pointerup",g,{passive:!0,once:!0}),h.body.classList.remove("tb_start_animate","tb_sort_start"),o){const t=this.closest(".tb_shortcode_preview"),l=t.tfClass("tf_close"),a=t.parentNode.tfTag("textarea")[0],i=[];this.remove(),o.classList.remove("tb_gal_clone");for(let e=0,t=l.length;e<t;++e)i.push(l[e].dataset.id);a.value=f(a.value,i.join(",")),L.triggerEvent(a,"change")}s=o=_=m=p=u=d=c=r=null};i.tfOn("lostpointercapture pointerup",g,{passive:!0,once:!0}).tfOn("pointermove",n,{passive:!0,once:!0}).tfOn("pointermove",b,{passive:!0}).setPointerCapture(e.pointerId)}}},s=i=>{const s=T.createDocumentFragment();let e=a.parentNode.tfClass("tb_shortcode_preview")[0];for(let a=0,e=i.length;a<e;++a)if(i[a]){let t=isNaN(i[a])?new Image(40,40):null,e=T.createElement("div"),l=T.createElement("button");e.className="tb_gal_item tf_loader tf_w tf_h tf_box tf_rel",l.type="button",l.className="tf_close",l.dataset.id=i[a].id||"";try{if(null!==t){if(t.decoding="async",i[a].attributes){let e=i[a].attributes;t.src=(e.sizes.thumbnail||e).url}else t.src=i[a].url;t.decode().catch(()=>{}).finally(()=>{e.append(l,t),e.classList.remove("tf_loader","tf_w","tf_h")})}s.appendChild(e)}catch(e){console.log(e)}}e===I?((e=T.createElement("div")).className="tb_shortcode_preview tf_scrollbar",e.tfOn(L.click,l,{passive:!0}).tfOn("pointerdown",r,{passive:!0}),a.after(e)):e.innerHTML="",e.appendChild(s)};if(0<t.length){let e=this.cache.get(t);if(!e){const c=o(t);c&&s(c);try{if(!(e=await O.LocalFetch({action:"tb_get_ajax_data",dataset:"gallery_shortcode",val:t})).success)throw"";e=e.data,this.cache.set(t,e)}catch(e){throw O.Spinner.showLoader("error"),e}}s(e)}e.tfOn(L.click,e=>{e.stopPropagation(),null===this.file_frame?(this.file_frame=wp.media.frames.file_frame=wp.media({frame:"post",state:"gallery-library",library:{type:"image"},title:wp.media.view.l10n.editGalleryTitle,editing:!0,multiple:!0,selection:!1}),this.file_frame.el.classList.add("themify_gallery_settings")):this.file_frame.options.selection.reset(),wp.media.gallery.shortcode=e=>{const t=e.props.toJSON(),l={};t.order&&(l.order=t.order),t.orderby&&(l.orderby=t.orderby),e.gallery&&Object.assign(l,e.gallery.toJSON()),l.ids=e.pluck("id"),t.uploadedTo&&(l.id=t.uploadedTo),l._orderbyRandom&&(l.orderby="rand",delete l._orderbyRandom),l.ids&&"post__in"===l.orderby&&delete l.orderby;for(let e in wp.media.gallery.defaults)wp.media.gallery.defaults[e]===l[e]&&delete l[e];delete l._orderByField;const a=new _.wp.shortcode({tag:"gallery",attrs:l,type:"single"});return wp.media.gallery.shortcode=i,a};const t=a.value.trim(),l=e=>{const t=wp.media.gallery.shortcode(e).string().slice(1,-1);a.value="["+t+"]",s(e.models),L.triggerEvent(a,"change")};0<t.length?(this.file_frame=wp.media.gallery.edit(t),this.file_frame.state("gallery-edit")):(this.file_frame.state("gallery-library"),this.file_frame.open(),this.file_frame.$el.find(".media-menu .media-menu-item").last().trigger("click")),this.file_frame.off("update",l).on("update",l)},{passive:!0})},render(e,t){const l=T.createDocumentFragment(),a=T.createElement("button");let i=e.class||"";return i+=" tb_shortcode_input",a.type="button",a.className="builder_button tb_gallery_btn",a.textContent=t.label.add_gallery,e.class=i,l.append(t.textarea.render(e,t),a),t.afterRun.push(()=>{this.init(a,a.previousElementSibling),!0===t.is_new&&"gallery"===t.type&&"setting"===t.clicked&&L.triggerEvent(a,L.click)}),l}},textarea:{render(e,t){const l=T.createDocumentFragment(),a=T.createElement("textarea"),i=t.getStyleVal(e.id),s=e.control&&e.control.event?e.control.event:"keyup";return!0===t.is_repeat?(a.className=!0===t.is_sort?"tb_lb_sort_child":"tb_lb_option_child",a.dataset.inputId=e.id):(a.className="tb_lb_option",a.id=e.id),e.class!==I&&(a.className+=" "+e.class),i!==I&&(a.value=i),e.rows!==I&&(a.rows=e.rows),e.readonly!==I&&e.readonly&&(a.readonly=1),l.appendChild(t.initControl(a,e)),e.codeeditor!==I&&O.Helper.codeMirror(a,e.codeeditor).then(e=>{e&&e.editor.on("change",()=>{L.triggerEvent(a,s)})}),e.after!==I&&l.appendChild(t.after(e)),e.description!==I&&l.appendChild(t.description(e.description)),l}},address:{render(e,t){return t.textarea.render(e,t)}},wp_editor:{render(e,t){const l=T.createElement("div"),a=T.createElement("div"),i=T.createElement("div"),s=T.createElement("button"),n=T.createElement("span"),o=T.createElement("div"),r=T.createElement("button"),c=T.createElement("button"),d=T.createElement("div"),p=T.createElement("div"),_=T.createElement("textarea");let m;return l.className="wp-core-ui wp-editor-wrap tmce-active",_.className="tb_lb_wp_editor fullwidth",!0===t.is_repeat?(m="tb_"+Math.random().toString(36).substr(2,7),_.className+=!0===t.is_sort?" tb_lb_sort_child":" tb_lb_option_child",_.dataset.inputId=e.id,!1!==e.control&&(e.control===I&&(e.control={}),e.control.repeat=!0)):(_.className+=" tb_lb_option",m=e.id),_.id=m,l.id="wp-"+m+"-wrap",a.id="wp-"+m+"-editor-tools",a.className="wp-editor-tools",i.id="wp-"+m+"-media-buttons",i.className="wp-media-buttons",s.type="button",s.className="button insert-media add_media",n.className="wp-media-buttons-icon",o.className="wp-editor-tabs",r.type="button",r.className="wp-switch-editor switch-tmce",r.id=m+"-tmce",r.dataset.wpEditorId=m,r.textContent=t.label.visual,c.type="button",c.className="wp-switch-editor switch-html",c.id=m+"-html",c.dataset.wpEditorId=m,c.textContent=t.label.text,d.id="wp-"+m+"-editor-container",d.className="wp-editor-container",p.id="qt_"+m+"_toolbar",p.className="quicktags-toolbar",e.class!==I&&(_.className+=" "+e.class),t.values[e.id]!==I&&(_.value=t.values[e.id]),_.rows=12,_.cols=40,d.append(_,p),o.append(r,c),s.append(n,T.createTextNode(t.label.add_media)),i.appendChild(s),a.append(i,o),l.append(a,d),t.editors.push({el:_,data:e}),l}},orderby_post:{render(e,t){let l=t.getStyleVal(e.id);return"meta_value_num"===l&&(t.values[e.id]="meta_value",t.values.meta_key_type="NUMERIC"),e.type="select",t.select.render(e,t)}},select:{cache:new Map,update(e,t,l){const a=l.getEl(e);null!==a&&(t!==I?a.value=t:a[0]!==I&&(a[0].selected=!0))},populate(e,l,a,i){if(e.optgroup){const s=a.getOptions(e);for(let t in s)if(s[t].label!==I){let e=T.createElement("optgroup");e.setAttribute("label",s[t].label),e.appendChild(this.make_options(s[t],i,a)),l.appendChild(e)}else l.appendChild(this.make_options(s[t],i,a))}else l.appendChild(this.make_options(e,i,a))},make_options(l,a,e){const i=T.createDocumentFragment(),s=e.getOptions(l)||l;for(let t in s){let e=T.createElement("option");e.value=t,e.text=s[t],I!==l.binding&&I!==l.binding[t]&&I!==l.binding[t].responsive&&I!==l.binding[t].responsive.disabled&&l.binding[t].responsive.disabled.includes(l.id)&&(e.className="tb_responsive_disable"),(Array.isArray(a)&&a.includes(t)||a===t||a===I&&t===l.default)&&(e.selected=!0),i.appendChild(e)}return i},render(e,l){const a=T.createElement("div"),i=T.createElement("select"),t=T.createDocumentFragment(),s=l.getStyleVal(e.id),n=e.dataset;if(a.className="selectwrapper tf_inline_b tf_vmiddle tf_rel",e.multiple&&(i.setAttribute("multiple",!0),a.className+=" multi"),!0===l.is_repeat?(i.className=!0===l.is_sort?"tb_lb_sort_child":"tb_lb_option_child",i.dataset.inputId=e.id):(i.className="tb_lb_option",i.id=e.id),i.className+=" tf_scrollbar",e.class!==I&&(i.className+=" "+e.class),!1!==e.setOptions)if(n!==I){let t=n;if(e.dataset_args&&(t+=JSON.stringify(e.dataset_args)),this.cache.has(t))this.populate(this.cache.get(t),i,l,s);else{const o={action:"tb_get_ajax_data",dataset:n};e.dataset_args&&(o.args=e.dataset_args),a.className+=" tf_lazy",O.LocalFetch(o).then(e=>{if(!e.success)throw"";this.cache.set(t,e.data),this.populate(e.data,i,l,s)}).catch(()=>{O.Spinner.showLoader("error")}).finally(()=>{a.classList.remove("tf_lazy")})}}else this.populate(e,i,l,s);return a.appendChild(l.initControl(i,e)),t.appendChild(a),e.after!==I&&t.appendChild(l.after(e)),e.description!==I&&t.appendChild(l.description(e.description)),e.tooltip!==I&&t.appendChild(l.hint(e.tooltip)),t}},font_select:{loaded_fonts:[],fonts:{},safe:{},google:{},cf:{},updateFontVariant(e,a,t,i){if(a){const s=this[i="webfont"===(i=""===i||i===I?I!==this.google[e]?"google":"cf":i)?"fonts":i][e]&&this[i][e].v?this[i][e].v:null;if(s&&0!==s.length){let l=t.getStyleVal(a.id);I===l&&(l="google"===i?"regular":"normal"),a.dataset.selected=e;while(null!==a.firstChild)a.removeChild(a.lastChild);a.closest(".tb_field").classList.remove("_tb_hide_binding");for(let t=0,e=s.length;t<e;++t){let e=T.createElement("option");e.value=e.textContent=s[t],s[t]===l&&(e.selected=!0),a.appendChild(e)}}else a.closest(".tb_field").classList.add("_tb_hide_binding")}},loadGoogleFonts(i){i=[...new Set(i.split("|"))];const s={google:[],cf:[]},n=[],e=()=>{for(let e=n.length-1;-1<e;--e)this.loaded_fonts.includes(n[e])||this.loaded_fonts.push(n[e]);L.trigger("tb_font_stylesheet_loaded",[this,n])};for(let a=i.length-1;-1<a;--a)if(i[a]&&!this.loaded_fonts.includes(i[a])&&(!s.google.includes(i[a])||!s.cf.includes(i[a]))){let t=i[a].split(":"),e="regular"===t[1]||"normal"===t[1]||"italic"===t[1]||parseInt(t[1])?t[1]:"400,700",l=t[0].split(" ").join("+")+":"+e;if(!this.loaded_fonts.includes(l)){let e=this.cf[t[0]]!==I?"cf":"google";l+="google"==e?":latin,latin-ext":"",s[e].push(l),n.push(l)}}if(0<s.google.length){const t=window.location.protocol+"//fonts.googleapis.com/css?family="+encodeURI(s.google.join("|"))+"&display=swap";L.loadCss(t,null,!1).then(e),"visual"===O.mode&&_.Themify.loadCss(t,null,!1)}if(0<s.cf.length){const l=themifyBuilder.cf_api_url+encodeURI(s.cf.join("|"));L.loadCss(l,null,!1).then(e),"visual"===O.mode&&_.Themify.loadCss(l,null,!1)}},controlChange(i,n,o,s){const r=this,e=$(i).comboSelect({comboClass:"themify-combo-select",comboArrowClass:"themify-combo-arrow",comboDropDownClass:"themify-combo-dropdown tf_scrollbar",inputClass:"themify-combo-input",disabledClass:"themify-combo-disabled",hoverClass:"themify-combo-hover",selectedClass:"themify-combo-selected",markerClass:"themify-combo-marker"}).parent("div");e[0].tfOn(L.click,function(e){const t=e.target;if(t.classList.contains("themify-combo-item")){const l=t.dataset.value,a=i.closest(".tb_tab");let e=this.querySelector('option[value="'+l+'"]');"webfont"!==(e=e&&e.dataset.type)&&l&&!r.loaded_fonts.includes(l)&&r.loadGoogleFonts(l),a&&r.updateFontVariant(l,a.tfClass("font-weight-select")[0],s,e),setTimeout(()=>{L.triggerEvent(i,"change")},10)}},{passive:!0}).tfOn("pointerover",function(e){const t=e.target;if(t.classList.contains("themify-combo-item")){let l=t.dataset.value;if(l&&$(t).is(":visible")&&("default"===l&&(l="inherit"),n.style.top=t.offsetTop-t.parentNode.scrollTop+30+"px",n.style.fontFamily=l,n.style.display="block","inherit"!==l)&&!t.classList.contains("tb_font_loaded")){t.classList.add("tb_font_loaded");const a=t.ownerDocument===_.document?"top":"bottom";if(r.fonts[a]===I&&(r.fonts[a]=[]),!r.fonts[a].includes(l)){const i=e=>{r.fonts[a].push(e),o.classList.remove("themify_show_wait")};let t=this.querySelector('option[value="'+l+'"]');if((t=t&&t.dataset.type)&&"webfont"!==t){let e="";if("google"===t?e=window.location.protocol+"//fonts.googleapis.com/css?family="+encodeURI(l)+"&display=swap":"cf"===t&&(e=themifyBuilder.cf_api_url+encodeURI(l)),""!==e){o.classList.add("themify_show_wait");const s="top"===a?_.Themify:L;s.loadCss(e,null,!1).then(i)}}else i(l)}t.style.fontFamily=l}}},{passive:!0}),e.trigger("comboselect:open").on("comboselect:close",()=>{n.style.display="none"}),e[0].tfClass("themify-combo-arrow")[0].tfOn(L.click,()=>{n.style.display="none"},{passive:!0})},update(e,t,l){const a=l.getEl(e);if(null!==a)if(t===I&&(t=""),a.value=t,this.updateFontVariant(t,a.closest(".tb_tab").tfClass("font-weight-select")[0],l),a.dataset.init===I){const i=a.tfTag("optgroup"),s=T.createElement("option");while(i[0].firstChild)i[0].removeChild(i[0].lastChild);while(i[1].firstChild)i[1].removeChild(i[1].lastChild);s.value=t,s.selected=!0,(this.safe[t]!==I?(s.textContent=this.safe[t],i[0]):this.google[t]!==I?(s.textContent=this.google[t].n,i[1]):this.cf[t]!==I?(s.textContent=this.cf[t].n,i[2]):(s.textContent=t,i[0])).appendChild(s)}else a.parentNode.tfClass("themify-combo-input")[0].value=t},render(a,i){const s=T.createElement("div"),e=T.createElement("select"),n=T.createElement("span"),o=T.createElement("span"),t=T.createDocumentFragment(),l=T.createElement("option"),r=i.getStyleVal(a.id),c=this,d={safe:i.label.safe_fonts,google:i.label.google_fonts},p=Object.keys(this.cf).length<1,_=(!1===p&&(d.cf=i.label.cf_fonts),s.className="tb_font_preview_wrapper selectwrapper",e.className="tb_lb_option font-family-select tf_scrollbar",e.id=a.id,n.className="tb_font_preview",o.textContent=i.label.font_preview,l.value="",l.textContent="---",t.appendChild(l),a.class!==I&&(e.className+=" "+a.class),["google","safe"]);!1===p&&_.push("cf");for(let a=_.length-1;-1<a;--a){let l=T.createElement("optgroup");if(l.label=d[_[a]],r!==I){let e=T.createElement("option"),t;e.value=r,e.selected=!0,t="cf"===_[a]&&this.cf[r]!==I?this.cf[r].n:"safe"===_[a]&&this.safe[r]!==I?this.safe[r]:"google"===_[a]&&this.google[r]!==I?this.google[r].n:I!==this.cf[r]?this.cf[r].n:r,e.textContent=t,l.appendChild(e)}t.appendChild(l)}const m=function(){this.tfOff("focusin tf_init",m,{once:!0,passive:!0});const l=c.safe,a=T.createDocumentFragment(),e=this.querySelector("select"),t=e.tfTag("optgroup");if(e.dataset.init=!0,r!==I)for(let e=t.length-1;-1<e;--e)while(t[e].firstChild)t[e].removeChild(t[e].lastChild);for(let t in l){let e=T.createElement("option");e.value=t,e.textContent=l[t],e.dataset.type="webfont",r===t&&(e.selected=!0),a.appendChild(e)}t[p?0:1].appendChild(a);const s=["google"];!1===p&&s.unshift("cf");for(let i=s.length-1;-1<i;--i){let l=c[s[i]],a=T.createDocumentFragment();for(let t in l){let e=T.createElement("option");e.value=t,e.dataset.type=s[i],e.textContent=l[t].n,r===t&&(e.selected=!0),a.appendChild(e)}t["cf"===s[i]?0:p?1:2].appendChild(a)}c.controlChange(e,n,o,i)};return s.tfOn("focusin tf_init",m,{once:!0,passive:!0}),e.appendChild(t),n.appendChild(o),s.append(i.initControl(e,a),n),i.afterRun.push(()=>{const e=i.create([{type:"select",label:"f_w",selector:a.selector,class:"font-weight-select",id:a.id+"_w",prop:"font-weight"}]),t=s.closest(".tb_field"),l=e.querySelector(".tb_field");t.parentNode.insertBefore(e,t.nextElementSibling),c.updateFontVariant(r,l.querySelector(".font-weight-select"),i)}),a.label||(a.label="f_f"),s}},animation_select:{render(e,t){const l=T.createElement("div"),i=T.createElement("select"),s=t.getOptions("preset_animation"),n=t.values[e.id];l.className="selectwrapper tf_inline_b tf_vmiddle tf_rel",i.className="tb_lb_option tf_scrollbar",i.id=e.id,i.appendChild(T.createElement("option"));for(let a in s){let l=T.createElement("optgroup");for(let t in s[l.label=a]){let e=T.createElement("option");e.value=t,e.text=s[a][t],n===t&&(e.selected=!0),l.appendChild(e)}i.appendChild(l)}return l.appendChild(i),l}},sticky:{render(e,t){const a={},i=O.activeModel.id,l=O.Helper.cloneObject(e),s=e.key,n=O.Registry.items;for(let e of n){let l=e[1];if(s===l.type&&l.id!==i){let e,t=l.get("styling");e="row"===s&&t&&(t.custom_css_id||t.row_anchor)?t.custom_css_id?"#"+t.custom_css_id:"#"+t.row_anchor:"module"===s&&t&&t.custom_css_id?"#"+t.custom_css_id:"row"===s?"Row #"+l.id:l.get("mod_name")+" #"+l.id,a[l.id]=e}}return l.options=a,t.select.render(l,t)}},selectSearch:{update(l,a,i){const s=T.createDocumentFragment();let n=null;if(a.removeAttribute("data-value"),a.value="",i!==I){for(let t in i){let e=T.createElement("div");null===n&&(n=t),e.dataset.value=t,e.className="tb_search_item",e.textContent=i[t],l===t&&(e.className+=" selected",a.dataset.value=t,a.value=i[t]),s.appendChild(e)}""===a.value&&null!==n&&(a.value=i[n],a.dataset.value=n)}return s},events(i,e){i.tfOn("keyup",function(){const l=e.tfClass("tb_search_item"),a=this.value.trim(),i=new RegExp(a,"i");for(let e=0,t=l.length;e<t;++e)l[e].style.display=""===a||i.test(l[e].textContent)?"block":"none"},{passive:!0}),e.tfOn("mousedown",function(e){if(1===e.which&&e.target.classList.contains("tb_search_item")){e.preventDefault(),e.stopPropagation();const t=this.tfClass("tb_search_item"),l=e.target;for(let e=t.length-1;-1<e;--e)t[e].classList.remove("selected");l.classList.add("selected");const a=l.dataset.value;i.value=l.textContent,i.dataset.value=a,i.blur(),i.previousElementSibling.blur(),L.triggerEvent(i,"selectElement",{val:a})}})},render(e,t){const l=T.createElement("div"),a=T.createElement("div"),i=T.createElement("input"),s=T.createElement("span"),n=T.createElement("div");return l.className="tb_search_wrapper",i.className="tb_search_input",i.autocomplete="off",n.className="tb_search_container tf_scrollbar",!0===t.is_repeat?(i.className+=!0===t.is_sort?" tb_lb_sort_child":" tb_lb_option_child",i.dataset.inputId=e.id):(i.className+=" tb_lb_option",i.id=e.id),e.class!==I&&(i.className+=" "+e.class),a.tabIndex=1,a.className="tb_search_arrow",s.className="tf_loader",n.tabIndex=1,i.type="text",i.placeholder=(e.placeholder!==I?e.placeholder:e.label)+"...",n.appendChild(this.update(t.values[e.id],i,e.options,t)),a.appendChild(s),l.append(a,t.initControl(i,e),n),e.after!==I&&l.appendChild(t.after(e)),e.description!==I&&l.appendChild(t.description(e.description)),e.tooltip!==I&&l.appendChild(t.hint(e.tooltip)),this.events(i,n),l}},optin_provider:{cache:null,render(e,t){const l=T.createElement("div"),a=()=>{const e=()=>{l.parentNode.closest(".tb_field").after(t.create([this.cache[1],this.cache[2]])),l.replaceWith(t.create([this.cache[0]]))};l.isConnected?e():t.afterRun.push(e)};return null===this.cache?(l.className="tf_loader",O.Spinner.showLoader(),O.LocalFetch({action:"tb_optin_get_settings"}).then(e=>{O.Spinner.showLoader("spinhide"),this.cache=e,a(),t.callbacks()}).catch(()=>{O.Spinner.showLoader("error")})):a(),l}},check_map_api:{render(e,t){if(themifyBuilder[e.map+"_api"])return T.createElement("span");{const l={type:"separator",html:"<span>"+themifyBuilder[e.map+"_api_err"]+"</span>",wrap_class:"tb_group_element_"+e.map};return t.separator.render(l,t)}}},query_posts:{cacheTypes:null,cacheTerms:new Map,render(y,v){let e,i;const w=this,C=y.description,x=y.after,k=v.values,d=t=>{const l={};for(let e in t)l[e]=t[e].name;return l},E=(e,t,l)=>{const a=e.nextElementSibling;while(null!==a.firstChild)a.lastChild.remove();a.appendChild(v.selectSearch.update(t,e,l,v))},N=(e,t,l,a)=>(i&&i.abort(),e.classList.add("tb_search_wait"),i=new AbortController,O.LocalFetch({action:"tb_get_post_types",type:l,v:t,s:a||"",all:y.all||""},!1,{signal:i.signal}).finally(()=>{i=null,e.classList.remove("tb_search_wait")}));let p=O.Helper.cloneObject(y),S=null;return(e=T.createElement("div")).id=y.id||y.term_id,v.afterRun.push(()=>{let n=["id","tax_id","term_id","tag_id"],o=T.createDocumentFragment(),f=null,r=async(l,a,i,s)=>{try{const e=i?a+"_"+i:a;let t=w.cacheTerms.get(e);if(t||(t=await N(l.parentNode,a,"terms",i),w.cacheTerms.set(e,t)),y.term_id!==I||y.tag_id!==I){if(y.all){const r=l.closest("."+y.id),c="All"===r.querySelector("#"+y.id).value,d=r.querySelectorAll("."+y.tax_id+",."+y.term_id+",."+y.tag_id);for(let e=d.length-1;-1<e;--e)d[e].classList.toggle("tf_hide",c)}const n=y.tag_id===I?y.term_id.replace("#tmp_id#",a):y.tag_id,o=l.closest(".tb_input");let e;if(l.id=n,e=(e=null===f&&k[n]!==I?k[n].split("|")[0]:e)||0,E(l,e,t),!i&&""!==i||(l.value=i),null===f){const p=T.createElement("input"),_=T.createElement("span"),m=T.createElement("div");if(_.innerHTML=v.label.or,p.type="text",p.className="query_category_multiple",m.className="tb_query_multiple_wrap",m.append(_,p),o.insertBefore(m,o.nextSibling),x!==I&&o.appendChild(v.after(x)),C!==I&&o.appendChild(v.description(C)),y.slug_id!==I){const u=o.parentNode,h=v.create([{type:"radio",id:"term_type",label:v.label.query_by,default:k.term_type===I&&"post_slug"===k[y.tax_id]?"post_slug":"category",option_js:!0,options:[{value:"all",name:v.label.all_posts},{value:"category",name:v.label.query_term_id},{value:"post_slug",name:v.label.slug_label}]}]),b=v.create([{id:y.slug_id,type:"text",class:"large",wrap_class:"tb_group_element_post_slug",help:v.label.slug_desc,label:v.label.slug_label}]);u.parentNode.insertBefore(h,u),u.parentNode.appendChild(b)}if(y.sticky_id!==I){const g=v.create([{type:"toggle_switch",label:v.label.sticky_first,id:y.sticky_id,options:"simple",wrap_class:"tb_group_element_all"}]);o.parentNode.parentNode.appendChild(g)}p.tfOn("change",()=>{L.triggerEvent(l,"queryPosts",{val:e})},{passive:!0}),null!==S&&clearTimeout(S),S=setTimeout(()=>{v.callbacks()},2)}s||(o.tfClass("query_category_multiple")[0].value=e,!0===f||v.is_new?L.triggerEvent(l,"queryPosts",{val:e}):ThemifyConstructor.settings=O.Helper.clear(O.Forms.serialize("tb_options_setting"))),f=!0}}catch(e){}};for(let s=0,e=n.length;s<e;++s)if(p[n[s]]){p.id=p[n[s]],p.label=v.label["query_"+n[s]],p.type="selectSearch","term_id"===n[s]?(p.wrap_class="tb_search_term_wrap tb_group_element_category",p.class="query_category_single",p.help=v.label.query_desc,p.control={control_type:"queryPosts"}):"tax_id"!==n[s]&&"tag_id"!==n[s]||p.term_id!==I||(p.control={control_type:"queryPosts"}),delete p.description,delete p.after;let e=v.create([p]),a=(!0===y.just_current&&delete p.wrap_class,"id"===n[s]),i="term_id"===n[s]||"tag_id"===n[s],t=i?"":k[p.id],l=e.querySelector(".tb_search_input");if(l.tfOn("selectElement",function(e){let t=e.detail.val,l=this.closest(".tb_field");i?(l.tfClass("query_category_multiple")[0].value=t,L.triggerEvent(this,"queryPosts",{val:t})):null!==l.nextElementSibling?(l=l.nextElementSibling,null!==(l=a||!0!==f||y.slug_id===I?l:l.nextElementSibling)&&(l=l.tfClass("tb_search_input")[0],a?w.cacheTypes[t]!==I&&(!0===y.just_current&&"tag"===k[y.tax_id]&&(k[y.tax_id]="post_tag"),E(l,k[y.tax_id],d(w.cacheTypes[t].options)),L.triggerEvent(l,"selectElement",{val:l.dataset.value})):(r(l,t),l.tfOn("input",function(){setTimeout(()=>{r(l,t,this.value.trim(),!0)},500)},{passive:!0})))):a||L.triggerEvent(this,"queryPosts",{val:this.dataset.value})},{passive:!0}),a){const c=()=>{t=t||"post",E(l,t,d(w.cacheTypes)),L.triggerEvent(l,"selectElement",{val:t}),l=null};null===w.cacheTypes?N(l.parentNode,null,"post_types").then(e=>{w.cacheTypes=e,!0===y.just_current&&I==t&&(t=Object.keys(e)),c()}):setTimeout(c,10)}else i&&!y.id&&y.taxonomy!==I&&(r(l,y.taxonomy),l.tfOn("input",function(){setTimeout(()=>{r(l,y.taxonomy,this.value.trim(),!0)},500)},{passive:!0}));o.appendChild(e)}if(p.query_filter){let e=v.create([{type:"multi",label:v.label.aq[0],id:"query_date",options:[{id:"query_date_from",label:v.label.aq[1],type:"date",timepicker:!1},{id:"query_date_to",label:v.label.aq[2],type:"date",timepicker:!1}],wrap_class:"tb_query_filter"+(v.values.query_date_from||v.values.query_date_to?"":" tf_hide")},{type:"autocomplete",dataset:"authors",id:"query_authors",label:v.label.aq[7],wrap_class:"tb_query_filter"+(v.values.query_authors?"":" tf_hide"),help:v.label.aq[9]},{type:"multi",label:v.label.aq[3],id:"query_cf",options:[{type:"autocomplete",dataset:"custom_fields",id:"query_cf_key",label:v.label.aq[4]},{id:"query_cf_value",label:v.label.aq[5],type:"text"},{id:"query_cf_c",label:v.label.aq[6],type:"select",options:{"":"LIKE","NOT LIKE":"NOT LIKE",EXISTS:"EXISTS","NOT EXISTS":"NOT EXISTS","=":"=","!=":"!=",">":">",">=":">=","<":"<","<=":"<="}}],wrap_class:"tb_query_filter"+(v.values.query_cf_key?"":" tf_hide")}]),t=(o.appendChild(e),v.values.query_cf_key&&v.values.query_authors&&(v.values.query_date_from||v.values.query_date_to));if(!t){let l=T.createElement("div"),e=T.createElement("div"),t=T.createElement("div"),a=T.createElement("ul"),i=T.createElement("div"),s=T.createElement("span");if(!v.values.query_date_from&&!v.values.query_date_to){let e=T.createElement("li");e.innerText=v.label.aq[0],e.dataset.id="query_date",a.appendChild(e)}if(!v.values.query_authors){let e=T.createElement("li");e.innerText=v.label.aq[7],e.dataset.id="query_authors",a.appendChild(e)}if(!v.values.query_cf_key){let e=T.createElement("li");e.innerText=v.label.aq[3],e.dataset.id="query_cf",a.appendChild(e)}l.className="tb_field",e.className="tb_input tf_rel",i.className="tb_label tb_empty_label",t.tabIndex="-1",t.className="tb_ui_dropdown_label tb_sort_fields_plus tf_plus_icon",a.className="tb_ui_dropdown_items tf_scrollbar",s.innerText=v.label.aq[8],t.appendChild(s),l.append(i,e),e.append(t,a),o.appendChild(l),a.tfOn(L.click,function(t){if("LI"===t.target.tagName){t.preventDefault(),t.stopPropagation();let e=t.target.dataset.id;this.closest('.tb_field[data-type="query_posts"], .tb_field[data-type="advanced_posts_query"]').querySelector("."+e).classList.remove("tf_hide"),t.target.style.display="none",t.target.removeAttribute("data-id"),this.querySelector("[data-id]")||l.classList.add("tf_hide")}})}}e.parentNode.replaceChild(o,e),p=e=null}),e}},hook_content:{render(e,t){return t.create([{type:"group",label:t.label.hc[0],display:"accordion",options:[{id:"hook_content",type:"builder",options:[{type:"select",id:"h",options:e.options,after:t.label.hc[1]},{type:"textarea",id:"c",wrap_class:"tb_disable_dc",class:"fullwidth"}]}]}])}},position_box:{w:null,h:null,update(e,t,l){const a=l.getEl(e)||O.LightBox.el.querySelector('[data-input-id="'+e+'"]');if(null!==a){const i=a.closest(".tb_position_box_wrapper"),s=i.tfClass("tb_position_box_handle")[0],n=i.tfClass("tb_position_box_label")[0],o=this.getPreDefinedPositions();t?o[t]!==I&&(t=o[t]):t="50,50",a.value=t,n.textContent=this.getLabel(t),t=t.split(","),s.style.left=Math.ceil(t[0]*this.w/100)+"px",s.style.top=Math.ceil(t[1]*this.h/100)+"px"}},getLabel(e){let t,l=ThemifyConstructor.label;switch(e){case"0,0":t=l.top+" "+l.left;break;case"50,0":t=l.top+" "+l.center;break;case"100,0":t=l.top+" "+l.right;break;case"0,50":t=l.center+" "+l.left;break;case"50,50":t=l.center+" "+l.center;break;case"100,50":t=l.center+" "+l.right;break;case"0,100":t=l.bottom+" "+l.left;break;case"50,100":t=l.bottom+" "+l.center;break;case"100,100":t=l.bottom+" "+l.right;break;default:const a=e.split(",");t=""===a[0]?"Center Center":"X:"+a[0]+"% Y:"+a[1]+"%";break}return t},getPreDefinedPositions(){return{"right-top":"100,0","right-center":"100,50","right-bottom":"100,100","left-top":"0,0","left-center":"0,50","left-bottom":"0,100","center-top":"50,0","center-center":"50,50","center-bottom":"50,100"}},click(e){e.stopPropagation();let t,l,a=e.currentTarget.previousElementSibling,i=e.target.closest(".tb_position_item");if(i){const s=i.dataset.pos.split(",");t=s[0],l=s[1],"50"===t?t=this.w/2:"100"===t&&(t=this.w),"50"===l?l=this.h/2:"100"===l&&(l=this.h)}else t=e.offsetX,l=e.offsetY;a.style.left=t+"px",a.style.top=l+"px",this.changeUpdate(a,t,l)},changeUpdate(e,t,l){const a=+(t/this.w*100).toFixed(2),i=+(l/this.h*100).toFixed(2),s=e.closest(".tb_position_box_wrapper").tfClass("tb_position_box_label")[0],n=s.nextElementSibling;n.value=a+","+i,s.textContent=this.getLabel(a+","+i),L.triggerEvent(n,"change")},render(t,l){const p=this,s=this.getPreDefinedPositions(),a=l.getStyleVal(t.id),e=T.createElement("div"),i=T.createElement("div"),n=T.createElement("div"),o=T.createElement("div"),r=T.createElement("div"),c=l.hidden.render(t,l);e.className="tb_position_box_wrapper",i.className="tb_position_box_container tf_rel",n.className="tb_position_box tf_rel",o.className="tb_position_box_handle",r.className="tb_position_box_label";for(let i in s){let e=T.createElement("div"),t=T.createElement("span"),l=T.createElement("span"),a=s[i].split(",");t.className="themify_tooltip",l.textContent=this.getLabel(s[i]),e.className="tb_position_item",e.dataset.pos=s[i],e.style.left=a[0]+"%",e.style.top=a[1]+"%",t.appendChild(l),e.appendChild(t),n.appendChild(e)}return o.tfOn("pointerdown",function(e){if(1===e.which){e.stopImmediatePropagation();let t;const l=this.ownerDocument,a=this,i=this.offsetLeft-e.clientX,s=this.offsetTop-e.clientY,n=p.w,o=p.h,r=()=>{l.body.classList.add("tb_start_animate")},c=l=>{l.stopImmediatePropagation(),t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{let e=i+l.clientX,t=s+l.clientY;e>n?e=n:e<0&&(e=0),t>o?t=o:t<0&&(t=0),a.style.left=e+"px",a.style.top=t+"px",p.changeUpdate(a,e,t)})},d=function(e){e.stopImmediatePropagation(),t&&cancelAnimationFrame(t),this.tfOff("pointermove",r,{passive:!0,once:!0}).tfOff("pointermove",c,{passive:!0}).tfOff("lostpointercapture pointerup",d,{passive:!0,once:!0}),l.body.classList.remove("tb_start_animate"),t=null};this.tfOn("lostpointercapture pointerup",d,{passive:!0,once:!0}).tfOn("pointermove",r,{passive:!0,once:!0}).tfOn("pointermove",c,{passive:!0}).setPointerCapture(e.pointerId)}},{passive:!0}),n.tfOn(L.click,e=>{this.click(e)},{passive:!0}),i.append(o,n),e.appendChild(i),t.after!==I&&e.appendChild(l.after(t)),e.append(r,c),l.afterRun.push(()=>{setTimeout(()=>{const e=getComputedStyle(n);p.w=parseInt(e.getPropertyValue("width")),p.h=parseInt(e.getPropertyValue("height")),p.update(t.id,a,l)},700)}),t.label||(t.label="b_p"),t.wrap_class||"background-position"!==t.prop||(t.wrap_class="tb_group_element_image tb_image_options"),e}},slider_range:{render(e,t){const l=T.createElement("div"),a=T.createElement("div"),r=T.createElement("input"),c=T.createElement("input"),d=T.createElement("output"),p=T.createElement("output"),_=t.hidden.render(e,t),i=T.createDocumentFragment(),s=_.value;let n=0,o=100,m="%",u=!0,h=1,b="--tb_slider_before:",g=1,f=!1;if(e.options!==I&&(e.options.min!==I&&(n=e.options.min),e.options.max!==I&&(o=e.options.max),e.options.unit!==I&&(m=e.options.unit),e.options.range!==I&&(u=!1),e.options.default!==I&&(h=e.options.default),e.options.step!==I&&(g=e.options.step),f=!!e.options.inputRange),l.className="tb_slider_container tf_w",n=parseFloat(n),o=parseFloat(o),r.type=c.type="range",r.min=c.min=n,r.step=c.step=g,r.max=c.max=o,d.className=p.className="tb_slider_output",d.className+=" tb_slider_output_high",m&&(d.dataset.unit=p.dataset.unit=m),a.tfOn("input",e=>{const t=e.target,l=t===r?"before":"after",a=c.isConnected?parseFloat(c.value):"",i=e.currentTarget,s="before"==l?d:p,n=parseFloat(r.value),o="before"==l?n:a;requestAnimationFrame(()=>{let e=n;""!==a&&(e=n>a?a+","+n:n+","+a),_.value=e,!1!==f&&(f.value=e),s.dataset["slider_"+l]=o,i.style.setProperty("--tb_slider_"+l,o),L.triggerEvent(_,"change")})},{passive:!0}).className="tb_slider_wrapper tf_rel tf_w",a.tabIndex="-1",u){const y=s?s.split(","):[n,o];y[0]=parseFloat(y[0]),y[0]=y[0]>o?o:y[0]<n?n:y[0],y[1]===I?y[1]=y[0]:(y[1]=parseFloat(y[1]),y[1]=y[1]>o?o:y[1]<n?n:y[1]),p.dataset.slider_after=c.value=y[0],d.dataset.slider_before=r.value=y[1],p.className+=" tb_slider_output_low",b+=y[1]+";--tb_slider_after:"+y[0],a.append(c,p)}else{let e=s||h;e.toString().includes(",")&&(e=e.split(",")[0]),e=(e=parseFloat(e))>o?o:e<n?n:e,d.dataset.slider_before=r.value=e,b+=e,a.className+=" tb_slider_wrapper_single"}if(e.wrap_class!==I&&(a.className+=" "+e.wrap_class),0<n&&(b+=";--tb_slider_min:"+n),100!==o&&(b+=";--tb_slider_max:"+o),a.style=b,a.append(r,d,_),i.appendChild(a),!0===f){const v=O.Helper.cloneObject(e),w=v.options;Object.assign(v,w),v.id=v.class=v.options="",v.increment=v.step,(f=t.range.render(v,t).querySelector(".tb_range")).tfOn("change",e=>{r.value=e.currentTarget.value,L.triggerEvent(r,"input")},{passive:!0}),f.value=r.value,i.appendChild(f)}return l.appendChild(i),l}},range:{update(e,t,l){const a=l.getEl(e);if(null!==a){t===I&&(t=""),a.value=t;const i=e+"_unit",s=l.getEl(i);if(null!==s&&"SELECT"===s.tagName){let e=l.getStyleVal(i);e===I&&(e=s[0].value),s.value=e,this.setData(a,-1!==s.selectedIndex?s[s.selectedIndex]:s[0])}else{const n=a.parentNode.tfClass("tb_angle_dot")[0];n&&(n.style.transform=""===t?"":"rotate("+t+"deg)")}}},setMinMax(e,t,l,a){let i=parseFloat(e.value.trim());(i>parseFloat(l)||i<parseFloat(t))&&(i=i>parseFloat(l)?l:t,e.value=a%1!=0?parseFloat(i).toFixed(1).toString():parseInt(i))},setData(e,t){const l=t.dataset.min,a=t.dataset.max,i=t.dataset.increment;e.min=l,e.max=a,e.step=i,this.setMinMax(e,l,a,i)},controlChange(e,t,h){const l=t!==I&&"SELECT"===t.tagName,a=this;e.tfOn("pointerdown",function(e){if(1===e.which){this.classList.contains("tb_angle_input")&&!this.parentNode.tfClass("tb_angle_circle")[0]||e.stopImmediatePropagation();let l=e.clientY,a,i=null;const t=this.ownerDocument,s=this.value,n=parseFloat(this.max),o=parseFloat(this.min),r=this.step||1,c=r%1!=0,d=(c?parseFloat:parseInt)(r),p=e=>{let t=this.value||0,l=(c?parseFloat:parseInt)(t),a;a="increase"===e?l>=n?n:l+d:l<=o?o:l-d,this.value=+a.toFixed(2),(i=null===i?this.parentNode.tfClass("tb_angle_dot")[0]:i)&&(i.style.transform="rotate("+a+"deg)")},_=e=>{e.stopPropagation(),t.body.classList.add("tb_start_animate","tb_move_drag")},m=t=>{t.stopImmediatePropagation(),a&&cancelAnimationFrame(a),a=requestAnimationFrame(()=>{const e=t.clientY;e<l?p("increase"):e>l&&p("decrease"),l=e,L.triggerEvent(this,h)})},u=function(e){e.stopImmediatePropagation(),this.tfOff("pointermove",m,{passive:!0}).tfOff("pointermove",_,{once:!0,passive:!0}).tfOff("lostpointercapture pointerup",u,{once:!0,passive:!0}),a&&cancelAnimationFrame(a),a=l=i=null,this.value!==s&&(L.triggerEvent(this,h),"change"!==h)&&L.triggerEvent(this,"change"),t.body.classList.remove("tb_start_animate","tb_move_drag")};this.tfOn("lostpointercapture pointerup",u,{once:!0,passive:!0}).tfOn("pointermove",_,{once:!0,passive:!0}).tfOn("pointermove",m,{passive:!0}).setPointerCapture(e.pointerId)}},{passive:!0}),!0==l&&t.tfOn("change",function(){a.setData(e,this.options[this.selectedIndex]),L.triggerEvent(e,h)},{passive:!0}),t!==I&&this.setData(e,l?-1!==t.selectedIndex?t[t.selectedIndex]:t[0]:t),e.tfOn("change",()=>{this.setMinMax(e,e.min,e.max,e.step)},{passive:!0})},render(l,t){const e=T.createElement("div"),a=T.createElement("div"),i=T.createElement("input");let s=l.value!==I?l.value:t.getStyleVal(l.id),n;if(s=s===I?"":parseFloat(s),e.className="tb_tooltip_container tf_rel",l.wrap_class!==I&&(e.className=" "+l.wrap_class),a.className="tb_range_input tf_inline_b tf_rel",i.autocomplete="off",i.type="number",i.className="tb_range",s!==I&&(i.value=s),l.placeholder!==I&&(i.placeholder=l.placeholder),!0===t.is_repeat?(i.className+=!0===t.is_sort?" tb_lb_sort_child":" tb_lb_option_child",i.dataset.inputId=l.id):(i.className+=" tb_lb_option",i.id=l.id),l.class!==I&&(i.className+=" "+l.class),a.appendChild(i),l.tooltip!==I&&a.appendChild(t.hint(l.tooltip)),e.appendChild(a),!0===l.deg||l.units===I)i.min=l.min||0,i.max=!0===l.deg?360:l.max||1500,i.step=l.increment||1;else{const c=T.createElement("div"),d=Object.keys(l.units);if(c.className="selectwrapper noborder",1<d.length){const p=l.unit!==I?l.unit:t.getStyleVal(l.id+"_unit"),_=l.id+"_unit";(n=T.createElement("select")).className="tb_unit",!0===t.is_repeat?(n.className+=!0===t.is_sort?" tb_lb_sort_child":" tb_lb_option_child",n.dataset.inputId=_):(n.className+=" tb_lb_option",n.id=_),l.select_class!==I&&(n.className+=" "+l.select_class);for(let t in l.units){let e=T.createElement("option");l.units[t]||(l.units[t]={}),l.units[t].min||(l.units[t].min=0),l.units[t].max||(l.units[t].max=100),i.min=parseInt(l.units[t].min),i.max=parseInt(l.units[t].max),e.value=t,e.textContent=t,e.dataset.min=l.units[t].min,e.dataset.max=l.units[t].max,e.dataset.increment=l.units[t].increment!==I?l.units[t].increment:"em"===t||"em"===t?.1:1,p===t&&(e.selected=!0),n.appendChild(e)}t.initControl(n,{type:"select",id:_,control:l.control})}else{const m=d[0];l.units[m]||(l.units[m]={}),l.units[m].min||(l.units[m].min=0),l.units[m].max||(l.units[m].max=100),i.min=parseFloat(l.units[m].min),i.max=parseFloat(l.units[m].max),i.step=l.units[m].increment!==I?parseFloat(l.units[m].increment):"1",s<parseFloat(l.units[m].min)?i.value=l.units[m].min:s>parseFloat(l.units[m].max)&&(i.value=l.units[m].max),(n=T.createElement("span")).className="tb_unit",n.id=l.id+"_unit",n.dataset.min=l.units[m].min,n.dataset.max=l.units[m].max,n.dataset.increment=l.units[m].increment!==I?l.units[m].increment:"em"===m?.1:1,n.textContent=m}c.appendChild(n),a.appendChild(c)}l.after!==I&&e.appendChild(t.after(l)),l.description!==I&&e.appendChild(t.description(l.description));const o=l.event!==I?l.event:"styling"===t.clicked?"keyup":"change",r=(!0===l.opposite&&n.tfOn("change",function(e){e.stopPropagation(),t.margin.changeUnit(this,t)},{passive:!0}),this.controlChange(i,n,o),O.Helper.cloneObject(l));return!0===l.opposite&&i.tfOn(o,function(e){e.stopPropagation(),t.margin.changeOppositive(this)},{passive:!0}),r.type="range",t.initControl(i,r),e}},icon:{render(e,t){const l=T.createElement("div"),a=T.createElement("input"),i=T.createElement("span"),s=T.createElement("span"),n=t.getStyleVal(e.id);return a.type="text",a.className="themify_field_icon",i.className="tf_plus_icon themify_fa_toggle",l.className="tb_icon_wrap",s.className="tb_clear_input tf_close",!0===t.is_repeat?(a.className+=!0===t.is_sort?" tb_lb_sort_child":" tb_lb_option_child",a.dataset.inputId=e.id):(a.className+=" tb_lb_option",a.id=e.id),e.class!==I&&(a.className+=" "+e.class),n!==I?(a.value=n,i.appendChild(O.Helper.getIcon(n)),t.afterRun.push(()=>{setTimeout(()=>{_.Themify.fonts(n)},100)})):i.className+=" default_icon",s.tfOn(L.click,e=>{e.stopPropagation(),a.value="",L.triggerEvent(a,"change")},{passive:!0}),l.append(t.initControl(a,e),i,s),l}},createMarginPadding(e,s){const t=this.label,n=s.options||[{id:"top",label:t.top},{id:"bottom",label:t.bottom},{id:"left",label:t.left},{id:"right",label:t.right}],l=T.createElement("ul"),o=this,r=s.id,c="border_radius"===e,d=O.Helper.cloneObject(s);d.units=s.units!==I?s.units:{px:{min:"margin"===e?-1500:0,max:1500},em:{min:"margin"===e?-10:0,max:10},"%":{min:"margin"===e?-100:0}},d.prop=null,d.opposite=!0,l.className="tb_seperate_items tb_has_opposite",!0==c&&(l.dataset.toptext=n[0].label);let a=n.length,p=T.createDocumentFragment(),_=!1;for(let i=0;i<a;++i){let e=T.createElement("li"),t=r+"_"+n[i].id,l=(d.id=t,d.tooltip=n[i].label,d.class=s.class===I?"":s.class,d.class+=" tb_multi_field tb_range_"+n[i].id,!0==c&&(d.class+=" tb_is_border_radius"),this.range.render(d,this));if(0!==i&&3!==i){let e=T.createElement("li"),t="right"===n[i].id?"top":n[i].id,l=(e.className="tb_seperate_opposite tb_opposite_"+("bottom"===t?"top":t),e.appendChild(this.checkboxGenerate("checkbox",{id:r+"_opp_"+t,class:"style_apply_oppositive",options:[{name:"1",value:""}]})),e.querySelector(".style_apply_oppositive")),a=T.createElement("div");a.className="tb_oppositive_state",l.parentNode.insertBefore(a,l.nextSibling),l.tfOn("change",function(e){e.stopPropagation(),o.margin.bindingOppositive(this,!0)},{passive:!0}),!0===l.checked&&o.afterRun.push(()=>{o.margin.bindingOppositive(l)}),p.appendChild(e)}e.appendChild(l),p.appendChild(e);let a;!0==c?(a="border-","top"===n[i].id?a+="top-left-radius":"right"===n[i].id?a+="top-right-radius":"left"===n[i].id?a+="bottom-left-radius":"bottom"===n[i].id&&(a+="bottom-right-radius")):"transform"===s.type?a=s.prop:(a=s.prop+"-"+n[i].id,!0===this.is_new&&!_&&this.values[t]&&(_=!0)),this.styles[t]={prop:a,selector:s.selector}}if(l.appendChild(p),(p=T.createDocumentFragment()).appendChild(l),4===a){p.appendChild(o.checkboxGenerate("icon_checkbox",{id:"checkbox_"+r+"_apply_all",class:"style_apply_all",options:[{name:"1",value:o.label.all,icon:'<span class="apply_all_checkbox_icon">'+O.Helper.getIcon("ti-link").outerHTML+"</span>"}],default:("module"===this.component&&!0===this.is_new&&!_||0===Object.keys(this.values).length)&&"1"}));const i=p.querySelector(".style_apply_all");i.tfOn("change",function(){o.margin.apply_all(this,!0)},{passive:!0}),!0===i.checked&&o.afterRun.push(()=>{o.margin.apply_all(i)})}return p},margin_opposity:{update(e,t,l){l.range.update(e,t,l),l.checkbox.update(e+"_opp_top",l.getStyleVal(e+"_opp_top"),l),l.range.update(l.stylesData[e].bottomId,l.getStyleVal(l.stylesData[e].bottomId),l)},render(l,a){const i=["topId","bottomId"],s=T.createElement("ul"),n=O.Helper.cloneObject(l),o={px:{min:-1e3,max:1e3},em:{min:-50,max:50},"%":{min:-100}};s.className="tb_seperate_items tf_inline_b tb_has_opposite";for(let t=0;t<2;++t){let e=T.createElement("li");if(n.id=l[i[t]],n.prop="topId"===i[t]?"margin-top":"margin-bottom",n.class="tb_multi_field tb_range_"+("topId"===i[t]?"top":"bottom"),n.opposite=!0,n.units=o,n.tooltip="topId"===i[t]?a.label.top:a.label.bottom,e.appendChild(a.range.render(n,a)),s.appendChild(e),0===t){let e=T.createElement("li"),t=(e.className="tb_seperate_opposite tb_opposite_top",e.appendChild(a.checkboxGenerate("checkbox",{id:n.id+"_opp_top",class:"style_apply_oppositive",options:[{name:"1",value:""}]})),e.querySelector(".style_apply_oppositive")),l=T.createElement("div");l.className="tb_oppositive_state",t.parentNode.insertBefore(l,t.nextSibling),t.tfOn("change",function(e){e.stopPropagation(),a.margin.bindingOppositive(this,!0)},{passive:!0}),s.appendChild(e)}a.stylesData[l[i[t]]]=a.styles[l[i[t]]]={id:l[i[t]],type:l.type,prop:"topId"===i[t]?"margin-top":"margin-bottom",selector:l.selector}}return l.label||(l.label="m"),s}},margin:{bindingOppositive(e,t){const l=e.closest(".tb_seperate_opposite"),a=l.parentNode,i=l.classList.contains("tb_opposite_left"),s=!0===i?l.nextElementSibling:l.previousElementSibling,n=!0===e.checked,o=this.getOppositiveDir(s.tfClass("tb_range")[0]),r=a.tfClass("tb_range_"+o)[0],c=r.closest("li").tfClass("tb_unit")[0];if(!0==n){if(r.dataset.v=r.value,c.dataset.u=c.value,!0===t){const d=s.tfClass("tb_range")[0],p=d.value,_=r.value;""!==p||""===_?(r.value=p,c.value=s.tfClass("tb_unit")[0].value):(d.value=_,s.tfClass("tb_unit")[0].value=c.value)}}else{const m=r.dataset.v;r.value=m===I||null===m?"":m,c.value=c.dataset.u}!0===t&&L.triggerEvent(r,"keyup")},changeUnit(e,t){const l=e.closest(".tb_has_opposite");if(!l.hasAttribute("data-checked")){const a=t.getEl(e.id.replace(/_unit$/gi,"")),i=this.getOppositiveDir(a),s=a.classList.contains("tb_is_border_radius"),n="top"===i||!0===s&&"right"===i||!1===s&&"bottom"===i?"top":"left";!0===l.tfClass("tb_opposite_"+n)[0].tfClass("style_apply_oppositive")[0].checked&&(l.tfClass("tb_range_"+i)[0].closest("li").tfClass("tb_unit")[0].value=e.value)}},getOppositiveDir(e){const t=e.classList;let l=t.contains("tb_range_top")?"bottom":t.contains("tb_range_bottom")?"top":t.contains("tb_range_left")?"right":"left";return l=t.contains("tb_is_border_radius")?"bottom"===l?"right":"top"===l?"left":"left"===l?"top":"bottom":l},changeOppositive(e){const t=e.closest("li"),l=t.parentNode;if(!l.hasAttribute("data-checked")){const a=this.getOppositiveDir(e),i=e.classList.contains("tb_is_border_radius"),s=("top"===a||!0===i&&"right"===a||!1===i&&"bottom"===a?l.tfClass("tb_opposite_top"):l.tfClass("tb_opposite_left"))[0];!0===s.tfClass("style_apply_oppositive")[0].checked&&(l.tfClass("tb_range_"+a)[0].value=e.value)}},apply_all(e,t){const l=e.closest(".tb_input").tfClass("tb_seperate_items")[0],a=l.tfTag("li")[0],i=!0===e.checked;let s;s=!0==i?(l.dataset.checked=1,ThemifyConstructor.label.all):(l.removeAttribute("data-checked"),(s=l.dataset.toptext)||ThemifyConstructor.label.top),!0===t&&L.triggerEvent(a.tfClass("tb_multi_field")[0],"keyup"),a.tfClass("tb_tooltip_up")[0].textContent=s},update(a,e,i){const s=["top","right","bottom","left"],t="checkbox_"+a+"_apply_all",l=i.getEl(t),n=l?l.tfClass("style_apply_all")[0]:null;for(let l=3;-1<l;--l){let e=a+"_"+s[l],t=i.getEl(e);if(null!==t&&(i.range.update(e,i.getStyleVal(e),i),!n||!0!==n.checked)){let e=a+"_opp_"+s[l],t=i.getEl(e);null!==t&&(t.tfClass("style_apply_oppositive")[0].checked=!!i.getStyleVal(e))}}i.checkbox.update(t,i.getStyleVal(t),i),n&&this.apply_all(n)},render(e,t){return e.label||(e.label="m"),t.createMarginPadding(e.type,e)}},padding:{render(e,t){return e.label||(e.label="p"),t.createMarginPadding(e.type,e)}},box_shadow:{update(a,e,i){const s=["hOffset","vOffset","blur","spread"],t=a+"_color",l=a+"_inset";for(let l=3;-1<l;--l){let e=a+"_"+s[l],t=i.getEl(e);null!==t&&i.range.update(e,i.getStyleVal(e),i)}i.color.update(t,i.getStyleVal(t),i),i.checkbox.update(l,i.getStyleVal(l),i)},render(e,i){const t=i.label,s=e.selector,n=e.prop,o=e.id,r={hOffset:{label:t.h_o,units:{px:{min:-200,max:200},em:{max:10}}},vOffset:{label:t.v_o,units:{px:{min:-200,max:200},em:{max:10}}},blur:{label:t.bl,units:{px:{max:300},em:{max:10}}},spread:{label:t.spr,units:{px:{min:-200,max:200},em:{min:-10,max:10}}}},c=T.createElement("ul"),d=O.Helper.cloneObject(e),l=T.createDocumentFragment();d.class="tb_shadow_field",d.prop=null,c.className="tb_seperate_items tb_shadow_inputs";for(let a in r)if(r[a]!==I){let e=r[a],t=T.createElement("li"),l=o+"_"+a;d.id=l,d.tooltip=e.label,d.units=e.units,d.selector=s,t.appendChild(i.range.render(d,i)),c.appendChild(t),i.styles[l]={prop:n,selector:s}}let a=o+"_color";const p=T.createElement("li"),_={id:a,type:"color",class:d.class,selector:s},m=(p.className="tb_shadow_color",i.styles[a]={prop:n,selector:s,type:"color"},p.appendChild(i.color.render(_,i)),c.appendChild(p),{id:a=o+"_inset",origID:o,type:"checkbox",class:d.class,isBoxShadow:!0,prop:n,options:[{value:t.in_sh,name:"inset"}]});return i.styles[a]={prop:n,selector:s},l.append(c,i.checkboxGenerate("checkbox",m)),e.label||(e.label="b_s"),l}},text_shadow:{update(a,e,i){const s=[i.label.h_sh,i.label.v_sh,i.label.bl],t=a+"_color";for(let l=2;-1<l;--l){let e=a+"_"+s[l],t=i.getEl(e);null!==t&&i.range.update(e,i.getStyleVal(e),i)}i.color.update(t,i.getStyleVal(t),i)},render(e,i){const t=i.label,s=e.selector,n=e.prop,o=e.id,r={hShadow:{label:t.h_sh,units:{px:{min:-200,max:200},em:{max:10}}},vShadow:{label:t.v_sh,units:{px:{min:-200,max:200},em:{max:10}}},blur:{label:t.bl,units:{px:{max:300},em:{max:10}}}},c=T.createElement("ul"),l=T.createElement("li"),a=o+"_color",d={id:a,class:"tb_shadow_field",selector:s},p=O.Helper.cloneObject(e);p.class="tb_shadow_field",p.prop=null,c.className="tb_seperate_items tb_shadow_inputs";for(let a in r)if(r.hasOwnProperty(a)){let e=r[a],t=T.createElement("li"),l=o+"_"+a;p.id=l,p.tooltip=e.label,p.units=e.units,t.appendChild(i.range.render(p,i)),c.appendChild(t),i.styles[l]={prop:n,selector:s}}return i.styles[a]={prop:n,selector:s,type:"color"},l.className="tb_shadow_color",l.appendChild(i.color.render(d,i)),c.appendChild(l),e.label||(e.label="t_sh"),c}},border_radius:{render(e,t){return e.options||(e.options=t.getOptions("border_radius")),e.wrap_class||(e.wrap_class="border-radius-options"),e.label||(e.label="r_c"),t.createMarginPadding(e.type,e)}},outline:{render(e,t){return t.styles[e.id+"-c"]=e.selector,t.styles[e.id+"-w"]=e.selector,t.styles[e.id+"-s"]=e.selector,e.label||(e.label="o"),t.create([{type:"multi",options:[{type:"color",id:e.id+"-c",class:"outline_color"},{type:"range",id:e.id+"-w",units:{px:{max:300}},class:"outline_width"},{type:"select",id:e.id+"-s",options:t.getOptions("border"),class:"outline_style"}]}])}},border:{changeControl(e){const t=e.parentNode,l=e.value,a=t.parentNode.children;for(let e=a.length-1;-1<e;--e)a[e]!==t&&a[e].classList.toggle("_tb_hide_binding","none"===l)},apply_all(l,e){const a=e.tfTag("input"),t=function(t,e){for(let e=a.length-1;-1<e;--e)a[e].parentNode.classList.toggle("_tb_disable",t&&"all"!==a[e].value);!0===t?l.dataset.checked=1:l.removeAttribute("data-checked"),!0===e&&L.triggerEvent(l.children[0].tfTag("select")[0],"change")};for(let e=a.length-1;-1<e;--e)a[e].tfOn("change",function(){t("all"===this.value,!0)},{passive:!0}),!0===a[e].checked&&"all"===a[e].value&&t(!0,null)},update(s,e,n){const o=["top","right","bottom","left"],t=s+"-type";for(let i=0;i<4;++i){let e=s+"_"+o[i],t=e+"_color",l=e+"_style",a=e+"_width";n.color.update(t,n.getStyleVal(t),n),n.select.update(l,n.getStyleVal(l),n),this.changeControl(n.getEl(l)),n.range.update(a,n.getStyleVal(a),n)}n.radio.update(t,n.getStyleVal(t),n)},render(e,s){const n=["top","right","bottom","left"],o=T.createElement("ul"),r=e.id,c=this,d=e.selector,p=O.Helper.cloneObject(e),_=O.Helper.cloneObject(e);_.options=[{value:"all",name:s.label.all,class:"style_apply_all ",icon:'<i class="tic-border-all"></i>',label_class:"tb_radio_label_borders"}],_.option_js=!0,_.id=r+"-type",_.no_toggle=!0,_.default="top",_.prop=null,p.options=s.getOptions("border"),p.prop=null,o.className="tb_seperate_items tb_borders tb_group_element_border";for(let i=0;i<4;++i){let e=T.createElement("li"),t=r+"_"+n[i],l=(_.options.push({value:n[i],name:s.label[n[i]],icon:'<i class="tic-border-'+n[i]+'"></i>',label_class:"tb_radio_label_borders"}),e.className="tb_group_element_"+n[i],"top"===n[i]&&(e.className+=" tb_group_element_all"),s.styles[t+"_color"]={prop:"border-"+n[i],selector:d},p.id=t+"_color",p.type="color",p.class="border_color",e.appendChild(s.color.render(p,s)),s.styles[t+"_width"]={prop:"border-"+n[i],selector:d},p.id=t+"_width",p.type="range",p.class="border_width",p.units={px:{max:300}},e.appendChild(s.range.render(p,s)),s.styles[t+"_style"]={prop:"border-"+n[i],selector:d},p.id=t+"_style",p.type="select",p.class="border_style tb_multi_field",s.select.render(p,s)),a=l.querySelector("select");e.appendChild(l),o.appendChild(e),a.tfOn("change",function(){c.changeControl(this)},{passive:!0}),"none"===a.value&&c.changeControl(a)}const t=T.createDocumentFragment();return t.appendChild(s.radioGenerate("icon_radio",_,s)),c.apply_all(o,t.querySelector("#"+_.id)),t.appendChild(o),e.label||(e.label="b"),t}},slider:{render(e,t){const l=e.label;return delete e.label,["crossfade","cover-fade","uncover-fade"].includes(t.values.effect_slider)&&(t.values.effect_slider="fade"),t.create([{type:"group",label:l,display:"accordion",options:t.getOptions(e),wrap_class:e.wrap_class}])}},custom_css:{render(e,t){e.class="large",e.control=!1,e.help=t.label.custom_css_help;const l=t.text.render(e,t);return O.activeModel.options(l.querySelector("#"+e.id),e.type),l}},custom_css_id:{render(e,t){let l,a={id:"custom_css_id",required:{rule:"custom_css_id",message:t.label.errorId},type:"text",label:t.label.id_name,help:t.label.id_help,control:!1,class:"large"};if(!1!==e.accordion){const i=[];e.custom_css&&i.push({id:e.custom_css,type:"custom_css"}),i.push(a),l=t.create([{type:"group",label:t.label.cc,display:"accordion",options:i,wrap_class:"tb_field_group_css"}],t)}else l=t.create([a],t);return"row"===t.component&&O.activeModel.options(l.querySelector("#custom_css_id"),e.type),l}},hidden:{update(e,t,l){const a=l.getEl(e);a&&(a.value=t)},render(e,t){const l=T.createElement("input"),a=t.getStyleVal(e.id);let i=a!==I?a:e.value;if(i!==I){if("object"==typeof i)try{i=JSON.stringify(i)}catch(e){}}else i="";return l.type="hidden",!0===t.is_repeat?(l.className=!0===t.is_sort?"tb_lb_sort_child":"tb_lb_option_child",l.dataset.inputId=e.id):(l.className="tb_lb_option",l.id=e.id),e.class!==I&&(l.className+=" "+e.class),l.value=i,t.initControl(l,e)}},frame:{render(e,t){return e.options=t.getOptions("frame"),e.class="tb_frame tf_scrollbar",e.binding={not_empty:{show:["tb_frame_multi_wrap","tb_frame_color"]},empty:{hide:["tb_frame_multi_wrap","tb_frame_color"]}},t.layout.render(e,t)}},title:{render(e,t){return e.control={event:"keyup",control_type:"change",selector:".module-title"},t.text.render(e,t)}},url:{render(e,t){return e.input_type="url",t.text.render(e,t)}},advacned_link:{render(e,t){return t.create([{id:"link",type:"radio",label:"l",wrap_class:" tb_compact_radios",link_to:!0,binding:{permalink:{show:"open_link",hide:"custom_link"},custom:{show:"custom_link",hide:"open_link"},none:{hide:["custom_link","open_link","no_follow"]}}},{id:"custom_link",type:"url",label:"cl"},{id:"open_link",type:"radio",label:"o_l",link_type:!0,control:!1,wrap_class:" tb_compact_radios",binding:{lightbox:{show:"tb_t_m_lightbox"},regular:{hide:"tb_t_m_lightbox"},newtab:{hide:"tb_t_m_lightbox"}}},{type:"multi",wrap_class:"tb_t_m_lightbox",label:"lg",options:[{id:"lightbox_w",type:"range",label:"w",control:!1,units:{px:{max:1e3},"%":""}},{id:"lightbox_h",type:"range",label:"ht",control:!1,units:{px:{max:1e3},"%":""}}]}])}},button:{render(e,t){const l=T.createElement("button");return l.className="builder_button",l.id=e.id,e.class!==I&&(l.className+=" "+e.class),l.textContent=e.name,t.initControl(l,e)}},row_anchor:{render(e,t){e.control=!1;const l=t.text.render(e,t);return O.activeModel.options(l.querySelector("#"+e.id),e.type),l}},widget_form:{render(e){const t=T.createElement("div");return t.id=e.id,t.className="module-widget-form-container wp-core-ui tb_lb_option",t}},widget_select:{data:null,el:null,cache:new Map,mediaInit:null,textInit:null,render(n,o){const e=T.createDocumentFragment(),t=T.createElement("div"),l=T.createElement("i"),a=T.createElement("input"),r=T.createElement("div"),c=T.createElement("div"),d=(t.id="available-widgets-filter",t.className="selectwrapper tf_inline_b tf_vmiddle tf_rel",l.className="tb_loading_widgets tf_loader",a.type="text",a.id="widgets-search",a.dataset.validation="not_empty",a.dataset.errorMsg=o.label.widget_validate,a.autocomplete="off",a.placeholder=o.label.search_widget,r.id="available-widgets",r.className="tf_scrollbar",r.tabIndex=1,c.id=n.id,c.className="tb_lb_option tb_widget_select",this.el=c,t.append(l,a),r.appendChild(c),e.append(t,r),o.values[n.id]),i=()=>{const i=[],s=(e,t)=>{for(let e=i.length-1;-1<e;--e)i[e].classList.remove("selected");e.classList.add("selected");const l=e.dataset.value;a.value=e.tfClass("widget-title")[0].textContent,r.style.display="none",this.select(l,this.data[l].b,t,n)};for(let a in this.data){let t=T.createElement("div"),e=T.createElement("div"),l=T.createElement("h3");if(t.className="widget-tpl "+this.data[a].b,t.dataset.value=a,e.className="widget-title",l.textContent=this.data[a].n,e.appendChild(l),t.appendChild(e),t.tfOn(L.click,function(e){e.preventDefault(),e.stopPropagation(),o.settings[n.id]=this.dataset.value,s(this,null)}),i.push(t),this.data[a].d!==I){let e=T.createElement("div");e.className="widget-description",e.innerHTML=this.data[a].d,t.appendChild(e)}c.appendChild(t),d===a&&s(t,o.values.instance_widget)}this.search(a,r),l.parentNode.removeChild(l)};if(null===this.data){O.LocalFetch({action:"tb_get_widget_items"}).then(e=>{this.data=e,i()}).catch(()=>{O.Spinner.showLoader("error")});for(let e in themifyBuilder.widget_css)_.Themify.loadCss(themifyBuilder.widget_css[e],null,themify_vars.version);themifyBuilder.widget_css=null}else setTimeout(i,5);return e},search(e,t){const s=this;e.tfOn("focus",this.show.bind(this),{passive:!0}).tfOn("blur",e=>{e.relatedTarget&&"available-widgets"===e.relatedTarget.id||(t.style.display="none")},{passive:!0}).tfOn("keyup",function(){s.show();const l=this.value.trim(),a=new RegExp(l,"i"),i=s.el.tfClass("widget-tpl");for(let t=0,e=i.length;t<e;++t)if(""===l)i[t].style.display="block";else{let e=i[t].tfTag("h3")[0];e=e.textContent||e.innerText,i[t].style.display=a.test(e)?"":"none"}},{passive:!0})},show(){this.el.closest("#available-widgets").style.display="block"},hide(){this.el.closest("#available-widgets").style.display="none"},select(l,n,o,r){const c=$("#instance_widget",O.LightBox.el),t=a=>{const i=()=>{const e=$(a.form);if(c.addClass("open").html(e.html()),o)for(let e in o)c.find('[name="'+e+'"]').val(o[e]);if("text"===n?_.wp.textWidgets&&(this.textInit||("visual"===O.mode&&_.wp.textWidgets.init(),this.textInit=!0),o)&&delete _.wp.textWidgets.widgetControls[o["widget-id"]]:_.wp.mediaWidgets&&(this.mediaInit||(_.wp.mediaWidgets.init(),this.mediaInit=!0),o)&&delete _.wp.mediaWidgets.widgetControls[o["widget-id"]],$(T).trigger("widget-added",[c]),"text"===n&&ThemifyConstructor.initControl(c.find(".wp-editor-area")[0],{control:{control_type:"wp_editor",type:"refresh"}}),"visual"===O.mode){const t=O.Helper.cloneObject(r);t.id=c[0].id,c.on("change",function(){null===O.is_ajax_call&&ThemifyConstructor.control.widget_select(this,t)}),l&&ThemifyConstructor.control.widget_select(c[0],t)}c.removeClass("tb_loading_widgets_form").find("select").wrap('<span class="selectwrapper tf_inline_b tf_vmiddle tf_rel"/>')},s=(e,t)=>{const l=e.length;L.loadJs(e[t].src,null,a.v).then(()=>{e[t].extra&&e[t].extra.after&&(t=>{let l="";if("object"==typeof t)for(let e in t)t[e]&&(l+=t[e]);if(""!==l){const e=T.createElement("script"),a=T.tfTag("script")[0];e.text=l,a.before(e)}})(e[t].extra.after),++t<l?s(e,t):i()})};!this.cache.has(n)&&(a.template&&(_.document.body.insertAdjacentHTML("beforeend",a.template),"visual"===O.mode)&&T.body.insertAdjacentHTML("beforeend",a.template),0<a.src.length)?s(a.src,0):i()};if(c.addClass("tb_loading_widgets_form").html('<div class="tf_loader"></div>'),o)for(let t in o){let e=t.match(/.*\[\d\]\[(.*)\]/);Array.isArray(e)&&e[1]!==I&&(delete o[t],o[e[1]]=v)}const e={action:"module_widget_get_form",load_class:l,tpl_loaded:this.cache.has(n)?1:0,id_base:n,widget_instance:o};O.LocalFetch(e).then(e=>{e&&e.form&&(t(e),this.cache.set(n,1))}).catch(()=>{O.Spinner.showLoader("error")})}},message:{render(e){const t=T.createElement("div");return e.class!==I&&(t.className+=e.class),t.innerHTML=e.comment,t}},filters:{getFields(){const e=ThemifyConstructor.label;return{hue:{label:e.hue,units:{deg:{max:360}},prop:"hue-rotate"},saturation:{label:e.sat,units:{"%":{max:200}},prop:"saturate"},brightness:{label:e.bri,units:{"%":{max:200}},prop:"brightness"},contrast:{label:e.con,units:{"%":{max:200}},prop:"contrast"},invert:{label:e.inv,units:{"%":""},prop:"invert"},sepia:{label:e.se,units:{"%":""},prop:"sepia"},opacity:{label:e.op,units:{"%":""},prop:"opacity"},blur:{label:e.bl,units:{px:{max:50}},prop:"blur"}}},update(a,e,i){const t=this.getFields(),l=i.stylesData[a].mid;i.select.update(l,i.getStyleVal(l),i);for(let l in t){let e="hue"===l?"angle":"range",t=a+"_"+l;i[e].update(t,i.getStyleVal(t),i)}},render(a,i){const s=a.selector,n=this.getFields(),e=T.createDocumentFragment(),o=T.createElement("ul"),t=i.create([{id:a.mid,type:"select",label:i.label.b_m,prop:"mix-blend-mode",selector:s,blend:!0}]);o.className="tb_seperate_items tb_filters_fields";for(let l in n){let e=n[l],t=T.createElement("li");e.id=a.id+"_"+l,e.class="tb_filters_field",e.type="hue"===l?"angle":"range",e.selector=s,t.appendChild(i.create([e])),o.appendChild(t)}return e.append(t,o),e}},help(e){const t=T.createElement("div"),l=T.createElement("div"),a=T.createElement("i");return t.className="tb_help tf_rel",l.className="tb_help_content tf_hide tf_box",a.tabIndex=-1,a.className="icon",l.innerHTML=e,a.appendChild(O.Helper.getIcon("ti-help")),t.append(a,l),t},hint(e){const t=T.createElement("span");return t.className="tb_tooltip_up",t.textContent=e,t},description(e){const t=T.createElement("small");return t.innerHTML=e,t},after(e){const t=T.createElement("span");return t.className="tb_input_after",t.textContent=e.after,e.label!==I&&""!==e.label||e.help===I||""===e.help||t.appendChild(this.help(e.help)),t},toggle_switch:{update(e,t,l){l.checkbox.update(e,l.getStyleVal(e),l)},controlChange(e,t){e.tfOn("change",function(){this.value=!0===this.checked?t.on.name:t.off!==I&&t.off.name||"","visibility"===ThemifyConstructor.clicked&&null!==O.activeModel&&O.activeModel.visibilityLabel()},{passive:!0})},render(e,t){const l=O.Helper.cloneObject(e),a={},i=T.createElement("div");let s="off",n=t.getStyleVal(e.id),o=(l.control=!1,l.class===I?l.class="toggle_switch":l.class+=" toggle_switch",l.options);o!==I&&"simple"!==o||("simple"===o?o={on:{name:"yes",value:t.label.y},off:{name:"no",value:t.label.no}}:(o={on:{name:"no",value:t.label.s},off:{name:"yes",value:t.label.hi}},l.default===I&&(l.default="on"))),n===I?("on"===l.default&&(s="on"),n="on"===s?o.on.name:o.off!==I&&o.off.name||""):(!1===n&&(n=""),s=o.on.name===n?"on":"off");for(let e in o)l.after===I&&o[e].value!==I&&(i.dataset[e]=t.label[o[e].value]!==I?t.label[o[e].value]:o[e].value),a[e]=o[e];const r=Object.keys(o)[0],c=(delete l.binding,delete o[r].value,delete l.default,l.options=[o[r]],l.wrap_checkbox===I&&(l.wrap_checkbox=""),l.wrap_checkbox+=" tb_switcher",i.className="switch_label",t.checkboxGenerate("checkbox",l)),d=c.querySelector(".toggle_switch");return d.value=n,d.checked="on"===s,this.controlChange(d,a),d.parentNode.appendChild(i),t.initControl(d,e),c}},height:{update(e,t,l){l.width.update(e,t,l)},render(e,t){const l=e.minid||"mi_h",a=e.maxid||"mx_h";return t.width.render(e,t,l,a,{px:{max:3500},vh:"","%":"",em:{max:200}})}},width:{update(e,t,l){l.range.update(e,t,l)},render(e,t,l,a,i){const s=e.id,n=e.prop,o=e.selector,r="tb_wrap_"+n+"_field",c=("width"===n&&(l=l||"min_"+s,a=a||"max_"+s),"width"===n?t.label.a_wd:t.label.a_ht),d=[{label:"width"===n?"w":"ht",id:s,type:"range",prop:n,selector:o,wrap_class:r,units:i=i||{px:{max:2e3},"%":"",em:{max:20}}},{id:s+"_auto_"+n,origId:s,type:"checkbox",label:"",prop:n,selector:o,options:[{value:c,name:"auto"}],binding:{checked:{hide:r},not_checked:{show:r}}},{label:"width"===n?"mi_wd":"m_ht",id:l,type:"range",prop:"min-"+n,selector:o,units:i},{label:"width"===n?"ma_wd":"mx_ht",id:a,type:"range",prop:"max-"+n,selector:o,units:i}];return t.create(d)}},aspectRatio:{update(e,t,l){const a=t.split("/"),i=a[0]||"",s=a[1]||"",n=l.getEl(e).closest(".tb_aspect_ratio").tfClass("tb_range");l.hidden.update(e,t,l),n[0].value=n[0].classList.contains("tb_aspect_to")?s:i,n[1].value=n[1].classList.contains("tb_aspect_to")?s:i},render(e,t){const l=t.getStyleVal(e.id)||"",a=l.split("/"),i={type:"multi",label:t.label.asp,wrap_class:"tb_aspect_ratio",options:[{type:"hidden",id:e.id,prop:e.prop,value:l||"",selector:e.selector},{type:"range",value:a[0]||"",id:"",min:1},{type:"message",comment:"/"},{id:"",class:"tb_aspect_to",type:"range",value:a[1]||"",min:1}]},s=t.create([i]),n=s.querySelector("#"+e.id);for(let e=s.querySelectorAll(".tb_lb_option"),t=e.length-1;-1<t;--t)e[t]!==n&&e[t].tfOn("keyup",e=>{const a=e.currentTarget;requestAnimationFrame(()=>{let e=n.value,t=a.classList.contains("tb_aspect_to")?1:0,l=1==t?0:1;(e=e.split("/"))[t]=a.value,e[l]||(e[l]=1),n.value=e.join("/"),L.triggerEvent(n,"change")})},{passive:!0});return s}},zIndex:{update(e,t,l){l.range.update(e,t,l)},render(e,t){return t.create([{id:e.id,label:"zi",type:"range",prop:e.prop,selector:e.selector,min:-99999,max:99999,help:t.label.zhelp}])}},fontSize:{update(e,t,l){l.range.update(e,t,l)},render(e,t,l){l=l||e.units||{px:{min:6,max:900},em:{min:.1,max:50},"%":{min:70,max:4e3},vw:{min:1,max:100},rem:{min:.1,max:50}};const a=t.create([{type:"range",id:e.id,selector:e.selector,prop:e.prop,wrap_class:e.wrap_class,class:e.class,help:e.help,description:e.description,after:e.after,units:l}]);return e.label||"font-size"!==e.prop||(e.label="f_s"),a}},lineHeight:{update(e,t,l){l.range.update(e,t,l)},render(e,t){const l=e.units||{px:{min:-400,max:400},em:{min:.1,max:50},"%":{min:1,max:4e3},vw:{min:1,max:100},rem:{min:.1,max:50}},a=t.fontSize.render(e,t,l);return e.label||(e.label="l_h"),a}},letterSpace:{update(e,t,l){l.range.update(e,t,l)},render(e,t){const l=e.units||{px:{min:-50,max:500},em:{min:.1,max:50},vw:{min:1,max:100},rem:{min:.1,max:50}},a=t.fontSize.render(e,t,l);return e.label||(e.label="l_s"),a}},fontStyle:{update(e,t,l){const a=l.stylesData[e].id2;l.radio.update(e,t,l),l.radio.update(a,l.getStyleVal(a),l)},render(e,t){const l=e.selector,a=t.create([{type:"multi",wrap_class:"tb_multi_fonts",options:[{id:e.id+"_regular",type:"icon_radio",options:t.getOptions("font_style"),prop:e.prop,selector:l},{id:e.id2,type:"icon_radio",options:t.getOptions("font_weight"),prop:"font-weight",selector:l}]}]);return e.label||(e.label="f_st"),a}},position:{update(i,e,s){s.select.update(i,e,s);for(let l=["top","right","bottom","left"],a=l.length-1;-1<a;--a){let e=i+"_"+l[a],t=e+"_auto";s.range.update(e,s.getStyleVal(e),s),s.checkbox.update(t,s.getStyleVal(t),s)}},render(e,t){const i=t.label,s=e.id,n=e.selector,l=e.prop,o="tb_css_pos",r=[{type:"select",prop:l,id:s,selector:n,class:e.class||"",options:{"":"",static:i.st,relative:i.re,absolute:i.abs,fixed:i.fi},binding:{empty:{hide:o},static:{hide:o},relative:{show:o},absolute:{show:o},fixed:{show:o}}}],a=[{type:"group",label:i.po,wrap_class:"tb_css_pos_wrap",options:r}];e.binding=r[0].binding;for(let l=["top","right","bottom","left"],a=0;a<l.length;++a){let e=s+"_"+l[a],t={type:"multi",label:i[l[a]],wrap_class:o,options:[{type:"range",id:e,selector:n,prop:l[a],units:{px:{min:-2e3,max:2e3},"%":{min:-1e3,max:1e3}}},{id:e+"_auto",is_position:!0,posId:e,prop:l[a],type:"checkbox",selector:n,options:[{name:"auto",value:i.auto}],binding:{checked:{hide:e},not_checked:{show:e}}}]};r.push(t)}return t.create(a)}},transform:{update(a,e,i){for(let t=["scale","translate","skew"],l=t.length-1;-1<l;--l){let e=a+"_"+t[l];i.margin.update(e,i.getStyleVal(e),i)}for(let t=["x","y","z"],l=t.length-1;-1<l;--l){let e=a+"_rotate_"+t[l];i.angle.update(e,i.getStyleVal(e),i)}const t=a+"_position";i.position_box.update(t,i.getStyleVal(t),i)},render(e,t){const l=e.id,a=e.selector,i=e.prop,s=t.label,n="tb_transform_field"+(e.class?" "+e.class:""),o=[{id:"top",label:"X"},{id:"bottom",label:"Y"}],r=[{type:"group",wrap_class:"tb_transform_fields tf_w"+(e.wrap_class?" "+e.wrap_class:""),label:"",options:[{id:l+"_scale",type:"margin",label:s.sc,prop:i,selector:a,class:n,units:{"":{min:-100,max:1e3,increment:.1}},options:o},{id:l+"_translate",type:"margin",label:s.tl,prop:i,selector:a,class:n,units:{px:{min:-2e3,max:2e3},"%":{min:-100,max:100},em:{min:0,max:100}},options:o},{id:l+"_skew",type:"margin",label:s.sk,prop:i,selector:a,class:n,units:{deg:{min:-180,max:180}},options:o},{type:"multi",label:s.ro,wrap_class:"tb_tr_rotate",options:[{id:l+"_rotate_x",type:"angle",tooltip:"X",prop:"rotate",selector:a,class:n},{id:l+"_rotate_y",type:"angle",tooltip:"Y",prop:"rotate",selector:a,class:n},{id:l+"_rotate_z",type:"angle",tooltip:"Z",prop:"rotate",selector:a,class:n}]}]},{id:l+"_position",label:s.orig,type:"position_box",prop:"transform-origin",selector:a}];return t.create(r)}},clickable:{render(e,t){const l=t.label;return t.create([{type:"group",label:l.l,display:"accordion",wrap_class:"tf_w",options:[{type:"url",id:"_link",label:l.clickl,binding:{empty:{hide:"_link_o"},not_empty:{show:"_link_o"}}},{type:"toggle_switch",id:"_link_o",label:l.houtl}]}])}},code:{render(e,t){const l=[{id:"lng",label:e.options.lng,type:"select",options:{markup:"Markup(markup, html, xml, svg, mathml, ssml, atom, rss)",css:"CSS",javascript:"JavaScript",abap:"ABAP",abnf:"ABNF",actionscript:"ActionScript",ada:"Ada",agda:"Agda",al:"AL",antlr4:"ANTLR4",apacheconf:"Apache Configuration",apex:"Apex",apl:"APL",applescript:"AppleScript",aql:"AQL",arduino:"Arduino",arff:"ARFF",armasm:"ARM Assembly",arturo:"Arturo",asciidoc:"AsciiDoc",aspnet:"ASP.NET (C#)",asm6502:"6502 Assembly",asmatmel:"Atmel AVR Assembly",autohotkey:"AutoHotkey",autoit:"AutoIt",avisynth:"AviSynth","avro-idl":"Avro IDL",awk:"AWK",bash:"Bash",basic:"BASIC",batch:"Batch",bbcode:"BBcode",bbj:"BBj",bicep:"Bicep",birb:"Birb",bison:"Bison",bnf:"BNF",bqn:"BQN",brainfuck:"Brainfuck",brightscript:"BrightScript",bro:"Bro",bsl:"BSL (1C:Enterprise)",c:"C",csharp:"C#",cpp:"C++",cfscript:"CFScript",chaiscript:"ChaiScript",cil:"CIL",cilkc:"Cilk/C",cilkcpp:"Cilk/C++",clojure:"Clojure",cmake:"CMake",cobol:"COBOL",coffeescript:"CoffeeScript",concurnas:"Concurnas",csp:"Content-Security-Policy",cooklang:"Cooklang",coq:"Coq",crystal:"Crystal",csv:"CSV",cue:"CUE",cypher:"Cypher",d:"D",dart:"Dart",dataweave:"DataWeave",dax:"DAX",dhall:"Dhall",diff:"Diff",django:"Django/Jinja2","dns-zone-file":"DNS zone file",docker:"Docker",dot:"DOT (Graphviz)",ebnf:"EBNF",editorconfig:"EditorConfig",eiffel:"Eiffel",ejs:"EJS",elixir:"Elixir",elm:"Elm",etlua:"Embedded Lua templating",erb:"ERB",erlang:"Erlang","excel-formula":"Excel Formula",fsharp:"F#",factor:"Factor",flow:"Flow",fortran:"Fortran",ftl:"FreeMarker Template Language",gml:"GameMaker Language",gap:"GAP (CAS)",gcode:"G-code",gdscript:"GDScript",gedcom:"GEDCOM",gettext:"gettext",gherkin:"Gherkin",git:"Git",glsl:"GLSL",gn:"GN","linker-script":"GNU Linker Script",go:"Go","go-module":"Go module",gradle:"Gradle",graphql:"GraphQL",groovy:"Groovy",haml:"Haml",handlebars:"Handlebars",haskell:"Haskell",haxe:"Haxe",hcl:"HCL",hlsl:"HLSL",hoon:"Hoon",http:"HTTP",hpkp:"HTTP Public-Key-Pins",hsts:"HTTP Strict-Transport-Security",ichigojam:"IchigoJam",icon:"Icon","icu-message-format":"ICU Message Format",idris:"Idris",ignore:".ignore",inform7:"Inform 7",ini:"Ini",io:"Io",j:"J",java:"Java",javadoclike:"JavaDoc-like",javastacktrace:"Java stack trace",jexl:"Jexl",jolie:"Jolie",jq:"JQ",jsdoc:"JSDoc",json:"JSON",json5:"JSON5",jsonp:"JSONP",jsstacktrace:"JS stack trace",julia:"Julia",keepalived:"Keepalived Configure",keyman:"Keyman",kotlin:"Kotlin",kumir:"KuMir (ÐšÑƒÐœÐ¸Ñ€)",kusto:"Kusto",latex:"LaTeX",latte:"Latte",less:"Less",lilypond:"LilyPond",liquid:"Liquid",lisp:"Lisp",livescript:"LiveScript",llvm:"LLVM IR",log:"Log file",lolcode:"LOLCODE",lua:"Lua",magma:"Magma (CAS)",makefile:"Makefile",markdown:"Markdown",mata:"Mata",matlab:"MATLAB",maxscript:"MAXScript",mel:"MEL",mermaid:"Mermaid",metafont:"METAFONT",mizar:"Mizar",mongodb:"MongoDB",monkey:"Monkey",moonscript:"MoonScript",n1ql:"N1QL",n4js:"N4JS","nand2tetris-hdl":"Nand To Tetris HDL",naniscript:"Naninovel Script",nasm:"NASM",neon:"NEON",nevod:"Nevod",nginx:"Nginx",nim:"Nim",nix:"Nix",nsis:"NSIS",objectivec:"Objective-C",ocaml:"OCaml",odin:"Odin",opencl:"OpenCL",openqasm:"OpenQasm",oz:"Oz",parigp:"PARI/GP",parser:"Parser",pascal:"Pascal",pascaligo:"Pascaligo",psl:"PATROL Scripting Language",pcaxis:"PC-Axis",peoplecode:"PeopleCode",perl:"Perl",php:"PHP",phpdoc:"PHPDoc","plant-uml":"PlantUML",plsql:"PL/SQL",powerquery:"PowerQuery",powershell:"PowerShell",processing:"Processing",prolog:"Prolog",promql:"PromQL",properties:".properties",protobuf:"Protocol Buffers",pug:"Pug",puppet:"Puppet",pure:"Pure",purebasic:"PureBasic",purescript:"PureScript",python:"Python",qsharp:"Q#",q:"Q (kdb+ database)",qml:"QML",qore:"Qore",r:"R",racket:"Racket",cshtml:"Razor C#",jsx:"React JSX",tsx:"React TSX",reason:"Reason",regex:"Regex",rego:"Rego",renpy:"Ren'py",rescript:"ReScript",rest:"reST (reStructuredText)",rip:"Rip",roboconf:"Roboconf",robotframework:"Robot Framework",ruby:"Ruby",rust:"Rust",sas:"SAS",sass:"Sass (Sass)",scss:"Sass (SCSS)",scala:"Scala",scheme:"Scheme","shell-session":"Shell session",smali:"Smali",smalltalk:"Smalltalk",smarty:"Smarty",sml:"SML",solidity:"Solidity (Ethereum)","solution-file":"Solution file",soy:"Soy (Closure Template)",sparql:"SPARQL","splunk-spl":"Splunk SPL",sqf:"SQF:Status Quo Function (Arma 3)",sql:"SQL",squirrel:"Squirrel",stan:"Stan",stata:"Stata Ado",iecst:"Structured Text (IEC 61131-3)",stylus:"Stylus",supercollider:"SuperCollider",swift:"Swift",systemd:"Systemd configuration file","t4-templating":"T4 templating","t4-cs":"T4 Text Templates (C#)","t4-vb":"T4 Text Templates (VB)",tap:"TAP",tcl:"Tcl",tt2:"Template Toolkit 2",textile:"Textile",toml:"TOML",tremor:"Tremor",turtle:"Turtle",twig:"Twig",typescript:"TypeScript",typoscript:"TypoScript",unrealscript:"UnrealScript",uorazor:"UO Razor Script",uri:"URI",v:"V",vala:"Vala",vbnet:"VB.Net",velocity:"Velocity",verilog:"Verilog",vhdl:"VHDL",vim:"vim","visual-basic":"Visual Basic",warpscript:"WarpScript",wasm:"WebAssembly","web-idl":"Web IDL",wgsl:"WGSL",wiki:"Wiki markup",wolfram:"Wolfram language",wren:"Wren",xeora:"Xeora","xml-doc":"XML doc (.net)",xojo:"Xojo (REALbasic)",xquery:"XQuery",yaml:"YAML",yang:"YANG",zig:"Zig"}},{id:"theme",label:e.options.theme,type:"select",options:{"":"Default",a11y_d:"A11y Dark",atom_d:"Atom Dark",cb:"CB",cld_c:"Coldark Cold",cld_d:"Coldark Dark",coy:"Coy",dark:"Dark",dracula:"Dracula",du_d:"Duotone Dark",du_f:"Duotone Forest",gr_d:"Gruvbox Dark",gr_l:"Gruvbox Light",lucario:"Lucario",mt_l:"Material Light",night_owl:"Night Owl",okaidia:"Okaidia",tmr:"Tomorrow Night",twilight:"Twilight",vs:"VS",vs_d_p:"VS Dark Plus"}},{id:"code",label:e.options.code,type:"textarea",codeeditor:t.getStyleVal("lng")||"javascript",control:{event:"change"}}],a=t.create(l),i=a.querySelector("#lng"),s=a.querySelector("#code");return i.tfOn("change",e=>{const t=s.tf_mirror;t&&(t.save(),t.destroy()),O.Helper.codeMirror(s,e.currentTarget.value).then(e=>{e&&e.editor.on("change",()=>{L.triggerEvent(e.el,"change")})})},{passive:!0}),a}}}})(jQuery,tb_app,Themify,window.top,document,void 0);